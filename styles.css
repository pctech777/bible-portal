/* Bible Portal Plugin Styles */

/* ========================================
   CSS VARIABLE SYSTEM
   ======================================== */

:root {
	/* Typography Scale */
	--bp-text-xs: 0.75rem;    /* 12px */
	--bp-text-sm: 0.875rem;   /* 14px */
	--bp-text-base: 1rem;     /* 16px */
	--bp-text-lg: 1.125rem;   /* 18px */
	--bp-text-xl: 1.25rem;    /* 20px */
	--bp-text-2xl: 1.5rem;    /* 24px */
	--bp-text-3xl: 1.875rem;  /* 30px */
	--bp-text-4xl: 2.25rem;   /* 36px */

	/* Spacing Scale */
	--bp-space-1: 0.25rem;    /* 4px */
	--bp-space-2: 0.5rem;     /* 8px */
	--bp-space-3: 0.75rem;    /* 12px */
	--bp-space-4: 1rem;       /* 16px */
	--bp-space-5: 1.25rem;    /* 20px */
	--bp-space-6: 1.5rem;     /* 24px */
	--bp-space-8: 2rem;       /* 32px */
	--bp-space-10: 2.5rem;    /* 40px */

	/* Semantic Colors - Biblical Themes */
	--bp-holy: #ffd700;           /* Gold - glory, divinity */
	--bp-sacrifice: #c41e3a;      /* Crimson - sacrifice, blood */
	--bp-royal: #6a1b9a;          /* Purple - royalty */
	--bp-water: #0277bd;          /* Blue - baptism, cleansing */
	--bp-earth: #8b4513;          /* Brown - earth, humanity */
	--bp-parchment: #f4e4c1;      /* Aged paper */
	--bp-parchment-dark: #d4c5a9; /* Darker parchment */

	/* Banner Theme Colors */
	--bp-banner-parchment-start: #f4e4c1;
	--bp-banner-parchment-end: #d4c5a9;
	--bp-banner-parchment-text: #3e2723;

	--bp-banner-holy-start: #fef9e7;
	--bp-banner-holy-end: #ffd700;
	--bp-banner-holy-text: #2c3e50;

	--bp-banner-royal-start: #6a1b9a;
	--bp-banner-royal-end: #ab47bc;
	--bp-banner-royal-text: #ffffff;

	--bp-banner-sacrifice-start: #8b0000;
	--bp-banner-sacrifice-end: #b8860b;
	--bp-banner-sacrifice-text: #ffffff;

	--bp-banner-ocean-start: #1565c0;
	--bp-banner-ocean-end: #01579b;
	--bp-banner-ocean-text: #ffffff;

	/* Jesus Words */
	--bp-jesus-words: #dc2626;
	--bp-jesus-words-hover: #b91c1c;

	/* Strong's Concordance */
	--bp-strongs-greek: #0277bd;
	--bp-strongs-hebrew: #8b4513;

	/* Shadows & Depth */
	--bp-shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
	--bp-shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
	--bp-shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
	--bp-shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.15);
	--bp-shadow-glow: 0 0 15px rgba(var(--interactive-accent-rgb), 0.3);

	/* Animation Durations */
	--bp-transition-fast: 0.15s;
	--bp-transition-normal: 0.2s;
	--bp-transition-slow: 0.3s;

	/* Border Radius */
	--bp-radius-sm: 4px;
	--bp-radius-md: 6px;
	--bp-radius-lg: 8px;
	--bp-radius-xl: 12px;
	--bp-radius-full: 9999px;
}

/* ========================================
   UTILITY CLASSES
   Reusable utility classes for common patterns
   ======================================== */

/* Visibility utilities */
.bp-hidden { display: none !important; }
.bp-visible { display: block !important; }
.bp-visible-flex { display: flex !important; }
.bp-visible-inline { display: inline !important; }
.bp-visible-inline-block { display: inline-block !important; }

/* Cursor utilities */
.bp-clickable { cursor: pointer; }
.bp-not-allowed { cursor: not-allowed; }
.bp-grabbing { cursor: grabbing; }

/* Text selection */
.bp-select-text { user-select: text; }
.bp-select-none { user-select: none; }

/* Dynamic color utilities (use with CSS custom properties) */
.bp-bg-dynamic { background-color: var(--bp-dynamic-bg); }
.bp-text-dynamic { color: var(--bp-dynamic-color); }
.bp-border-dynamic { border-color: var(--bp-dynamic-border); }
.bp-border-left-dynamic { border-left-color: var(--bp-dynamic-border); }
.bp-border-top-dynamic { border-top-color: var(--bp-dynamic-border); }

/* Progress bar utilities */
.bp-progress-bar {
	width: var(--bp-progress, 0%);
	transition: width var(--bp-transition-normal) ease;
}

/* Position utilities for dynamic positioning */
.bp-absolute { position: absolute; }
.bp-fixed { position: fixed; }
.bp-relative { position: relative; }

/* Z-index layers */
.bp-z-dropdown { z-index: 100; }
.bp-z-modal { z-index: 1000; }
.bp-z-tooltip { z-index: 10000; }

/* Link-like appearance */
.bp-link {
	cursor: pointer;
	color: var(--interactive-accent);
	text-decoration: underline;
}

/* Form input utilities */
.bp-color-input {
	width: 32px;
	height: 24px;
	border: none;
	cursor: pointer;
}

.bp-toggle-input {
	cursor: pointer;
}

/* Dark mode adjustments */
.theme-dark {
	/* Slightly adjusted banner colors for dark mode */
	--bp-banner-parchment-start: #d4c5a9;
	--bp-banner-parchment-end: #c4b599;
	--bp-banner-parchment-text: #2c1810;

	--bp-banner-holy-start: #f0e68c;
	--bp-banner-holy-end: #daa520;
	--bp-banner-holy-text: #1a1a1a;
}

/* Dark mode banner theme overrides (ensure themes work in dark mode) */
.theme-dark .bible-portal-banner.theme-parchment {
	background: linear-gradient(135deg, #d4c5a9 0%, #c4b599 100%) !important;
	color: #2c1810 !important;
}

.theme-dark .bible-portal-banner.theme-holy-light {
	background: linear-gradient(135deg, #f0e68c 0%, #daa520 100%) !important;
	color: #1a1a1a !important;
}

.theme-dark .bible-portal-banner.theme-royal {
	background: linear-gradient(135deg, #6a1b9a 0%, #ab47bc 100%) !important;
	color: #ffffff !important;
}

.theme-dark .bible-portal-banner.theme-sacrifice {
	background: linear-gradient(135deg, #8b0000 0%, #b8860b 100%) !important;
	color: #ffffff !important;
}

.theme-dark .bible-portal-banner.theme-ocean {
	background: linear-gradient(135deg, #1565c0 0%, #01579b 100%) !important;
	color: #ffffff !important;
}

/* ========================================
   COMPREHENSIVE THEME SYSTEM
   Theme-specific CSS variables for entire plugin UI
   ======================================== */

/* PARCHMENT THEME (Light Mode) - Aged manuscript aesthetic */
.bible-portal-view.theme-parchment {
	--bp-bg-primary: #faf6ed;
	--bp-bg-secondary: #f4ead8;
	--bp-bg-elevated: #ffffff;
	--bp-text-primary: #2c1810;
	--bp-text-secondary: #4a3528;
	--bp-text-muted: #6b5a4c;
	--bp-accent: #8b6914;
	--bp-accent-soft: #d4a44a;
	--bp-border: #d4c5a9;
	--bp-border-light: #e8dcc8;
	--bp-interactive: #8b6914;
	--bp-interactive-hover: #a68434;
	--bp-shadow: 0 2px 8px rgba(44, 24, 16, 0.08);
}

/* PARCHMENT THEME (Dark Mode) */
.theme-dark .bible-portal-view.theme-parchment {
	--bp-bg-primary: #1a1410;
	--bp-bg-secondary: #241c14;
	--bp-bg-elevated: #2e2418;
	--bp-text-primary: #e8d4a8;
	--bp-text-secondary: #c9b896;
	--bp-text-muted: #9d8a6f;
	--bp-accent: #d4a44a;
	--bp-accent-soft: #8b6914;
	--bp-border: #3a2f20;
	--bp-border-light: #2e2418;
	--bp-interactive: #d4a44a;
	--bp-interactive-hover: #e8b85c;
	--bp-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
}

/* HOLY LIGHT THEME (Light Mode) - Gold and divine light */
.bible-portal-view.theme-holy-light {
	--bp-bg-primary: #fffef5;
	--bp-bg-secondary: #fff9e6;
	--bp-bg-elevated: #ffffff;
	--bp-text-primary: #3a2f0a;
	--bp-text-secondary: #5a4f1e;
	--bp-text-muted: #7a6f3e;
	--bp-accent: #d4af37;
	--bp-accent-soft: #ffd700;
	--bp-border: #f5e6b8;
	--bp-border-light: #faf2d4;
	--bp-interactive: #d4af37;
	--bp-interactive-hover: #ffd700;
	--bp-shadow: 0 2px 8px rgba(212, 175, 55, 0.15);
}

/* HOLY LIGHT THEME (Dark Mode) */
.theme-dark .bible-portal-view.theme-holy-light {
	--bp-bg-primary: #1a1708;
	--bp-bg-secondary: #24200e;
	--bp-bg-elevated: #2e2814;
	--bp-text-primary: #fff9e6;
	--bp-text-secondary: #f5e6b8;
	--bp-text-muted: #c9b880;
	--bp-accent: #ffd700;
	--bp-accent-soft: #d4af37;
	--bp-border: #3a3420;
	--bp-border-light: #2e2814;
	--bp-interactive: #ffd700;
	--bp-interactive-hover: #ffed4e;
	--bp-shadow: 0 2px 8px rgba(255, 215, 0, 0.2);
}

/* ROYAL THEME (Light Mode) - Purple majesty */
.bible-portal-view.theme-royal {
	--bp-bg-primary: #faf5fc;
	--bp-bg-secondary: #f3e5f5;
	--bp-bg-elevated: #ffffff;
	--bp-text-primary: #2c1a3a;
	--bp-text-secondary: #4a2e5a;
	--bp-text-muted: #6a4e7a;
	--bp-accent: #6a1b9a;
	--bp-accent-soft: #ab47bc;
	--bp-border: #d1c4e9;
	--bp-border-light: #e1d8f0;
	--bp-interactive: #6a1b9a;
	--bp-interactive-hover: #8e24aa;
	--bp-shadow: 0 2px 8px rgba(106, 27, 154, 0.12);
}

/* ROYAL THEME (Dark Mode) */
.theme-dark .bible-portal-view.theme-royal {
	--bp-bg-primary: #1a0d24;
	--bp-bg-secondary: #24142e;
	--bp-bg-elevated: #2e1a38;
	--bp-text-primary: #ede7f6;
	--bp-text-secondary: #d1c4e9;
	--bp-text-muted: #9c88b5;
	--bp-accent: #ab47bc;
	--bp-accent-soft: #ce93d8;
	--bp-border: #3a2848;
	--bp-border-light: #2e1a38;
	--bp-interactive: #ab47bc;
	--bp-interactive-hover: #ce93d8;
	--bp-shadow: 0 2px 8px rgba(171, 71, 188, 0.25);
}

/* SACRIFICE THEME (Light Mode) - Crimson and gold */
.bible-portal-view.theme-sacrifice {
	--bp-bg-primary: #fef8f6;
	--bp-bg-secondary: #fce8e0;
	--bp-bg-elevated: #ffffff;
	--bp-text-primary: #3a1410;
	--bp-text-secondary: #5a2820;
	--bp-text-muted: #7a4038;
	--bp-accent: #8b0000;
	--bp-accent-soft: #d42020;
	--bp-border: #f0d4c8;
	--bp-border-light: #f8e8e0;
	--bp-interactive: #8b0000;
	--bp-interactive-hover: #a01010;
	--bp-shadow: 0 2px 8px rgba(139, 0, 0, 0.12);
}

/* SACRIFICE THEME (Dark Mode) */
.theme-dark .bible-portal-view.theme-sacrifice {
	--bp-bg-primary: #1a0808;
	--bp-bg-secondary: #24100e;
	--bp-bg-elevated: #2e1814;
	--bp-text-primary: #fce8e0;
	--bp-text-secondary: #f0d4c8;
	--bp-text-muted: #c9a898;
	--bp-accent: #d42020;
	--bp-accent-soft: #b8860b;
	--bp-border: #3a2420;
	--bp-border-light: #2e1814;
	--bp-interactive: #d42020;
	--bp-interactive-hover: #e84040;
	--bp-shadow: 0 2px 8px rgba(212, 32, 32, 0.25);
}

/* OCEAN THEME (Light Mode) - Deep blue serenity */
.bible-portal-view.theme-ocean {
	--bp-bg-primary: #f5faff;
	--bp-bg-secondary: #e3f2fd;
	--bp-bg-elevated: #ffffff;
	--bp-text-primary: #0d2838;
	--bp-text-secondary: #1a3f58;
	--bp-text-muted: #2e5778;
	--bp-accent: #1565c0;
	--bp-accent-soft: #42a5f5;
	--bp-border: #90caf9;
	--bp-border-light: #bbdefb;
	--bp-interactive: #1565c0;
	--bp-interactive-hover: #1976d2;
	--bp-shadow: 0 2px 8px rgba(21, 101, 192, 0.12);
}

/* OCEAN THEME (Dark Mode) */
.theme-dark .bible-portal-view.theme-ocean {
	--bp-bg-primary: #0a1a28;
	--bp-bg-secondary: #102838;
	--bp-bg-elevated: #183648;
	--bp-text-primary: #bbdefb;
	--bp-text-secondary: #90caf9;
	--bp-text-muted: #64b5f6;
	--bp-accent: #42a5f5;
	--bp-accent-soft: #64b5f6;
	--bp-border: #284858;
	--bp-border-light: #183648;
	--bp-interactive: #42a5f5;
	--bp-interactive-hover: #64b5f6;
	--bp-shadow: 0 2px 8px rgba(66, 165, 245, 0.25);
}

/* CUSTOM THEME - Use Obsidian defaults with minimal theming */
.bible-portal-view.theme-custom {
	--bp-bg-primary: var(--background-primary);
	--bp-bg-secondary: var(--background-secondary);
	--bp-bg-elevated: var(--background-primary-alt);
	--bp-text-primary: var(--text-normal);
	--bp-text-secondary: var(--text-muted);
	--bp-text-muted: var(--text-faint);
	--bp-accent: var(--interactive-accent);
	--bp-accent-soft: var(--interactive-accent-hover);
	--bp-border: var(--background-modifier-border);
	--bp-border-light: var(--background-modifier-border);
	--bp-interactive: var(--interactive-accent);
	--bp-interactive-hover: var(--interactive-accent-hover);
	--bp-shadow: var(--bp-shadow-md);
}

/* ========================================
   LAYOUT
   ======================================== */

/* Two-column layout: sidebar + main content */
.bible-portal-layout {
	display: flex;
	height: 100%;
	gap: 0;
}

.bible-portal-sidebar {
	width: 160px;
	background: var(--bp-bg-secondary);
	border-right: 1px solid var(--bp-border);
	display: flex;
	flex-direction: column;
	padding: 10px 5px;
	gap: 6px;
	flex-shrink: 0;
}

/* Sidebar footer - pushes settings button to bottom */
.sidebar-footer {
	margin-top: auto;
	padding-top: 10px;
	border-top: 1px solid var(--bp-border);
}

.sidebar-settings-btn {
	opacity: 0.7;
}

.sidebar-settings-btn:hover {
	opacity: 1;
}

.bible-portal-main {
	flex: 1;
	overflow-y: auto;
	min-width: 0;
	background: var(--bp-bg-primary);
}

/* Sidebar view mode buttons */
.sidebar-mode-btn {
	width: 150px;
	height: auto;
	padding: 8px 12px;
	margin: 0 auto;
	border: none;
	background: transparent;
	color: var(--text-muted);
	cursor: pointer;
	border-radius: 6px;
	font-size: 14px;
	display: flex;
	align-items: center;
	justify-content: flex-start;
	gap: 8px;
	transition: all 0.2s;
}

.sidebar-mode-btn:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.sidebar-mode-btn.active {
	background: var(--interactive-accent);
	color: white;
}

.sidebar-mode-icon {
	width: 18px;
	height: 18px;
	flex-shrink: 0;
	display: flex;
	align-items: center;
	justify-content: center;
}

.sidebar-mode-icon svg {
	width: 18px;
	height: 18px;
	stroke-width: 2;
}

.sidebar-mode-title {
	font-size: 13px;
	font-weight: 500;
	white-space: nowrap;
}

/* Icon Styling - Button Icons */
.btn-icon {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 16px;
	height: 16px;
	margin-right: 6px;
	flex-shrink: 0;
}

.btn-icon svg {
	width: 16px;
	height: 16px;
	stroke-width: 2;
}

/* Icon Styling - Menu Icons */
.menu-icon {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 16px;
	height: 16px;
	margin-right: 8px;
	flex-shrink: 0;
	opacity: 0.8;
}

.menu-icon svg {
	width: 16px;
	height: 16px;
	stroke-width: 2;
}

.bible-menu-item:hover .menu-icon {
	opacity: 1;
}

/* Icon Styling - Title Icons */
.title-icon {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	width: 20px;
	height: 20px;
	margin-right: 10px;
	flex-shrink: 0;
}

.title-icon svg {
	width: 20px;
	height: 20px;
	stroke-width: 2;
}

/* Smooth animations */
@keyframes fadeIn {
	from {
		opacity: 0;
		transform: translateY(10px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes slideIn {
	from {
		opacity: 0;
		transform: translateX(-20px);
	}
	to {
		opacity: 1;
		transform: translateX(0);
	}
}

@keyframes spin {
	from {
		transform: rotate(0deg);
	}
	to {
		transform: rotate(360deg);
	}
}

.bible-portal-view {
	padding: 0;
	height: 100%;
	overflow-y: auto;
}

.bible-portal-container {
	margin: 0 auto;
	padding: 20px 40px;
	animation: fadeIn 0.3s ease-out;
	width: 100%;
}

/* Readable line length - limits width for better readability (matches Obsidian behavior) */
/* Note: 900px provides a good balance between readability and not feeling too cramped */
.bible-portal-container.readable-line-length {
	max-width: 900px;
}

/* Banner (Notion-style) */
.bible-portal-banner {
	background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	color: white;
	padding: 40px 30px;
	border-radius: var(--bp-radius-lg);
	margin-bottom: 30px;
	box-shadow: var(--bp-shadow-md);
	transition: all var(--bp-transition-slow);
}

/* Banner Themes */
.bible-portal-banner.theme-parchment {
	background: linear-gradient(135deg, var(--bp-banner-parchment-start) 0%, var(--bp-banner-parchment-end) 100%);
	color: var(--bp-banner-parchment-text);
	border: 2px solid rgba(62, 39, 35, 0.15);
	box-shadow:
		inset 0 1px 0 rgba(255, 255, 255, 0.3),
		var(--bp-shadow-md);
}

.bible-portal-banner.theme-holy-light {
	background: linear-gradient(135deg, var(--bp-banner-holy-start) 0%, var(--bp-banner-holy-end) 100%);
	color: var(--bp-banner-holy-text);
	box-shadow: 0 6px 20px rgba(255, 215, 0, 0.25);
}

.bible-portal-banner.theme-royal {
	background: linear-gradient(135deg, var(--bp-banner-royal-start) 0%, var(--bp-banner-royal-end) 100%);
	color: var(--bp-banner-royal-text);
	box-shadow: 0 6px 20px rgba(106, 27, 154, 0.3);
}

.bible-portal-banner.theme-sacrifice {
	background: linear-gradient(135deg, var(--bp-banner-sacrifice-start) 0%, var(--bp-banner-sacrifice-end) 100%);
	color: var(--bp-banner-sacrifice-text);
	box-shadow: 0 6px 20px rgba(139, 0, 0, 0.25);
}

.bible-portal-banner.theme-ocean {
	background: linear-gradient(135deg, var(--bp-banner-ocean-start) 0%, var(--bp-banner-ocean-end) 100%);
	color: var(--bp-banner-ocean-text);
	box-shadow: 0 6px 20px rgba(21, 101, 192, 0.25);
}

.bible-portal-banner.theme-custom {
	/* Custom theme uses inline style for background */
}

/* Theme-specific streak colors (readable on each background) */
.bible-portal-banner.theme-parchment .session-streak {
	color: #8b4513; /* Brown - readable on parchment */
}

.bible-portal-banner.theme-holy-light .session-streak {
	color: #b8860b; /* Dark gold - readable on light gold */
}

.bible-portal-banner.theme-royal .session-streak {
	color: #ffd700; /* Gold - pops on purple */
}

.bible-portal-banner.theme-sacrifice .session-streak {
	color: #ffd700; /* Gold - contrasts with crimson */
}

.bible-portal-banner.theme-ocean .session-streak {
	color: #ffd700; /* Gold - bright on blue */
}

.bible-portal-title {
	margin: 0;
	font-size: 2.5em;
	font-weight: 700;
	text-align: center;
}

/* Verse of the Day */
.verse-of-the-day {
	margin-top: 20px;
	padding: 15px 20px;
	background: rgba(255, 255, 255, 0.15);
	border-radius: 6px;
	border-left: 4px solid rgba(255, 255, 255, 0.5);
	backdrop-filter: blur(10px);
}

.votd-label {
	font-weight: 600;
	font-size: 0.9em;
	opacity: 0.9;
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.votd-text {
	font-size: 1em;
	font-style: italic;
	opacity: 0.95;
	line-height: 1.6;
	white-space: normal;
	word-wrap: break-word;
	overflow-wrap: break-word;
}

/* Study Session Stats */
.study-session-stats {
	margin-top: 12px;
	padding: 10px 16px;
	background: rgba(255, 255, 255, 0.1);
	border-radius: var(--bp-radius-md);
	display: flex;
	flex-direction: column;
	gap: 8px;
	backdrop-filter: blur(10px);
}

.session-streak {
	display: flex;
	align-items: center;
	gap: 6px;
	font-weight: 600;
	font-size: var(--bp-text-sm);
	color: var(--bp-holy);
}

.session-streak .session-stat-icon {
	color: #ff6b35;
	animation: flame-flicker 1.5s ease-in-out infinite;
}

@keyframes flame-flicker {
	0%, 100% { opacity: 1; transform: scale(1); }
	50% { opacity: 0.8; transform: scale(1.1); }
}

.session-stats-row {
	display: flex;
	gap: 16px;
	flex-wrap: wrap;
}

.session-stat {
	display: flex;
	align-items: center;
	gap: 4px;
	font-size: var(--bp-text-sm);
	opacity: 0.9;
}

.session-stat-icon {
	width: 14px;
	height: 14px;
	opacity: 0.8;
}

.session-stat-text {
	font-variant-numeric: tabular-nums;
}

/* Clickable session stat */
.session-stat-clickable {
	cursor: pointer;
	padding: 2px 6px;
	border-radius: var(--bp-radius-sm);
	transition: background 0.2s ease, transform 0.1s ease;
}

.session-stat-clickable:hover {
	background: rgba(255, 255, 255, 0.2);
	transform: scale(1.05);
}

.session-stat-clickable:active {
	transform: scale(0.98);
}

/* Session Details Popup */
.session-details-overlay {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: rgba(0, 0, 0, 0.6);
	backdrop-filter: blur(4px);
	z-index: 9999;
	display: flex;
	align-items: center;
	justify-content: center;
	animation: fadeIn 0.2s ease;
}

.session-details-popup {
	background: var(--bp-bg-elevated);
	border: 1px solid var(--bp-border);
	border-radius: var(--bp-radius-lg);
	box-shadow: var(--bp-shadow-xl);
	max-width: 500px;
	width: 90%;
	max-height: 80vh;
	overflow-y: auto;
	animation: slideUp 0.3s ease;
}

@keyframes slideUp {
	from {
		opacity: 0;
		transform: translateY(20px) scale(0.95);
	}
	to {
		opacity: 1;
		transform: translateY(0) scale(1);
	}
}

.session-details-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 16px 20px;
	border-bottom: 1px solid var(--background-modifier-border);
	position: sticky;
	top: 0;
	background: var(--background-primary);
	z-index: 1;
}

.session-details-header h3 {
	margin: 0;
	font-size: 1.2em;
}

.session-details-close {
	background: none;
	border: none;
	font-size: 1.5em;
	cursor: pointer;
	color: var(--text-muted);
	padding: 0 8px;
	border-radius: var(--bp-radius-sm);
	transition: color 0.2s, background 0.2s;
}

.session-details-close:hover {
	color: var(--text-normal);
	background: var(--background-modifier-hover);
}

.session-details-summary {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
	gap: 12px;
	padding: 16px 20px;
	background: var(--background-secondary);
	border-bottom: 1px solid var(--background-modifier-border);
}

.session-detail-stat {
	display: flex;
	flex-direction: column;
	align-items: center;
	text-align: center;
	padding: 8px;
	border-radius: var(--bp-radius-md);
	background: var(--background-primary);
}

.session-detail-icon {
	font-size: 1.4em;
	margin-bottom: 4px;
}

.session-detail-label {
	font-size: 0.75em;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.session-detail-value {
	font-size: 1.1em;
	font-weight: 600;
	color: var(--text-normal);
}

.session-details-section {
	padding: 16px 20px;
}

.session-details-section h4 {
	margin: 0 0 12px 0;
	font-size: 1em;
	color: var(--text-muted);
}

.session-books-list {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.session-book-item {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 10px 12px;
	background: var(--background-secondary);
	border-radius: var(--bp-radius-md);
	transition: background 0.2s;
}

.session-book-item:hover {
	background: var(--background-modifier-hover);
}

.session-book-name {
	font-weight: 500;
	cursor: pointer;
	color: var(--text-accent);
	transition: color 0.2s;
}

.session-book-name:hover {
	color: var(--interactive-accent);
	text-decoration: underline;
}

.session-chapter-list {
	font-size: 0.85em;
	color: var(--text-muted);
}

.session-details-empty {
	padding: 24px 20px;
	text-align: center;
	color: var(--text-muted);
}

.session-details-empty p {
	margin: 8px 0;
}

/* Today's Reading Plan Widget */
.todays-reading {
	margin-top: 12px;
	padding: 12px 16px;
	background: rgba(255, 255, 255, 0.12);
	border-radius: var(--bp-radius-md);
	backdrop-filter: blur(10px);
	border-left: 3px solid var(--bp-holy);
}

.reading-plan-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: 12px;
	margin-bottom: 10px;
}

.reading-plan-title {
	display: flex;
	align-items: center;
	gap: 6px;
	font-weight: 600;
	font-size: var(--bp-text-sm);
}

.reading-plan-icon {
	width: 16px;
	height: 16px;
	opacity: 0.9;
}

.reading-plan-progress-bar {
	flex: 1;
	max-width: 120px;
	height: 6px;
	background: rgba(255, 255, 255, 0.2);
	border-radius: var(--bp-radius-full);
	overflow: hidden;
}

.reading-plan-progress-fill {
	height: 100%;
	background: linear-gradient(90deg, var(--bp-holy), var(--interactive-accent));
	border-radius: var(--bp-radius-full);
	transition: width 0.3s ease;
}

.reading-plan-passages {
	display: flex;
	flex-wrap: wrap;
	gap: 8px;
	margin-bottom: 10px;
}

.reading-plan-passage {
	display: inline-block;
	padding: 4px 10px;
	background: rgba(255, 255, 255, 0.15);
	border-radius: var(--bp-radius-md);
	font-size: var(--bp-text-sm);
	cursor: pointer;
	transition: all 0.2s ease;
}

.reading-plan-passage:hover {
	background: rgba(255, 255, 255, 0.25);
	transform: translateY(-1px);
}

.reading-plan-actions {
	display: flex;
	justify-content: flex-end;
}

.reading-mark-complete-btn {
	display: flex;
	align-items: center;
	gap: 4px;
	padding: 6px 12px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: var(--bp-radius-md);
	font-size: var(--bp-text-sm);
	font-weight: 500;
	cursor: pointer;
	transition: all 0.2s ease;
}

.reading-mark-complete-btn:hover {
	filter: brightness(1.1);
	transform: translateY(-1px);
}

.reading-mark-complete-btn .btn-icon {
	width: 14px;
	height: 14px;
}

.reading-complete-badge {
	display: flex;
	align-items: center;
	gap: 4px;
	padding: 4px 10px;
	background: rgba(34, 197, 94, 0.2);
	color: #22c55e;
	border-radius: var(--bp-radius-md);
	font-size: var(--bp-text-sm);
	font-weight: 500;
}

.reading-complete-icon {
	width: 14px;
	height: 14px;
}

/* Reading Plan Quick Link (in banner) */
.reading-plan-quick-link {
	display: flex;
	align-items: center;
	gap: 8px;
	margin-top: 10px;
	padding: 8px 14px;
	background: rgba(255, 255, 255, 0.1);
	border-radius: var(--bp-radius-md);
	cursor: pointer;
	transition: all 0.2s ease;
}

.reading-plan-quick-link:hover {
	background: rgba(255, 255, 255, 0.2);
	transform: translateY(-1px);
}

.reading-plan-quick-link .quick-link-icon {
	width: 18px;
	height: 18px;
	opacity: 0.9;
}

.reading-plan-quick-link .quick-link-text {
	font-size: var(--bp-text-sm);
	font-weight: 500;
}

.reading-plan-quick-link .quick-link-text .completed {
	color: #22c55e;
}

.reading-plan-quick-link .quick-link-text .passage-preview {
	opacity: 0.8;
	font-weight: 400;
}

.reading-plan-quick-link .mini-progress {
	flex: 1;
	max-width: 60px;
	height: 4px;
	background: rgba(255, 255, 255, 0.15);
	border-radius: var(--bp-radius-full);
	overflow: hidden;
}

.reading-plan-quick-link .mini-progress-fill {
	height: 100%;
	background: var(--bp-holy);
	border-radius: var(--bp-radius-full);
}

/* Reading Plan View Mode */
.reading-plan-view-header {
	margin-bottom: 24px;
}

.reading-plan-view-header h2 {
	margin: 0;
	font-size: 1.8em;
}

.reading-plan-selector-section {
	margin-bottom: 24px;
}

.reading-plan-intro {
	color: var(--text-muted);
	margin-bottom: 20px;
}

.reading-plans-grid {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
	gap: 16px;
}

.reading-plan-card {
	padding: 20px;
	background: var(--background-secondary);
	border-radius: var(--bp-radius-lg);
	border: 1px solid var(--background-modifier-border);
	transition: all 0.2s ease;
}

.reading-plan-card:hover {
	border-color: var(--interactive-accent);
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.reading-plan-card .plan-card-icon {
	width: 40px;
	height: 40px;
	margin-bottom: 12px;
	color: var(--interactive-accent);
}

.reading-plan-card h4 {
	margin: 0 0 8px 0;
	font-size: 1.2em;
}

.reading-plan-card .plan-card-desc {
	color: var(--text-muted);
	font-size: 0.9em;
	margin: 0 0 12px 0;
	line-height: 1.5;
}

.reading-plan-card .plan-card-duration {
	display: inline-block;
	padding: 4px 10px;
	background: var(--background-modifier-border);
	border-radius: var(--bp-radius-full);
	font-size: 0.8em;
	color: var(--text-muted);
	margin-bottom: 12px;
}

.reading-plan-card .plan-start-btn {
	width: 100%;
	padding: 10px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: var(--bp-radius-md);
	font-weight: 600;
	cursor: pointer;
	transition: all 0.2s ease;
}

.reading-plan-card .plan-start-btn:hover {
	filter: brightness(1.1);
}

/* Active plan card styling */
.reading-plan-card.active {
	border-color: var(--interactive-accent);
	background: linear-gradient(135deg, var(--background-secondary), rgba(var(--interactive-accent-rgb, 72, 123, 180), 0.08));
}

/* Plan toggle row */
.plan-toggle-row {
	display: flex;
	justify-content: flex-end;
	margin-bottom: 8px;
}

.plan-toggle-label {
	position: relative;
	display: inline-block;
	width: 44px;
	height: 24px;
	cursor: pointer;
}

.plan-toggle-label input {
	opacity: 0;
	width: 0;
	height: 0;
}

.plan-toggle-slider {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background-color: var(--background-modifier-border);
	border-radius: 24px;
	transition: all 0.3s ease;
}

.plan-toggle-slider::before {
	position: absolute;
	content: "";
	height: 18px;
	width: 18px;
	left: 3px;
	bottom: 3px;
	background-color: var(--background-primary);
	border-radius: 50%;
	transition: all 0.3s ease;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.plan-toggle-label input:checked + .plan-toggle-slider {
	background-color: var(--interactive-accent);
}

.plan-toggle-label input:checked + .plan-toggle-slider::before {
	transform: translateX(20px);
}

/* Plan card progress bar (inline) */
.plan-card-progress {
	display: flex;
	align-items: center;
	gap: 8px;
	margin-top: 12px;
	padding-top: 12px;
	border-top: 1px solid var(--background-modifier-border);
}

.plan-card-progress-bar {
	flex: 1;
	height: 6px;
	background: var(--background-modifier-border);
	border-radius: 3px;
	overflow: hidden;
}

.plan-card-progress-fill {
	height: 100%;
	background: var(--interactive-accent);
	border-radius: 3px;
	transition: width 0.3s ease;
}

.plan-card-progress-text {
	font-size: 0.8em;
	color: var(--text-muted);
	min-width: 36px;
	text-align: right;
}

/* Reading plan subtitle */
.reading-plan-subtitle {
	margin: 4px 0 0 0;
	color: var(--text-muted);
	font-size: 0.9em;
}

/* Schedule mode note */
.schedule-mode-note {
	margin: 4px 0 12px 0;
	font-size: 0.85em;
}

/* Today's plan header (for multiple plans) */
.today-plan-header {
	display: flex;
	align-items: center;
	gap: 8px;
	margin-bottom: 12px;
	padding-bottom: 8px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.today-plan-icon {
	color: var(--interactive-accent);
}

.today-plan-name {
	font-weight: 600;
	flex: 1;
}

.today-plan-day {
	font-size: 0.85em;
	color: var(--text-muted);
}

/* Plan progress card (for multiple plans progress overview) */
.plan-progress-card {
	padding: 16px;
	background: var(--background-secondary);
	border-radius: var(--bp-radius-lg);
	border: 1px solid var(--background-modifier-border);
	margin-bottom: 12px;
}

.plan-progress-header {
	display: flex;
	align-items: center;
	gap: 8px;
	margin-bottom: 12px;
}

.plan-progress-icon {
	color: var(--interactive-accent);
}

.plan-progress-name {
	font-weight: 600;
	font-size: 1.1em;
}

.plan-progress-stats {
	display: flex;
	flex-wrap: wrap;
	gap: 12px;
	margin-top: 12px;
	padding-top: 12px;
	border-top: 1px solid var(--background-modifier-border);
}

.plan-progress-stats .stat-item {
	font-size: 0.85em;
	color: var(--text-muted);
	padding: 4px 8px;
	background: var(--background-primary);
	border-radius: var(--bp-radius-sm);
}

/* Partial complete indicator */
.partial-complete {
	color: var(--interactive-accent);
	font-weight: 600;
}

/* Settings: Reading plans list */
.reading-plans-settings {
	margin: 12px 0;
	padding: 12px;
	background: var(--background-secondary);
	border-radius: var(--bp-radius-md);
}

.reading-plans-settings .setting-item {
	border-bottom: 1px solid var(--background-modifier-border);
	padding-bottom: 12px;
}

.reading-plans-settings .setting-item:last-child {
	border-bottom: none;
	padding-bottom: 0;
}

/* Settings: Today's readings */
.today-readings-settings {
	margin: 16px 0;
	padding: 12px 16px;
	background: var(--background-secondary);
	border-radius: var(--bp-radius-md);
	border-left: 3px solid var(--interactive-accent);
}

.today-readings-settings h4 {
	margin: 0 0 12px 0;
	font-size: 0.95em;
	color: var(--text-muted);
}

/* Active Plan Header */
.active-plan-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 16px 20px;
	background: linear-gradient(135deg, var(--background-secondary), rgba(var(--interactive-accent-rgb, 72, 123, 180), 0.1));
	border-radius: var(--bp-radius-lg);
	border-left: 4px solid var(--interactive-accent);
}

.active-plan-info {
	display: flex;
	align-items: center;
	gap: 12px;
}

.active-plan-icon {
	width: 40px;
	height: 40px;
	color: var(--interactive-accent);
}

.active-plan-text h3 {
	margin: 0;
	font-size: 1.2em;
}

.active-plan-text p {
	margin: 4px 0 0 0;
	color: var(--text-muted);
	font-size: 0.9em;
}

.change-plan-btn {
	padding: 8px 16px;
	background: transparent;
	border: 1px solid var(--background-modifier-border);
	border-radius: var(--bp-radius-md);
	color: var(--text-muted);
	cursor: pointer;
	transition: all 0.2s ease;
}

.change-plan-btn:hover {
	border-color: var(--text-muted);
	color: var(--text-normal);
}

/* Progress Section */
.reading-plan-progress-section {
	margin-bottom: 24px;
}

.reading-plan-progress-section h3 {
	margin: 0 0 16px 0;
}

.progress-bar-large-container {
	display: flex;
	align-items: center;
	gap: 12px;
	margin-bottom: 20px;
}

.progress-bar-large {
	flex: 1;
	height: 12px;
	background: var(--background-modifier-border);
	border-radius: var(--bp-radius-full);
	overflow: hidden;
}

.progress-bar-large .progress-bar-fill {
	height: 100%;
	background: linear-gradient(90deg, var(--interactive-accent), var(--bp-holy));
	border-radius: var(--bp-radius-full);
	transition: width 0.5s ease;
}

.progress-percentage {
	font-weight: 700;
	font-size: 1.2em;
	color: var(--interactive-accent);
}

.reading-plan-stats-grid {
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	gap: 16px;
}

.plan-stat-card {
	display: flex;
	flex-direction: column;
	align-items: center;
	padding: 16px;
	background: var(--background-secondary);
	border-radius: var(--bp-radius-md);
	text-align: center;
}

.plan-stat-icon {
	width: 24px;
	height: 24px;
	margin-bottom: 8px;
	color: var(--interactive-accent);
}

.plan-stat-value {
	font-size: 1.2em;
	font-weight: 700;
}

.plan-stat-label {
	font-size: 0.8em;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

/* Today's Reading Section */
.reading-plan-today-section {
	margin-bottom: 24px;
}

.reading-plan-today-section h3 {
	margin: 0 0 16px 0;
}

.today-reading-card {
	padding: 20px;
	background: var(--background-secondary);
	border-radius: var(--bp-radius-lg);
	border: 2px solid transparent;
}

.today-reading-card.completed {
	border-color: #22c55e;
	background: linear-gradient(135deg, var(--background-secondary), rgba(34, 197, 94, 0.05));
}

.today-completed-badge {
	display: flex;
	align-items: center;
	gap: 8px;
	margin-bottom: 16px;
	color: #22c55e;
	font-weight: 600;
}

.today-completed-badge svg {
	width: 20px;
	height: 20px;
}

.today-passages {
	display: flex;
	flex-wrap: wrap;
	gap: 10px;
	margin-bottom: 16px;
}

.today-passage-btn {
	padding: 10px 16px;
	background: var(--background-modifier-border);
	border: none;
	border-radius: var(--bp-radius-md);
	font-weight: 500;
	cursor: pointer;
	transition: all 0.2s ease;
}

.today-passage-btn:hover {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
}

.mark-complete-btn {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 12px 24px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: var(--bp-radius-md);
	font-weight: 600;
	cursor: pointer;
	transition: all 0.2s ease;
}

.mark-complete-btn:hover {
	filter: brightness(1.1);
	transform: translateY(-2px);
}

.mark-complete-btn .btn-icon {
	width: 18px;
	height: 18px;
}

/* Recent Readings Section */
.reading-plan-recent-section h3 {
	margin: 0 0 16px 0;
}

.recent-readings-list {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.recent-day-item {
	display: flex;
	align-items: center;
	gap: 12px;
	padding: 12px 16px;
	background: var(--background-secondary);
	border-radius: var(--bp-radius-md);
	cursor: pointer;
	transition: all 0.2s ease;
}

.recent-day-item:hover {
	background: var(--background-modifier-hover);
}

.recent-day-item.today {
	border: 2px solid var(--interactive-accent);
}

.recent-day-item.completed .day-number {
	background: #22c55e;
	color: white;
}

.recent-day-item .day-number {
	width: 32px;
	height: 32px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: var(--background-modifier-border);
	border-radius: 50%;
	font-weight: 600;
	font-size: 0.9em;
}

.recent-day-item .day-number svg {
	width: 16px;
	height: 16px;
}

.recent-day-item .day-passages {
	flex: 1;
}

.recent-day-item .day-passages-text {
	font-size: 0.9em;
	color: var(--text-muted);
}

.recent-day-item .today-badge {
	padding: 2px 8px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-radius: var(--bp-radius-full);
	font-size: 0.75em;
	font-weight: 600;
	text-transform: uppercase;
}

/* Navigation controls - sticky to scroll with content */
.bible-portal-nav {
	display: flex;
	gap: 12px;
	align-items: center;
	flex-wrap: wrap;
	background: var(--bp-bg-primary);
	padding: 10px 0;
	z-index: 100;
}

/* Primary nav - always visible */
.bible-portal-nav-primary {
	position: sticky;
	top: 0;
	border-bottom: 1px solid var(--bp-border);
	margin-bottom: 0;
	gap: 10px;
	background: var(--bp-bg-primary);
	box-shadow: var(--bp-shadow);
}

/* Secondary nav - collapsible */
.bible-portal-nav-secondary {
	border-bottom: 1px solid var(--bp-border);
	margin-bottom: 20px;
	padding: 8px 12px;
	background: var(--bp-bg-secondary);
	border-radius: 6px;
	transition: all 0.2s ease;
	overflow: hidden;
	max-height: 60px;
	opacity: 1;
}

.bible-portal-nav-secondary.collapsed {
	max-height: 0;
	padding-top: 0;
	padding-bottom: 0;
	margin-bottom: 10px;
	opacity: 0;
	border: none;
}

/* Spacer to push toggle button to the right */
.nav-spacer {
	flex: 1;
}

/* Toggle button for secondary nav */
.bible-toggle-secondary-btn {
	background: var(--bp-bg-secondary);
	border: 1px solid var(--bp-border);
	border-radius: 6px;
	padding: 6px 10px;
	cursor: pointer;
	color: var(--bp-text-muted);
	transition: all 0.2s ease;
	display: flex;
	align-items: center;
	justify-content: center;
}

.bible-toggle-secondary-btn:hover {
	background: var(--bp-interactive);
	color: var(--bp-bg-elevated);
	border-color: var(--bp-interactive);
}

.bible-toggle-secondary-btn svg {
	width: 16px;
	height: 16px;
}

/* Nav bar checkboxes */
.nav-checkbox-group {
	display: flex;
	gap: 15px;
	align-items: center;
	margin-left: auto;
}

.nav-checkbox {
	display: flex;
	align-items: center;
	gap: 8px;
	cursor: pointer;
	user-select: none;
}

.nav-checkbox input[type="checkbox"] {
	cursor: pointer;
}

.nav-checkbox label {
	cursor: pointer;
	font-size: 14px;
	color: var(--bp-text-primary);
}

/* Annotation Layer Selector in Nav */
.nav-layer-group {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 0 8px;
	border-left: 1px solid var(--bp-border);
	margin-left: 8px;
}

.nav-layer-group .layer-icon {
	display: flex;
	align-items: center;
	color: var(--bp-text-muted);
}

.nav-layer-group .layer-icon svg {
	width: 16px;
	height: 16px;
}

.layer-select {
	padding: 6px 10px;
	border-radius: 4px;
	border: 1px solid var(--bp-border);
	background: var(--bp-bg-elevated);
	color: var(--bp-text-primary);
	font-size: 13px;
	cursor: pointer;
	min-width: 100px;
}

.layer-toggles {
	display: flex;
	gap: 4px;
}

.layer-toggle {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 28px;
	height: 28px;
	border-radius: 4px;
	border: 2px solid var(--layer-color, #888);
	background: transparent;
	cursor: pointer;
	transition: all 0.15s ease;
	padding: 0;
}

.layer-toggle .toggle-icon {
	display: flex;
	align-items: center;
	justify-content: center;
}

.layer-toggle .toggle-icon svg {
	width: 14px;
	height: 14px;
}

.layer-toggle.visible {
	background: var(--layer-color, #888);
	color: white;
}

.layer-toggle.visible .toggle-icon svg {
	stroke: white;
}

.layer-toggle.hidden {
	background: transparent;
	color: var(--bp-text-muted);
	opacity: 0.6;
}

.layer-toggle:hover {
	transform: scale(1.1);
	opacity: 1;
}

.bible-book-select,
.bible-chapter-select {
	padding: 10px 12px;
	border-radius: 4px;
	border: 1px solid var(--bp-border);
	background: var(--bp-bg-elevated);
	color: var(--bp-text-primary);
	font-size: 14px;
	cursor: pointer;
	height: 40px;
	line-height: 1.5;
}

.bible-book-select {
	flex: 1;
	min-width: 150px;
}

.bible-chapter-select {
	min-width: 120px;
}

.bible-nav-btn {
	padding: 8px 16px;
	border-radius: 4px;
	border: 1px solid var(--bp-border);
	background: var(--bp-interactive);
	color: var(--bp-bg-elevated);
	font-size: 14px;
	cursor: pointer;
	transition: background 0.2s;
}

.bible-nav-btn:hover {
	background: var(--bp-interactive-hover);
}

/* Navigation history buttons */
.bible-history-btn {
	padding: 6px 12px;
	border-radius: 4px;
	border: 1px solid var(--bp-border);
	background: var(--bp-interactive);
	color: var(--bp-bg-elevated);
	font-size: 14px;
	cursor: pointer;
	transition: background 0.2s;
	margin-right: 4px;
}

.bible-history-btn:hover:not(:disabled) {
	background: var(--bp-interactive-hover);
}

.bible-history-btn:disabled {
	opacity: 0.4;
	cursor: not-allowed;
}

.nav-separator {
	color: var(--text-muted);
	margin: 0 8px;
	font-size: 14px;
}

.strongs-nav-buttons {
	display: flex;
	gap: 6px;
	margin-bottom: 12px;
	padding-bottom: 12px;
	border-bottom: 1px solid var(--background-modifier-border);
}

/* Chapter viewer */
.bible-chapter-viewer {
	background: var(--bp-bg-elevated);
	padding: 20px;
	border-radius: 12px;
	line-height: 1.8;
	/* Card elevation */
	border: 1px solid var(--bp-border);
	box-shadow: var(--bp-shadow);
	transition: box-shadow 0.2s ease;
}

.bible-chapter-viewer:hover {
	box-shadow: var(--bp-shadow-lg);
}

.bible-chapter-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 20px;
	border-bottom: 2px solid var(--bp-border);
	padding-bottom: 10px;
	padding-top: 10px;
	flex-wrap: wrap;
	gap: 12px;
	position: sticky;
	top: 0;
	background: var(--bp-bg-elevated);
	z-index: 90;
	/* Sticky shadow transition */
	transition: box-shadow 0.2s ease, border-color 0.2s ease;
}

/* Shadow when scrolled */
.bible-chapter-header.is-scrolled {
	box-shadow: var(--bp-shadow-md);
	border-bottom-color: transparent;
}

.bible-chapter-heading {
	margin: 0;
	font-size: var(--bp-text-3xl);
	font-weight: 600;
	letter-spacing: -0.01em;
	color: var(--bp-text-primary);
}

/* Scrollable verses container - only verses scroll, headers stay fixed */
.bible-verses-scrollable {
	overflow-y: auto;
	max-height: calc(100vh - 400px); /* Adjust based on header heights */
	padding-right: 8px; /* Space for scrollbar */
}

.chapter-note-buttons {
	display: flex;
	gap: 8px;
	align-items: center;
	margin-left: auto;
}

.chapter-bulk-actions {
	display: flex;
	gap: 8px;
	align-items: center;
}

.bulk-action-btn {
	padding: 6px 12px;
	border-radius: 4px;
	border: 1px solid var(--bp-border);
	background: var(--bp-bg-secondary);
	color: var(--bp-text-primary);
	font-size: 13px;
	cursor: pointer;
	transition: all 0.2s;
}

.bulk-action-btn:hover {
	background: var(--bp-interactive);
	color: var(--bp-bg-elevated);
	border-color: var(--bp-interactive);
}

.highlight-filter-select {
	padding: 12px 16px;
	border-radius: var(--bp-radius-md);
	border: 1px solid var(--bp-border);
	background: var(--background-primary);
	color: var(--bp-text-primary);
	font-size: 14px;
	font-weight: 500;
	cursor: pointer;
	min-width: 150px;
	min-height: 48px;
	transition: all 0.15s ease;
}

.highlight-filter-select:hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
}

.highlight-filter-select:focus {
	outline: none;
	border-color: var(--interactive-accent);
	box-shadow: 0 0 0 2px var(--interactive-accent-hover);
}

/* Section headings */
.bible-section-heading {
	margin-top: 30px;
	margin-bottom: 15px;
}

.section-heading-text {
	color: var(--bp-accent);
	font-size: 1.1em;
	font-weight: 600;
	font-style: italic;
	margin: 0;
}

/* Verses */
.bible-verse {
	margin-bottom: 12px;
	display: flex;
	gap: 10px;
	align-items: flex-start;
	animation: fadeIn 0.3s ease-in;
	transition: background 0.2s ease, border 0.2s ease;
	padding: 6px 8px;
	border-radius: 6px;
	border: 2px solid transparent;
}

/* Verse selection highlighting */
.verse-selected {
	background: rgba(var(--interactive-accent-rgb), 0.15);
	border: 2px solid var(--bp-accent, var(--interactive-accent));
	border-radius: 6px;
	/* Enhanced glow effect */
	box-shadow:
		0 0 0 2px rgba(var(--interactive-accent-rgb), 0.1),
		0 0 12px rgba(var(--interactive-accent-rgb), 0.2);
	animation: verse-glow 0.3s ease-out;
}

/* Ensure text remains readable when selected */
.verse-selected .bible-verse-text {
	color: var(--text-normal);
}

@keyframes verse-glow {
	from {
		box-shadow:
			0 0 0 0px rgba(var(--interactive-accent-rgb), 0.4),
			0 0 0px rgba(var(--interactive-accent-rgb), 0),
			inset 0 1px 0 rgba(255, 255, 255, 0);
	}
	to {
		box-shadow:
			0 0 0 3px rgba(var(--interactive-accent-rgb), 0.15),
			0 0 20px rgba(var(--interactive-accent-rgb), 0.2),
			inset 0 1px 0 rgba(255, 255, 255, 0.1);
	}
}

.verse-selected .bible-verse-number {
	color: var(--interactive-accent);
	font-weight: 800;
}

/* Enhanced range selection styles */
.selection-start {
	position: relative;
	border-left: 3px solid var(--bp-accent, var(--interactive-accent)) !important;
	padding-left: 8px !important;
	border-top-left-radius: 4px !important;
	background: linear-gradient(90deg, rgba(var(--interactive-accent-rgb), 0.15) 0%, rgba(var(--interactive-accent-rgb), 0.05) 100%);
	transition: all var(--bp-transition-fast, 0.15s) ease;
}

.selection-middle {
	position: relative;
	background: rgba(var(--interactive-accent-rgb), 0.1);
	border-left: 3px solid var(--bp-accent, var(--interactive-accent)) !important;
	padding-left: 8px !important;
	transition: all var(--bp-transition-fast, 0.15s) ease;
}

.selection-end {
	position: relative;
	border-left: 3px solid var(--bp-accent, var(--interactive-accent)) !important;
	padding-left: 8px !important;
	border-bottom-left-radius: 4px !important;
	border-bottom: 2px solid var(--bp-accent, var(--interactive-accent)) !important;
	background: linear-gradient(90deg, rgba(var(--interactive-accent-rgb), 0.05) 0%, rgba(var(--interactive-accent-rgb), 0.15) 100%);
	transition: all var(--bp-transition-fast, 0.15s) ease;
}

/* When start and end are the same verse - single selection */
.selection-single,
.verse.selected {
	position: relative;
	background: rgba(var(--interactive-accent-rgb), 0.15);
	border-left: 3px solid var(--bp-accent, var(--interactive-accent)) !important;
	padding-left: 8px !important;
	border-radius: 4px !important;
	box-shadow: 0 0 0 1px rgba(var(--interactive-accent-rgb), 0.2);
	transition: all var(--bp-transition-fast, 0.15s) ease;
}

/* Selection glow effect */
.verse.selected::before,
.selection-start::before,
.selection-end::before {
	content: '';
	position: absolute;
	left: 0;
	top: 0;
	bottom: 0;
	width: 3px;
	background: var(--bp-accent, var(--interactive-accent));
	box-shadow: 0 0 8px var(--bp-accent, var(--interactive-accent));
	border-radius: 2px;
	pointer-events: none;
}

/* Floating selection badge */
.selection-badge {
	position: fixed;
	bottom: 80px;
	right: 20px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	padding: 8px 16px;
	border-radius: 20px;
	font-size: 0.9em;
	font-weight: 600;
	box-shadow: var(--bp-shadow-lg);
	z-index: 1000;
	animation: badgeSlideIn 0.2s ease-out;
	display: flex;
	align-items: center;
	gap: 8px;
}

.selection-badge svg {
	width: 16px;
	height: 16px;
}

@keyframes badgeSlideIn {
	from {
		opacity: 0;
		transform: translateY(10px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes fadeIn {
	from {
		opacity: 0;
		transform: translateY(5px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.bible-verse-number {
	font-weight: 700;
	color: var(--text-accent);
	min-width: 30px;
	font-size: 0.9em;
	flex-shrink: 0;
}

/* Verse Number Style Variations */

/* Default - inline with text */
.verse-num-default {
	/* Uses base styles above */
}

/* Superscript - small raised numbers */
.verse-num-superscript {
	font-size: 0.65em;
	vertical-align: super;
	min-width: auto;
	margin-right: 2px;
	font-weight: 600;
	opacity: 0.7;
}

/* Badge - pill-shaped badge */
.verse-num-badge {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	padding: 1px 6px;
	border-radius: var(--bp-radius-full);
	font-size: 0.7em;
	font-weight: 600;
	min-width: auto;
	margin-right: 8px;
}

/* Margin - positioned in left margin */
.bible-verse:has(.verse-num-margin) {
	position: relative;
	padding-left: 40px;
}

.verse-num-margin {
	position: absolute;
	left: 0;
	font-size: 0.75em;
	color: var(--text-muted);
	font-weight: 500;
	min-width: 30px;
	text-align: right;
	padding-right: 10px;
}

/* Subtle - dimmed, minimal presence */
.verse-num-subtle {
	font-size: 0.75em;
	color: var(--text-muted);
	font-weight: 400;
	opacity: 0.6;
	min-width: auto;
	margin-right: 4px;
}

.verse-num-subtle::before {
	content: '[';
}

.verse-num-subtle::after {
	content: ']';
}

.bible-verse-text {
	color: var(--text-normal);
	font-size: var(--bp-text-base);
	flex: 0 1 auto;
	line-height: 1.9;
	font-feature-settings: "liga" 1, "calt" 1;
	transition: background-color 0.3s ease, padding 0.2s ease;
}

/* Serif font mode for verse text */
.bible-portal-container.font-serif .bible-verse-text {
	font-family: Georgia, "Times New Roman", "Noto Serif", serif;
}

/* ==========================================
   HIGHLIGHT STYLES
   ========================================== */

/* Base highlight styles */
.bible-verse-text.highlight-solid,
.bible-verse-text.highlight-gradient,
.bible-verse-text.highlight-handdrawn {
	padding: 2px 6px;
	border-radius: 4px;
	display: inline;
	box-decoration-break: clone;
	-webkit-box-decoration-break: clone;
}

/* Solid highlight - simple uniform color */
.bible-verse-text.highlight-solid {
	background-color: var(--highlight-color);
}

/* Gradient highlight - fade effect */
.bible-verse-text.highlight-gradient {
	background: linear-gradient(to left, var(--highlight-color) 0%, var(--highlight-color) 60%, transparent 100%);
}

/* Hand-drawn highlight - natural marker look */
.bible-verse-text.highlight-handdrawn {
	position: relative;
	background: linear-gradient(
		104deg,
		transparent 0.5%,
		var(--highlight-color) 2.5%,
		var(--highlight-color) 92%,
		transparent 98%
	);
	background-size: 100% 85%;
	background-position: 0 65%;
	background-repeat: no-repeat;
	padding: 4px 8px 2px 6px;
	margin: -2px -4px;
	border-radius: 3px 8px 5px 6px;
	box-shadow:
		inset 0 -1px 0 rgba(0, 0, 0, 0.05),
		inset 0 2px 4px rgba(255, 255, 255, 0.1);
}

/* Variations for hand-drawn highlights - subtle differences */
.bible-verse-text.highlight-handdrawn[data-highlight-variation="0"] {
	background: linear-gradient(
		102deg,
		transparent 0.2%,
		var(--highlight-color) 2.8%,
		var(--highlight-color) 91%,
		transparent 97%
	);
	background-size: 100% 88%;
	background-position: 0 60%;
	border-radius: 4px 6px 7px 3px;
	transform: rotate(-0.2deg);
}

.bible-verse-text.highlight-handdrawn[data-highlight-variation="1"] {
	background: linear-gradient(
		106deg,
		transparent 0.8%,
		var(--highlight-color) 3%,
		var(--highlight-color) 93%,
		transparent 99%
	);
	background-size: 100% 82%;
	background-position: 0 70%;
	border-radius: 6px 4px 3px 7px;
	transform: rotate(0.15deg);
}

.bible-verse-text.highlight-handdrawn[data-highlight-variation="2"] {
	background: linear-gradient(
		103deg,
		transparent 0.4%,
		var(--highlight-color) 2.2%,
		var(--highlight-color) 90%,
		transparent 96%
	);
	background-size: 100% 86%;
	background-position: 0 63%;
	border-radius: 5px 7px 4px 5px;
	transform: rotate(-0.1deg);
}

.bible-verse-text.highlight-handdrawn[data-highlight-variation="3"] {
	background: linear-gradient(
		105deg,
		transparent 0.6%,
		var(--highlight-color) 2.6%,
		var(--highlight-color) 94%,
		transparent 98%
	);
	background-size: 100% 84%;
	background-position: 0 68%;
	border-radius: 3px 5px 6px 4px;
	transform: rotate(0.25deg);
}

.bible-verse-text.highlight-handdrawn[data-highlight-variation="4"] {
	background: linear-gradient(
		101deg,
		transparent 0.3%,
		var(--highlight-color) 2.4%,
		var(--highlight-color) 89%,
		transparent 95%
	);
	background-size: 100% 90%;
	background-position: 0 58%;
	border-radius: 7px 3px 5px 6px;
	transform: rotate(-0.3deg);
}

/* Verse actions (indicators only, no button) */
.verse-actions {
	display: inline-flex;
	gap: 5px;
	align-items: center;
	margin-left: 6px;
}

.verse-indicator-icon {
	font-size: 0.9em;
	opacity: 0.7;
	transition: opacity 0.2s;
}

.verse-indicator-icon:hover {
	opacity: 1;
}

/* Custom verse menu */
.bible-verse-menu {
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
	min-width: 200px;
	overflow: hidden;
	animation: menuSlideIn 0.2s ease-out;
}

@keyframes menuSlideIn {
	from {
		opacity: 0;
		transform: translateY(-10px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.bible-menu-header {
	padding: 8px 12px;
	background: var(--background-secondary);
	font-weight: 600;
	font-size: 0.9em;
	color: var(--text-muted);
	border-bottom: 1px solid var(--background-modifier-border);
}

.bible-menu-subheader {
	padding: 6px 12px;
	font-weight: 600;
	font-size: 0.85em;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
	margin-top: 4px;
}

.bible-menu-item {
	padding: 8px 12px;
	cursor: pointer;
	transition: background 0.2s;
	font-size: 0.95em;
	color: var(--text-normal);
	position: relative;
}

.bible-menu-item:hover {
	background: var(--background-modifier-hover);
}

.bible-menu-submenu {
	position: relative;
}

.bible-submenu {
	position: absolute;
	left: 100%;
	top: 0;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
	min-width: 180px;
	z-index: 1001;
	margin-left: 4px;
}

.bible-submenu-hidden {
	display: none;
}

.bible-menu-item-danger {
	color: var(--text-muted);
}

.bible-menu-item-danger:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.bible-menu-separator {
	height: 1px;
	background: var(--background-modifier-border);
	margin: 4px 0;
}

/* Error message */
.bible-error {
	color: var(--text-error);
	font-style: italic;
	text-align: center;
	padding: 20px;
}

/* Mode selector bar */
.bible-mode-bar {
	display: flex;
	gap: 10px;
	align-items: center;
	margin-bottom: 15px;
	padding: 15px;
	background: var(--background-secondary);
	border-radius: 6px;
}

.mode-label {
	font-weight: 600;
	margin-right: 5px;
	color: var(--text-normal);
}

.mode-btn {
	padding: 8px 16px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	color: var(--text-normal);
	cursor: pointer;
	transition: all 0.2s;
	font-size: 13px;
}

.mode-btn:hover {
	background: var(--interactive-hover);
}

.mode-btn.active {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
	font-weight: 600;
}

/* Version selector bar */
.bible-version-bar {
	display: flex;
	gap: 12px;
	align-items: center;
	margin-bottom: 20px;
	padding: 12px;
	background: var(--background-secondary);
	border-radius: 6px;
	flex-wrap: wrap;
}

.version-label {
	font-weight: 600;
	color: var(--text-normal);
	font-size: 13px;
}

.bible-version-select {
	padding: 6px 10px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 13px;
	cursor: pointer;
	min-width: 80px;
}

.parallel-toggle {
	display: flex;
	align-items: center;
	gap: 6px;
	cursor: pointer;
	font-size: 13px;
	color: var(--text-normal);
}

.parallel-toggle input[type="checkbox"] {
	cursor: pointer;
}

/* Parallel viewing */
.bible-parallel-container {
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 20px;
	margin-top: 20px;
}

.bible-parallel-panel {
	background: var(--background-primary);
	padding: 20px;
	border-radius: 8px;
	line-height: 1.8;
	height: calc(100vh - 280px); /* Responsive height for internal scrolling */
	overflow-y: auto;
}

/* Sync scroll checkbox styling */
.sync-scroll-checkbox {
	margin-left: 8px;
}

/* Lookup controls */
.bible-lookup-controls {
	margin: 20px 0;
	padding: 20px;
	background: var(--background-secondary);
	border-radius: 6px;
}

.lookup-label {
	display: block;
	margin-bottom: 10px;
	font-weight: 600;
	color: var(--text-normal);
}

.lookup-input-container {
	display: flex;
	gap: 10px;
}

.lookup-input {
	flex: 1;
	padding: 10px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 14px;
}

.lookup-btn {
	padding: 10px 20px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	font-size: 14px;
	cursor: pointer;
	font-weight: 600;
	transition: background 0.2s;
}

.lookup-btn:hover {
	background: var(--interactive-accent-hover);
}

/* Verse display (for single verse lookup) */
.bible-verse-display {
	margin-top: 20px;
	padding: 30px;
	background: var(--background-primary);
	border-radius: 8px;
}

/* Layer Badge */
.layer-badge {
	display: inline-block;
	width: 10px;
	height: 10px;
	border-radius: 50%;
	margin-left: 8px;
	cursor: pointer;
	transition: all 0.15s ease;
	border: 2px solid rgba(255, 255, 255, 0.3);
	vertical-align: middle;
	position: relative;
	top: -1px;
}

.layer-badge:hover {
	transform: scale(1.4);
	border-color: rgba(255, 255, 255, 0.6);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

/* Layer Label */
.highlight-layer-label {
	display: inline-block;
	margin-left: 8px;
	padding: 2px 8px;
	background: var(--background-modifier-border);
	border-radius: 4px;
	font-size: 0.85em;
	color: var(--text-muted);
	font-weight: 500;
	vertical-align: middle;
}

/* Layer Dropdown */
.highlight-layer-dropdown,
.preview-layer-dropdown {
	margin-left: 8px;
	padding: 2px 6px;
	background: var(--background-modifier-form-field);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	font-size: 0.85em;
	color: var(--text-normal);
	cursor: pointer;
	vertical-align: middle;
	transition: all 0.15s ease;
}

.highlight-layer-dropdown:hover,
.preview-layer-dropdown:hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
}

.highlight-layer-dropdown:focus,
.preview-layer-dropdown:focus {
	outline: none;
	border-color: var(--interactive-accent);
	box-shadow: 0 0 0 2px var(--interactive-accent-hover);
}

/* Preview Layer Selector */
.preview-layer-selector {
	margin: 12px 0;
	padding: 8px 12px;
	background: var(--background-secondary);
	border-radius: 6px;
	display: flex;
	align-items: center;
}

.preview-layer-label {
	font-size: 0.9em;
	font-weight: 600;
	color: var(--text-muted);
	margin-right: 4px;
}

/* Bulk Selection Checkboxes */
.highlight-checkbox {
	margin-right: 12px;
	cursor: pointer;
	width: 16px;
	height: 16px;
	flex-shrink: 0;
}

.highlight-checkbox:hover {
	transform: scale(1.1);
}

/* Bulk Actions Bar */
.highlights-bulk-actions {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 8px 12px;
	background: var(--background-modifier-form-field);
	border-radius: 6px;
	margin-top: 8px;
}

.bulk-selection-count {
	font-size: 0.9em;
	font-weight: 600;
	color: var(--text-accent);
	margin-right: 8px;
}

.bulk-action-btn {
	padding: 4px 12px;
	background: var(--interactive-normal);
	color: var(--text-on-accent);
	border: none;
	border-radius: 4px;
	cursor: pointer;
	font-size: 0.85em;
	font-weight: 500;
	transition: all 0.15s ease;
}

.bulk-action-btn:hover {
	background: var(--interactive-hover);
	transform: translateY(-1px);
}

.bulk-action-btn.bulk-danger {
	background: var(--background-secondary);
}

.bulk-action-btn.bulk-danger:hover {
	background: var(--interactive-hover);
}

/* Layer menu items */
.bible-menu-item.layer-current {
	background: var(--background-modifier-hover);
	font-weight: 600;
}

.layer-checkmark {
	color: var(--interactive-accent);
	font-weight: bold;
}

.verse-reference {
	color: var(--text-accent);
	margin-bottom: 15px;
	font-size: 1.3em;
}

.verse-text-large {
	font-size: 1.3em;
	line-height: 1.8;
	color: var(--text-normal);
	margin-bottom: 30px;
}

/* Passage display */
.bible-passage-display {
	margin-top: 20px;
	padding: 20px;
	background: var(--background-primary);
	border-radius: 8px;
}

.passage-reference {
	color: var(--text-accent);
	margin-bottom: 20px;
	font-size: 1.4em;
	font-weight: 600;
}

.version-divider {
	margin: 30px 0;
	border: none;
	border-top: 2px solid var(--background-modifier-border);
}

/* Color swatch preview in settings */
.color-swatch {
	width: 24px;
	height: 24px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	margin-right: 8px;
	flex-shrink: 0;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Color picker input */
.color-picker-wrapper {
	display: inline-block;
	margin-left: 8px;
}

.color-picker-input {
	width: 40px;
	height: 32px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	cursor: pointer;
	padding: 2px;
}

.color-picker-input:hover {
	border-color: var(--interactive-accent);
}

/* Highlight statistics */
.highlight-stats {
	background: var(--background-secondary);
	border-radius: 6px;
	padding: 12px 16px;
	margin-bottom: 16px;
}

.highlight-stats-total {
	margin: 0 0 10px 0;
	font-weight: 600;
	color: var(--text-normal);
}

.highlight-stats-list {
	list-style: none;
	margin: 0;
	padding: 0;
	display: flex;
	flex-wrap: wrap;
	gap: 12px;
}

.highlight-stats-item {
	display: flex;
	align-items: center;
	gap: 6px;
	font-size: 13px;
	color: var(--text-muted);
}

.highlight-stats-dot {
	width: 12px;
	height: 12px;
	border-radius: 50%;
	border: 1px solid var(--background-modifier-border);
	flex-shrink: 0;
}

.highlight-stats-empty {
	margin: 0;
	color: var(--text-muted);
	font-style: italic;
}

/* Settings streak info */
.settings-streak-info {
	padding: 10px 16px;
	background: linear-gradient(135deg, rgba(255, 107, 53, 0.1), rgba(255, 215, 0, 0.1));
	border-radius: var(--bp-radius-md);
	border-left: 3px solid #ff6b35;
	margin-bottom: 16px;
}

.settings-streak-info .streak-display {
	margin: 0;
	font-size: var(--bp-text-base);
	font-weight: 600;
	color: var(--text-normal);
}

/* Settings reading plan info */
.reading-plan-info {
	padding: 12px 16px;
	background: var(--background-secondary);
	border-radius: var(--bp-radius-md);
	margin-bottom: 16px;
	border-left: 3px solid var(--bp-holy);
}

.reading-plan-info .plan-description {
	margin: 0 0 12px 0;
	color: var(--text-muted);
	font-size: var(--bp-text-sm);
}

.plan-progress-display {
	display: flex;
	align-items: center;
	gap: 12px;
	margin-bottom: 12px;
}

.settings-progress-bar {
	flex: 1;
	height: 8px;
	background: var(--background-modifier-border);
	border-radius: var(--bp-radius-full);
	overflow: hidden;
}

.settings-progress-fill {
	height: 100%;
	background: linear-gradient(90deg, var(--bp-holy), var(--interactive-accent));
	border-radius: var(--bp-radius-full);
	transition: width 0.3s ease;
}

.today-reading-info {
	padding: 8px 12px;
	background: rgba(var(--interactive-accent-rgb), 0.1);
	border-radius: var(--bp-radius-sm);
	font-size: var(--bp-text-sm);
}

.today-reading-info .completed-check {
	color: #22c55e;
	font-weight: bold;
}

/* Achievements View */
.achievements-header {
	margin-bottom: 24px;
}

.achievements-header h2 {
	margin-bottom: 12px;
}

.achievements-progress-summary {
	display: flex;
	align-items: center;
	gap: 16px;
	font-size: var(--bp-text-sm);
}

.achievements-progress-bar {
	flex: 1;
	max-width: 200px;
	height: 8px;
	background: var(--background-modifier-border);
	border-radius: var(--bp-radius-full);
	overflow: hidden;
}

.achievements-progress-fill {
	height: 100%;
	background: linear-gradient(90deg, #f59e0b, #22c55e);
	border-radius: var(--bp-radius-full);
	transition: width 0.3s ease;
}

.achievements-stats {
	margin-bottom: 24px;
	padding: 16px;
	background: var(--background-secondary);
	border-radius: var(--bp-radius-lg);
}

.achievements-stats h3 {
	margin-top: 0;
	margin-bottom: 12px;
}

.stats-grid {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
	gap: 16px;
}

.stat-item {
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 4px;
	padding: 12px;
	background: var(--background-primary);
	border-radius: var(--bp-radius-md);
}

.stat-icon {
	width: 24px;
	height: 24px;
	color: var(--interactive-accent);
}

.stat-value {
	font-size: var(--bp-text-xl);
	font-weight: 700;
	color: var(--text-normal);
}

.stat-label {
	font-size: var(--bp-text-xs);
	color: var(--text-muted);
	text-align: center;
}

.achievements-list {
	display: flex;
	flex-direction: column;
	gap: 24px;
}

.achievement-category h3 {
	margin-top: 0;
	margin-bottom: 12px;
	padding-bottom: 8px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.achievements-grid {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
	gap: 12px;
}

.achievement-card {
	position: relative;
	display: flex;
	align-items: center;
	gap: 12px;
	padding: 12px 16px;
	background: var(--background-secondary);
	border-radius: var(--bp-radius-md);
	border-left: 4px solid var(--rarity-color, #9ca3af);
	transition: all 0.2s ease;
}

.achievement-card.unlocked {
	background: linear-gradient(135deg, rgba(var(--rarity-color), 0.1), var(--background-secondary));
}

.achievement-card.locked {
	opacity: 0.6;
}

.achievement-card.locked .achievement-icon {
	color: var(--text-muted);
}

.achievement-icon {
	width: 36px;
	height: 36px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: rgba(var(--rarity-color), 0.1);
	border-radius: var(--bp-radius-md);
	color: var(--rarity-color);
}

.achievement-icon svg {
	width: 20px;
	height: 20px;
}

.achievement-info {
	flex: 1;
	display: flex;
	flex-direction: column;
	gap: 2px;
}

.achievement-name {
	font-weight: 600;
	font-size: var(--bp-text-sm);
	color: var(--text-normal);
}

.achievement-desc {
	font-size: var(--bp-text-xs);
	color: var(--text-muted);
}

.rarity-badge {
	position: absolute;
	top: 8px;
	right: 8px;
	padding: 2px 6px;
	font-size: 0.65rem;
	font-weight: 600;
	text-transform: uppercase;
	border-radius: var(--bp-radius-sm);
	background: rgba(255, 255, 255, 0.1);
}

.rarity-badge.rarity-common { color: #9ca3af; }
.rarity-badge.rarity-uncommon { color: #22c55e; }
.rarity-badge.rarity-rare { color: #3b82f6; }
.rarity-badge.rarity-epic { color: #a855f7; }
.rarity-badge.rarity-legendary { color: #f59e0b; }

.achievement-card.unlocked.rarity-legendary {
	animation: legendary-glow 3s ease-in-out infinite;
}

@keyframes legendary-glow {
	0%, 100% {
		box-shadow: 0 0 5px rgba(245, 158, 11, 0.3);
	}
	50% {
		box-shadow: 0 0 15px rgba(245, 158, 11, 0.5);
	}
}

/* Settings achievement info */
.achievement-settings-info {
	padding: 12px 16px;
	background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(34, 197, 94, 0.1));
	border-radius: var(--bp-radius-md);
	border-left: 3px solid #f59e0b;
	margin-bottom: 12px;
}

.achievement-progress-text {
	margin: 0;
	font-weight: 600;
}

.achievement-stats-summary {
	padding: 8px 16px;
	background: var(--background-secondary);
	border-radius: var(--bp-radius-md);
	margin-bottom: 12px;
}

.achievement-stats-summary p {
	margin: 4px 0;
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
}

/* Achievement Celebration Animation */
.achievement-celebration-overlay {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: rgba(0, 0, 0, 0.7);
	backdrop-filter: blur(8px);
	z-index: 99999;
	display: flex;
	align-items: center;
	justify-content: center;
	animation: celebration-fade-in 0.3s ease;
}

@keyframes celebration-fade-in {
	from { opacity: 0; }
	to { opacity: 1; }
}

.achievement-celebration-overlay.achievement-celebration-exit {
	animation: celebration-fade-out 0.5s ease forwards;
}

@keyframes celebration-fade-out {
	to { opacity: 0; }
}

/* Confetti */
.achievement-confetti {
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	overflow: hidden;
	pointer-events: none;
}

.confetti-piece {
	position: absolute;
	width: 10px;
	height: 10px;
	background: var(--color);
	left: var(--x);
	top: -20px;
	animation: confetti-fall 3s ease-out var(--delay) forwards;
	transform: rotate(0deg);
}

.confetti-piece:nth-child(odd) {
	width: 8px;
	height: 14px;
	border-radius: 50%;
}

.confetti-piece:nth-child(even) {
	border-radius: 2px;
}

@keyframes confetti-fall {
	0% {
		transform: translateY(0) rotate(0deg);
		opacity: 1;
	}
	100% {
		transform: translateY(100vh) rotate(720deg);
		opacity: 0;
	}
}

/* Celebration Card */
.achievement-celebration-card {
	background: var(--background-primary);
	border-radius: 16px;
	padding: 32px 40px;
	text-align: center;
	max-width: 400px;
	box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5);
	animation: card-entrance 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
	border: 2px solid var(--rarity-color);
}

@keyframes card-entrance {
	0% {
		opacity: 0;
		transform: scale(0.5) translateY(50px);
	}
	100% {
		opacity: 1;
		transform: scale(1) translateY(0);
	}
}

.achievement-celebration-header {
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 10px;
	margin-bottom: 24px;
}

.achievement-trophy {
	font-size: 2em;
	animation: trophy-bounce 0.6s ease-in-out infinite alternate;
}

@keyframes trophy-bounce {
	from { transform: translateY(0) rotate(-5deg); }
	to { transform: translateY(-8px) rotate(5deg); }
}

.achievement-title {
	font-size: 1.3em;
	font-weight: 700;
	background: linear-gradient(90deg, var(--rarity-color), #ffd700);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
}

.achievement-icon-container {
	margin-bottom: 20px;
}

.achievement-icon-large {
	width: 80px;
	height: 80px;
	margin: 0 auto;
	border-radius: 50%;
	background: linear-gradient(135deg, var(--rarity-color), rgba(255, 215, 0, 0.3));
	display: flex;
	align-items: center;
	justify-content: center;
	animation: icon-pulse 1s ease-in-out infinite;
	box-shadow: 0 0 30px var(--rarity-color);
}

.achievement-icon-large svg {
	width: 40px;
	height: 40px;
	color: white;
}

@keyframes icon-pulse {
	0%, 100% { box-shadow: 0 0 30px var(--rarity-color); }
	50% { box-shadow: 0 0 50px var(--rarity-color); }
}

.achievement-name-large {
	font-size: 1.5em;
	font-weight: 700;
	color: var(--text-normal);
	margin-bottom: 8px;
}

.achievement-desc-large {
	font-size: 1em;
	color: var(--text-muted);
	margin-bottom: 20px;
	line-height: 1.5;
}

.achievement-rarity-badge {
	display: inline-flex;
	align-items: center;
	gap: 6px;
	padding: 6px 16px;
	border-radius: 20px;
	font-size: 0.85em;
	font-weight: 700;
	letter-spacing: 1px;
	background: rgba(var(--rarity-color), 0.15);
	color: var(--rarity-color);
	border: 1px solid var(--rarity-color);
}

.achievement-rarity-badge.rarity-common {
	color: #9ca3af;
	border-color: #9ca3af;
	background: rgba(156, 163, 175, 0.15);
}

.achievement-rarity-badge.rarity-uncommon {
	color: #22c55e;
	border-color: #22c55e;
	background: rgba(34, 197, 94, 0.15);
}

.achievement-rarity-badge.rarity-rare {
	color: #3b82f6;
	border-color: #3b82f6;
	background: rgba(59, 130, 246, 0.15);
}

.achievement-rarity-badge.rarity-epic {
	color: #a855f7;
	border-color: #a855f7;
	background: rgba(168, 85, 247, 0.15);
}

.achievement-rarity-badge.rarity-legendary {
	color: #f59e0b;
	border-color: #f59e0b;
	background: rgba(245, 158, 11, 0.15);
	animation: legendary-badge-glow 2s ease-in-out infinite;
}

@keyframes legendary-badge-glow {
	0%, 100% { box-shadow: 0 0 10px rgba(245, 158, 11, 0.3); }
	50% { box-shadow: 0 0 25px rgba(245, 158, 11, 0.6); }
}

/* Rarity-specific card styling */
.achievement-celebration-card.rarity-legendary {
	animation: card-entrance 0.5s cubic-bezier(0.34, 1.56, 0.64, 1), legendary-card-glow 2s ease-in-out infinite;
	background: linear-gradient(135deg, var(--background-primary), rgba(245, 158, 11, 0.05));
}

@keyframes legendary-card-glow {
	0%, 100% { box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5), 0 0 30px rgba(245, 158, 11, 0.3); }
	50% { box-shadow: 0 25px 80px rgba(0, 0, 0, 0.5), 0 0 50px rgba(245, 158, 11, 0.5); }
}

/* Toast notifications */
.bible-toast {
	position: fixed;
	bottom: 20px;
	left: 50%;
	transform: translateX(-50%) translateY(100px);
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	padding: 12px 24px;
	border-radius: 8px;
	font-size: 14px;
	font-weight: 500;
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
	z-index: 10000;
	opacity: 0;
	transition: all 0.3s ease;
}

.bible-toast-show {
	opacity: 1;
	transform: translateX(-50%) translateY(0);
}

.bible-toast-success {
	background: var(--interactive-accent);
}

.bible-toast-error {
	background: #dc2626;
}

.bible-toast-warning {
	background: #d97706;
}

/* Note preview popup */
.note-preview-popup {
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	padding: 12px;
	max-width: 300px;
	font-size: 13px;
	line-height: 1.5;
	color: var(--text-normal);
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
	white-space: pre-wrap;
	word-wrap: break-word;
	animation: fadeInScale 0.2s ease-out;
}

@keyframes fadeInScale {
	from {
		opacity: 0;
		transform: scale(0.95);
	}
	to {
		opacity: 1;
		transform: scale(1);
	}
}

/* Cross-reference popup */
.cross-ref-popup {
	background: var(--bp-bg-elevated);
	border: 1px solid var(--bp-border);
	border-radius: 6px;
	box-shadow: var(--bp-shadow-lg);
	min-width: 250px;
	max-width: 400px;
	max-height: 400px;
	overflow-y: auto;
	animation: menuSlideIn 0.2s ease-out;
}

.cross-ref-header {
	padding: 10px 12px;
	background: var(--bp-bg-secondary);
	font-weight: 600;
	font-size: 0.9em;
	color: var(--bp-text-primary);
	border-bottom: 1px solid var(--bp-border);
	position: sticky;
	top: 0;
	z-index: 1;
}

.cross-ref-list {
	padding: 6px 0;
}

.cross-ref-item {
	padding: 6px 12px;
	transition: background 0.2s;
}

.cross-ref-item:hover {
	background: var(--bp-bg-secondary);
}

.cross-ref-link {
	color: var(--bp-accent);
	text-decoration: none;
	font-size: 0.95em;
	display: block;
}

.cross-ref-link:hover {
	text-decoration: underline;
	color: var(--bp-interactive-hover);
}

.cross-ref-icon {
	color: var(--bp-accent);
}

/* Cross-reference preview */
.cross-ref-preview {
	background: var(--bp-bg-elevated);
	border: 1px solid var(--bp-border);
	border-radius: 6px;
	padding: 12px;
	max-width: 350px;
	font-size: 13px;
	line-height: 1.5;
	color: var(--bp-text-primary);
	box-shadow: var(--bp-shadow-lg);
	animation: fadeInScale 0.2s ease-out;
}

.cross-ref-preview strong {
	color: var(--bp-accent);
	display: block;
	margin-bottom: 6px;
}

/* Search bar */
.bible-search-bar {
	display: flex;
	gap: 10px;
	align-items: center;
	margin: 20px 0;
	padding: 15px;
	background: var(--background-secondary);
	border-radius: 6px;
	flex-wrap: wrap;
}

.bible-search-input {
	flex: 1;
	min-width: 200px;
	padding: 8px 12px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 14px;
}

.bible-search-btn,
.bible-jump-btn {
	padding: 8px 16px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	font-size: 14px;
	cursor: pointer;
	font-weight: 600;
	transition: background 0.2s;
}

.bible-search-btn:hover,
.bible-jump-btn:hover {
	background: var(--interactive-accent-hover);
}

.bible-search-scope {
	padding: 8px 10px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 13px;
	cursor: pointer;
}

.bible-jump-input {
	width: 200px;
	padding: 8px 12px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 14px;
}

/* Note filter dropdown */
.bible-note-filter {
	padding: 8px 10px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 13px;
	cursor: pointer;
	min-width: 150px;
}

/* Note search */
.bible-note-search-input {
	width: 220px;
	padding: 8px 12px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 14px;
}

.bible-note-search-btn {
	padding: 8px 16px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	font-size: 14px;
	cursor: pointer;
	font-weight: 600;
	transition: background 0.2s;
}

.bible-note-search-btn:hover {
	background: var(--interactive-accent-hover);
}

/* Search results overlay */
.search-results-overlay {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: rgba(0, 0, 0, 0.5);
	display: flex;
	justify-content: center;
	align-items: center;
	z-index: 10000;
	animation: fadeIn 0.2s ease-out;
}

.search-results-container {
	background: var(--background-primary);
	border-radius: 8px;
	width: 90%;
	max-width: 700px;
	max-height: 80vh;
	display: flex;
	flex-direction: column;
	box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
	animation: fadeInScale 0.3s ease-out;
}

.search-results-header {
	padding: 20px;
	border-bottom: 2px solid var(--background-modifier-border);
	display: flex;
	justify-content: space-between;
	align-items: flex-start;
	flex-shrink: 0;
}

.search-results-title {
	margin: 0 0 8px 0;
	color: var(--text-title-h1);
	font-size: 1.3em;
}

.search-results-count {
	margin: 0;
	color: var(--text-muted);
	font-size: 0.9em;
}

.search-results-close {
	padding: 4px 10px;
	border: none;
	background: transparent;
	color: var(--text-muted);
	font-size: 1.5em;
	cursor: pointer;
	line-height: 1;
	transition: color 0.2s;
}

.search-results-close:hover {
	color: var(--text-error);
}

.search-results-list {
	overflow-y: auto;
	padding: 10px;
	flex: 1;
}

.search-result-item {
	padding: 12px;
	margin-bottom: 8px;
	border-radius: 6px;
	border: 1px solid var(--background-modifier-border);
	cursor: pointer;
	transition: all 0.2s;
}

.search-result-item:hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
}

.search-result-reference {
	font-weight: 600;
	color: var(--text-accent);
	margin-bottom: 6px;
	font-size: 0.95em;
}

.search-result-text {
	color: var(--text-normal);
	line-height: 1.6;
}

.search-result-text mark {
	background: var(--text-selection);
	color: var(--text-normal);
	padding: 2px 4px;
	border-radius: 3px;
	font-weight: 600;
}

/* Note search result specific styles */
.search-result-type-icon {
	font-size: 1.1em;
	margin-right: 4px;
}

.search-result-reference-text {
	color: var(--text-accent);
}

.search-result-context {
	margin: 8px 0;
	padding: 8px 12px;
	background: var(--background-secondary);
	border-left: 3px solid var(--interactive-accent);
	border-radius: 4px;
	font-size: 0.9em;
	line-height: 1.5;
	color: var(--text-muted);
}

.search-result-context mark {
	background: var(--text-selection);
	color: var(--text-normal);
	padding: 2px 4px;
	border-radius: 3px;
	font-weight: 600;
}

.search-result-preview {
	margin: 8px 0;
	font-size: 0.85em;
	color: var(--text-muted);
	font-style: italic;
	line-height: 1.4;
}

.search-result-actions {
	display: flex;
	gap: 8px;
	margin-top: 10px;
}

.search-result-action-btn {
	padding: 6px 12px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
	color: var(--text-normal);
	font-size: 12px;
	cursor: pointer;
	font-weight: 500;
	transition: all 0.2s;
}

.search-result-action-btn:hover {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
}

.search-results-empty {
	text-align: center;
	padding: 40px 20px;
	color: var(--text-muted);
	font-style: italic;
}

/* Load More button for search results */
.search-load-more-btn {
	display: block;
	width: 100%;
	padding: 12px 20px;
	margin-top: 10px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: 6px;
	font-size: 14px;
	font-weight: 600;
	cursor: pointer;
	transition: all 0.2s;
}

.search-load-more-btn:hover {
	background: var(--interactive-accent-hover);
	transform: translateY(-1px);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

/* Bookmarks button */
.bible-bookmarks-btn {
	padding: 8px 16px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	font-size: 14px;
	cursor: pointer;
	font-weight: 600;
	transition: background 0.2s;
}

.bible-bookmarks-btn:hover {
	background: var(--interactive-accent-hover);
}

/* Tags button */
.bible-tags-btn {
	padding: 8px 16px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	font-size: 14px;
	cursor: pointer;
	font-weight: 600;
	transition: background 0.2s;
}

.bible-tags-btn:hover {
	background: var(--interactive-accent-hover);
}

/* Active tag filter badge */
.active-tag-filter {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 6px 12px;
	background: var(--background-secondary);
	border: 1px solid var(--interactive-accent);
	border-radius: 16px;
	font-size: 13px;
}

.tag-filter-label {
	color: var(--text-accent);
	font-weight: 600;
}

.clear-tag-filter-btn {
	padding: 2px 6px;
	border-radius: 50%;
	border: none;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	font-size: 12px;
	cursor: pointer;
	transition: all 0.2s;
	width: 20px;
	height: 20px;
	display: flex;
	align-items: center;
	justify-content: center;
}

.clear-tag-filter-btn:hover {
	background: var(--interactive-accent-hover);
	transform: scale(1.1);
}

/* Tags overlay */
.tags-overlay {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: rgba(0, 0, 0, 0.5);
	display: flex;
	justify-content: center;
	align-items: center;
	z-index: 10000;
	animation: fadeIn 0.2s ease-out;
}

.tags-container {
	background: var(--background-primary);
	border-radius: 8px;
	width: 90%;
	max-width: 600px;
	max-height: 80vh;
	display: flex;
	flex-direction: column;
	box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
}

.tags-header {
	padding: 20px;
	border-bottom: 2px solid var(--background-modifier-border);
	display: flex;
	justify-content: space-between;
	align-items: flex-start;
}

.tags-title {
	margin: 0 0 8px 0;
	color: var(--text-title-h1);
	font-size: 1.3em;
}

.tags-count {
	margin: 0;
	color: var(--text-muted);
	font-size: 0.9em;
}

.tags-close {
	background: none;
	border: none;
	font-size: 1.5em;
	cursor: pointer;
	color: var(--text-muted);
	padding: 0;
	width: 30px;
	height: 30px;
	display: flex;
	align-items: center;
	justify-content: center;
	border-radius: 4px;
	transition: all 0.2s;
}

.tags-close:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.tags-list {
	overflow-y: auto;
	padding: 10px;
	flex: 1;
}

.tag-item {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 12px;
	margin-bottom: 8px;
	border-radius: 6px;
	border: 1px solid var(--background-modifier-border);
	cursor: pointer;
	transition: all 0.2s;
}

.tag-item:hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
}

.tag-name {
	display: flex;
	align-items: center;
	gap: 8px;
	flex: 1;
}

.tag-icon {
	font-size: 1.2em;
}

.tag-label {
	font-size: 0.95em;
	color: var(--text-normal);
	font-weight: 500;
}

.tag-count-badge {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	padding: 4px 10px;
	border-radius: 12px;
	font-size: 0.85em;
	font-weight: 600;
	min-width: 30px;
	text-align: center;
}

.tags-empty {
	text-align: center;
	padding: 40px 20px;
	color: var(--text-muted);
	font-style: italic;
}

/* Tags back button */
.tags-back-btn {
	padding: 8px 12px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
	color: var(--text-normal);
	font-size: 13px;
	cursor: pointer;
	transition: all 0.2s;
	margin-bottom: 10px;
}

.tags-back-btn:hover {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
}

/* Tags content area */
.tags-content {
	overflow-y: auto;
	padding: 10px;
	flex: 1;
}

/* Tag notes count */
.tag-notes-count {
	padding: 10px 12px;
	margin-bottom: 10px;
	background: var(--background-secondary);
	border-radius: 6px;
}

/* Tag note item */
.tag-note-item {
	padding: 12px;
	margin-bottom: 8px;
	border-radius: 6px;
	border: 1px solid var(--background-modifier-border);
	cursor: pointer;
	transition: all 0.2s;
}

.tag-note-item:hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
}

.tag-note-reference {
	display: flex;
	align-items: center;
	gap: 4px;
	margin-bottom: 8px;
	font-weight: 600;
}

.tag-note-type-icon {
	font-size: 1.1em;
}

.tag-note-reference-text {
	color: var(--text-accent);
}

.tag-note-actions {
	display: flex;
	gap: 8px;
	margin-top: 10px;
}

.tag-note-action-btn {
	padding: 6px 12px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
	color: var(--text-normal);
	font-size: 12px;
	cursor: pointer;
	font-weight: 500;
	transition: all 0.2s;
}

.tag-note-action-btn:hover {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
}

/* Bookmarks overlay */
.bookmarks-overlay {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: rgba(0, 0, 0, 0.5);
	display: flex;
	justify-content: center;
	align-items: center;
	z-index: 10000;
	animation: fadeIn 0.2s ease-out;
}

.bookmarks-container {
	background: var(--background-primary);
	border-radius: 8px;
	width: 90%;
	max-width: 700px;
	max-height: 80vh;
	display: flex;
	flex-direction: column;
	box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
	animation: fadeInScale 0.3s ease-out;
}

.bookmarks-header {
	padding: 20px;
	border-bottom: 2px solid var(--background-modifier-border);
	display: flex;
	justify-content: space-between;
	align-items: flex-start;
	flex-shrink: 0;
}

.bookmarks-title {
	margin: 0 0 8px 0;
	color: var(--text-title-h1);
	font-size: 1.3em;
}

.bookmarks-count {
	margin: 0;
	color: var(--text-muted);
	font-size: 0.9em;
}

.bookmarks-close {
	padding: 4px 10px;
	border: none;
	background: transparent;
	color: var(--text-muted);
	font-size: 1.5em;
	cursor: pointer;
	line-height: 1;
	transition: color 0.2s;
}

.bookmarks-close:hover {
	color: var(--text-error);
}

.bookmarks-list {
	overflow-y: auto;
	padding: 10px;
	flex: 1;
}

.bookmark-item {
	padding: 12px;
	margin-bottom: 8px;
	border-radius: 6px;
	border: 1px solid var(--background-modifier-border);
	cursor: pointer;
	transition: all 0.2s;
	position: relative;
}

.bookmark-item:hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
}

.bookmark-reference {
	font-weight: 600;
	color: var(--text-accent);
	margin-bottom: 6px;
	font-size: 0.95em;
}

.bookmark-text {
	color: var(--text-normal);
	line-height: 1.6;
	margin-bottom: 6px;
	font-size: 0.9em;
}

.bookmark-date {
	color: var(--text-muted);
	font-size: 0.8em;
	font-style: italic;
}

.bookmark-delete-btn {
	position: absolute;
	top: 8px;
	right: 8px;
	padding: 4px 8px;
	border: none;
	background: transparent;
	color: var(--text-muted);
	font-size: 1.2em;
	cursor: pointer;
	transition: color 0.2s;
	border-radius: 4px;
}

.bookmark-delete-btn:hover {
	color: var(--text-normal);
	background: var(--background-modifier-hover);
}

.bookmarks-empty {
	text-align: center;
	padding: 40px 20px;
	color: var(--text-muted);
	font-style: italic;
}

/* Dark mode adjustments */
.theme-dark .bible-portal-banner {
	background: linear-gradient(135deg, #4c6ef5 0%, #7950f2 100%);
}

/* Loading spinner */
.bible-loading-spinner {
	display: inline-block;
	width: 20px;
	height: 20px;
	border: 3px solid var(--background-modifier-border);
	border-top: 3px solid var(--interactive-accent);
	border-radius: 50%;
	animation: spin 0.8s linear infinite;
}

.bible-loading-container {
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 12px;
	padding: 40px 20px;
	color: var(--text-muted);
	font-style: italic;
}

.bible-loading-text {
	font-size: 14px;
}

/* Keyboard focus indicators */
button:focus-visible,
select:focus-visible,
input:focus-visible {
	outline: 2px solid var(--interactive-accent);
	outline-offset: 2px;
}

.bible-verse-number:focus-visible {
	outline: 2px solid var(--interactive-accent);
	outline-offset: 2px;
	border-radius: 4px;
}

/* Smooth transitions for all interactive elements */
button,
select,
input,
.bible-verse,
.search-result-item,
.bookmark-item {
	transition: all 0.2s ease;
}

/* Hover effects with subtle elevation */
.bible-nav-btn:hover,
.bible-search-btn:hover,
.bible-jump-btn:hover {
	transform: translateY(-1px);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.bible-nav-btn:active,
.bible-search-btn:active,
.bible-jump-btn:active {
	transform: translateY(0);
}

/* Accessibility: Reduced motion */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
	}
}

/* Screen reader only text */
.sr-only {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border-width: 0;
}

/* Strong's Concordance Styles */

/* Strong's tagged words */
.strongs-word {
	cursor: pointer;
	border-bottom: 2px dotted var(--interactive-accent);
	transition: all 0.2s ease;
	padding: 0 2px;
	color: var(--interactive-accent);
	font-weight: 500;
}

.strongs-word:hover {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-bottom: 2px solid var(--interactive-accent);
	border-radius: 3px;
}

/* Strong's hover tooltip */
.strongs-tooltip {
	position: fixed;
	background: var(--background-primary);
	border: 2px solid var(--interactive-accent);
	border-radius: 12px;
	padding: 16px 20px;
	/* Layered shadows for depth */
	box-shadow:
		0 2px 4px rgba(0, 0, 0, 0.08),
		0 8px 16px rgba(0, 0, 0, 0.12),
		0 24px 48px rgba(0, 0, 0, 0.16),
		0 0 0 1px rgba(var(--interactive-accent-rgb), 0.1);
	max-width: 450px;
	z-index: 10000;
	animation: tooltipFadeIn 0.2s ease-out;
	pointer-events: none;
}

@keyframes tooltipFadeIn {
	from {
		opacity: 0;
		transform: translateY(4px) scale(0.98);
	}
	to {
		opacity: 1;
		transform: translateY(0) scale(1);
	}
}

.strongs-tooltip-number {
	color: var(--interactive-accent);
	font-weight: bold;
	font-size: 12px;
	margin-bottom: 6px;
}

.strongs-tooltip-original {
	font-size: 24px;
	font-weight: bold;
	color: var(--text-normal);
	margin-bottom: 4px;
}

.strongs-tooltip-transliteration {
	font-size: 14px;
	color: var(--text-muted);
	font-style: italic;
	margin-bottom: 8px;
}

.strongs-tooltip-definition {
	font-size: 13px;
	line-height: 1.5;
	color: var(--text-normal);
	margin-bottom: 8px;
}

.strongs-tooltip-hint {
	font-size: 11px;
	color: var(--text-faint);
	text-align: center;
	margin-top: 8px;
	padding-top: 8px;
	border-top: 1px solid var(--background-modifier-border);
}

/* Strong's full lexicon modal */
.strongs-modal-overlay {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: rgba(0, 0, 0, 0.7);
	z-index: 9999;
	display: flex;
	align-items: center;
	justify-content: center;
	animation: fadeIn 0.2s ease-out;
}

.strongs-modal {
	background: var(--background-primary);
	border-radius: 12px;
	max-width: 700px;
	width: 90%;
	max-height: 80vh;
	overflow-y: auto;
	box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
	animation: fadeIn 0.3s ease-out;
}

.strongs-modal-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 24px 32px;
	border-bottom: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
	border-radius: 12px 12px 0 0;
}

.strongs-modal-title {
	margin: 0;
	font-size: 24px;
	color: var(--text-normal);
}

.strongs-modal-close {
	background: none;
	border: none;
	font-size: 24px;
	cursor: pointer;
	color: var(--text-muted);
	padding: 4px 12px;
	border-radius: 4px;
	transition: all 0.2s ease;
}

.strongs-modal-close:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.strongs-modal-content {
	padding: 32px;
}

.strongs-modal-original {
	font-size: 48px;
	font-weight: bold;
	color: var(--interactive-accent);
	margin-bottom: 16px;
	text-align: center;
}

.strongs-modal-pronunciation {
	font-size: 18px;
	color: var(--text-muted);
	font-style: italic;
	text-align: center;
	margin-bottom: 24px;
}

.strongs-modal-definition {
	font-size: 16px;
	line-height: 1.8;
	color: var(--text-normal);
	margin-bottom: 24px;
	white-space: pre-wrap;
}

.strongs-modal-note {
	font-size: 14px;
	line-height: 1.6;
	color: var(--text-muted);
	background: var(--background-secondary);
	padding: 16px;
	border-radius: 8px;
	border-left: 4px solid var(--interactive-accent);
	margin-bottom: 24px;
}

.strongs-modal-related {
	margin-top: 24px;
	padding-top: 24px;
	border-top: 1px solid var(--background-modifier-border);
}

.strongs-modal-related h3 {
	font-size: 16px;
	color: var(--text-normal);
	margin-bottom: 12px;
}

.strongs-modal-related-list {
	display: flex;
	flex-wrap: wrap;
	gap: 8px;
}

.strongs-modal-related-btn {
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	padding: 8px 16px;
	border-radius: 6px;
	cursor: pointer;
	color: var(--interactive-accent);
	font-weight: 600;
	transition: all 0.2s ease;
}

.strongs-modal-related-btn:hover {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	transform: translateY(-2px);
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

/* Strong's verse references - collapsible book sections */
.strongs-verses-section {
	margin-top: 24px;
	padding-top: 24px;
	border-top: 2px solid var(--background-modifier-border);
}

.strongs-verses-section h4 {
	font-size: 18px;
	color: var(--text-normal);
	margin-bottom: 16px;
	font-weight: 600;
}

.strongs-verses-list {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.strongs-book-group {
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	overflow: hidden;
	background: var(--background-secondary);
}

.strongs-book-header {
	padding: 12px 16px;
	background: var(--background-secondary-alt);
	font-weight: 600;
	font-size: 14px;
	color: var(--text-normal);
	border-bottom: 1px solid var(--background-modifier-border);
	cursor: pointer;
	transition: background 0.2s ease;
	display: flex;
	align-items: center;
}

.strongs-book-header:hover {
	background: var(--background-modifier-hover);
}

.strongs-toggle-icon {
	display: inline-block;
	width: 20px;
	color: var(--text-muted);
	font-size: 12px;
	transition: transform 0.2s ease;
}

.strongs-verses-container {
	padding: 12px 16px;
	display: flex;
	flex-wrap: wrap;
	gap: 8px;
	max-height: 400px;
	overflow-y: auto;
	background: var(--background-primary);
	transition: max-height 0.3s ease, padding 0.3s ease;
}

.strongs-verses-container.collapsed {
	max-height: 0;
	padding: 0 16px;
	overflow: hidden;
}

.strongs-verse-ref {
	display: inline-block;
	padding: 6px 12px;
	background: var(--interactive-normal);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	color: var(--interactive-accent);
	text-decoration: none;
	font-size: 13px;
	font-weight: 500;
	transition: all 0.2s ease;
	cursor: pointer;
}

.strongs-verse-ref:hover {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	transform: translateY(-1px);
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* ========================================
   JESUS WORDS STYLES
   ======================================== */

/* Red-letter text for Jesus' words */
.jesus-words {
	color: #dc2626; /* Classic red-letter (Tailwind red-600) */
	font-weight: 500;
	cursor: pointer;
	transition: all 0.2s ease;
}

.jesus-words:hover {
	color: #b91c1c; /* Darker red on hover (red-700) */
	text-shadow: 0 0 8px rgba(220, 38, 38, 0.3);
}

/* Jesus Words metadata tooltip */
.jesus-words-tooltip {
	position: fixed;
	background: var(--background-primary);
	border: 2px solid #dc2626;
	border-radius: 12px;
	padding: 16px 20px;
	/* Layered shadows for depth */
	box-shadow:
		0 2px 4px rgba(220, 38, 38, 0.08),
		0 8px 16px rgba(220, 38, 38, 0.12),
		0 24px 48px rgba(0, 0, 0, 0.16),
		0 0 0 1px rgba(220, 38, 38, 0.1);
	max-width: 500px;
	z-index: 10000;
	animation: tooltipFadeIn 0.2s ease-out;
	pointer-events: none;
}

.jesus-words-tooltip-title {
	color: #dc2626;
	font-weight: bold;
	font-size: 14px;
	margin-bottom: 12px;
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.jesus-words-tooltip-row {
	display: flex;
	align-items: baseline;
	gap: 8px;
	margin-bottom: 8px;
	font-size: 13px;
}

.jesus-words-tooltip-label {
	color: var(--text-muted);
	flex-shrink: 0;
}

.jesus-words-tooltip-value {
	color: var(--text-normal);
	font-weight: 500;
	text-transform: capitalize;
}

.jesus-words-tooltip-summary {
	margin-top: 12px;
	padding-top: 12px;
	border-top: 1px solid var(--background-modifier-border);
	font-size: 13px;
	line-height: 1.6;
	color: var(--text-normal);
	font-style: italic;
}

/* ========================================
   COMBINED TOOLTIP (Strong's + Jesus Words)
   ======================================== */

.combined-tooltip {
	position: fixed;
	background: var(--background-primary);
	border: 2px solid var(--interactive-accent);
	border-radius: 14px;
	padding: 20px;
	/* Layered shadows for depth */
	box-shadow:
		0 2px 4px rgba(0, 0, 0, 0.08),
		0 8px 16px rgba(0, 0, 0, 0.12),
		0 24px 48px rgba(0, 0, 0, 0.16),
		0 0 0 1px rgba(var(--interactive-accent-rgb), 0.1);
	max-width: 550px;
	z-index: 10000;
	animation: tooltipFadeIn 0.2s ease-out;
	pointer-events: none;
}

.combined-tooltip-section {
	margin-bottom: 16px;
}

.combined-tooltip-section:last-child {
	margin-bottom: 0;
}

.combined-tooltip-header {
	font-weight: bold;
	font-size: 11px;
	text-transform: uppercase;
	letter-spacing: 0.8px;
	margin-bottom: 10px;
}

.combined-tooltip-header.strongs-header {
	color: var(--interactive-accent);
}

.combined-tooltip-header.jesus-header {
	color: #dc2626;
}

.combined-tooltip-divider {
	height: 1px;
	background: var(--background-modifier-border);
	margin: 16px 0;
}

/* Smaller Strong's original word in combined view */
.combined-tooltip .strongs-tooltip-original {
	font-size: 20px;
	margin-bottom: 6px;
}

.combined-tooltip .strongs-tooltip-definition {
	font-size: 12px;
	margin-bottom: 8px;
}

.combined-tooltip .jesus-words-tooltip-row {
	font-size: 12px;
	margin-bottom: 6px;
}

/* Disputed/Textual Variant Passages */
.bible-verse.disputed-passage {
	border-left: 3px solid var(--color-orange);
	padding-left: 8px;
	background: rgba(249, 115, 22, 0.05);
}

.theme-dark .bible-verse.disputed-passage {
	background: rgba(249, 115, 22, 0.08);
}

.disputed-icon {
	display: inline-flex;
	align-items: center;
	margin-left: 4px;
	margin-right: 4px;
	color: var(--color-orange);
	cursor: help;
	vertical-align: middle;
}

.disputed-icon svg {
	width: 14px;
	height: 14px;
}

.disputed-icon:hover {
	color: var(--text-accent);
}

/* Bible Download Modal */
.bible-download-search {
	margin-bottom: 15px;
}

.bible-download-search-input {
	width: 100%;
	padding: 10px;
	font-size: 14px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	color: var(--text-normal);
}

.bible-download-search-input:focus {
	outline: none;
	border-color: var(--interactive-accent);
}

.bible-download-list {
	max-height: 400px;
	overflow-y: auto;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
}

.bible-download-item {
	padding: 12px 15px;
	border-bottom: 1px solid var(--background-modifier-border);
	cursor: pointer;
	transition: background-color 0.2s ease;
}

.bible-download-item:last-child {
	border-bottom: none;
}

.bible-download-item:hover {
	background: var(--background-modifier-hover);
}

.bible-download-item-title {
	font-size: 14px;
	margin-bottom: 4px;
}

.bible-download-item-title strong {
	color: var(--text-accent);
	font-weight: 600;
}

.bible-download-item-lang {
	font-size: 12px;
	color: var(--text-muted);
	font-style: italic;
}

.bible-download-empty {
	padding: 20px;
	text-align: center;
	color: var(--text-muted);
}

/* Book selector container with note buttons */
.bible-book-selector-container {
	display: inline-flex;
	align-items: center;
	gap: 8px;
}

/* Note action buttons */
.note-action-btn {
	padding: 4px 12px;
	font-size: 13px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	cursor: pointer;
	transition: all 0.2s ease;
	white-space: nowrap;
}

/* Create note button (greyed out) */
.note-create-btn {
	color: var(--text-muted);
	opacity: 0.6;
}

.note-create-btn:hover {
	opacity: 1;
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
}

/* Existing note button (solid) */
.note-exists-btn {
	color: var(--text-normal);
	font-weight: 500;
	background: var(--background-secondary);
}

.note-exists-btn:hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
}

/* Note button group (note button + delete button) */
.note-button-group {
	display: inline-flex;
	align-items: center;
	gap: 4px;
}

/* Delete note button */
.note-delete-btn {
	padding: 4px 8px;
	font-size: 13px;
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	cursor: pointer;
	transition: all 0.2s ease;
	color: var(--text-muted);
}

.note-delete-btn:hover {
	background: var(--background-modifier-hover);
	border-color: var(--background-modifier-border);
	color: var(--text-normal);
}

/* ========================================
   Theographic Sidebar
   ======================================== */

/* Content container with sidebar */
.bible-content-with-sidebar {
	display: flex;
	gap: 16px;
	height: 100%;
}

/* Chapter viewer takes most space */
.bible-content-with-sidebar .bible-chapter-viewer {
	flex: 1;
	min-width: 0; /* Prevent flex item from overflowing */
	overflow-y: auto;
}

/* Theographic sidebar - sticky so it doesn't scroll with verses */
.bible-theographic-sidebar {
	flex: 0 0 300px; /* Fixed width sidebar */
	background: var(--background-secondary);
	border-left: 1px solid var(--background-modifier-border);
	padding: 16px;
	overflow-y: auto;
	position: sticky;
	top: 0;
	align-self: flex-start;
	max-height: 100vh;
}

/* Sidebar header */
.theographic-sidebar-header {
	margin-bottom: 16px;
	border-bottom: 2px solid var(--background-modifier-border);
	padding-bottom: 8px;
}

.theographic-sidebar-title {
	margin: 0;
	font-size: 18px;
	font-weight: 600;
	color: var(--text-normal);
}

/* Section in sidebar */
.theographic-section {
	margin-bottom: 16px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	overflow: hidden;
}

/* Section header (clickable) */
.theographic-section-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 10px 12px;
	background: var(--background-primary-alt);
	cursor: pointer;
	user-select: none;
	transition: background 0.2s ease;
}

.theographic-section-header:hover {
	background: var(--background-modifier-hover);
}

.theographic-section-title {
	font-weight: 500;
	font-size: 14px;
	color: var(--text-normal);
}

.theographic-toggle-icon {
	font-size: 12px;
	color: var(--text-muted);
	transition: transform 0.2s ease;
}

/* Section content */
.theographic-section-content {
	background: var(--background-primary);
}

/* Individual items */
.theographic-item {
	padding: 10px 12px;
	border-bottom: 1px solid var(--background-modifier-border);
	transition: background 0.2s ease;
}

.theographic-item:last-child {
	border-bottom: none;
}

.theographic-item:hover {
	background: var(--background-modifier-hover);
}

.theographic-item-name {
	font-weight: 500;
	font-size: 13px;
	color: var(--text-normal);
	margin-bottom: 4px;
}

.theographic-item-details {
	font-size: 12px;
	color: var(--text-muted);
	font-style: italic;
}

/* No data message */
.theographic-no-data {
	padding: 24px;
	text-align: center;
	color: var(--text-muted);
	font-style: italic;
	font-size: 14px;
}

/* ========================================
   Theographic Enhanced Views
   ======================================== */

/* Common view styles */
.theographic-view-header {
	padding: 24px;
	border-bottom: 2px solid var(--background-modifier-border);
	margin-bottom: 24px;
}

.theographic-view-title {
	margin: 0 0 8px 0;
	font-size: 24px;
	font-weight: 600;
}

.theographic-view-description {
	margin: 0;
	color: var(--text-muted);
	font-size: 14px;
}

.theographic-search {
	padding: 16px 24px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.theographic-search-input {
	width: 100%;
	padding: 10px 12px;
	font-size: 14px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	color: var(--text-normal);
}

.theographic-search-input:focus {
	outline: none;
	border-color: var(--interactive-accent);
}

/* People Index Filters */
.people-filters-toolbar {
	display: flex;
	flex-wrap: wrap;
	gap: 16px;
	padding: 16px 24px;
	background: var(--background-secondary);
	border-bottom: 1px solid var(--background-modifier-border);
}

.people-filter-group {
	display: flex;
	flex-direction: column;
	gap: 4px;
	min-width: 120px;
}

.people-filter-group:first-child {
	flex: 1;
	min-width: 200px;
}

.people-filter-label {
	font-size: 0.75em;
	font-weight: 600;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.people-filter-input {
	padding: 8px 12px;
	font-size: 0.9em;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	color: var(--text-normal);
}

.people-filter-input:focus {
	outline: none;
	border-color: var(--interactive-accent);
}

.people-filter-select {
	padding: 8px 12px;
	font-size: 0.9em;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	color: var(--text-normal);
	cursor: pointer;
}

.people-filter-select:focus {
	outline: none;
	border-color: var(--interactive-accent);
}

/* Flat list mode for non-alphabetical sorts */
.people-list-flat {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
	gap: 12px;
}

.theographic-view-content {
	padding: 24px;
	overflow-y: auto;
}

.theographic-result-count {
	margin-top: 24px;
	padding-top: 16px;
	border-top: 1px solid var(--background-modifier-border);
	text-align: center;
	color: var(--text-muted);
	font-size: 13px;
}

/* People Index */
.people-letter-section {
	margin-bottom: 32px;
}

.people-letter-heading {
	margin: 0 0 12px 0;
	padding-bottom: 8px;
	border-bottom: 2px solid var(--interactive-accent);
	font-size: 20px;
	font-weight: 600;
	color: var(--interactive-accent);
}

.people-list {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
	gap: 12px;
}

.person-card {
	padding: 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary-alt);
	transition: all 0.2s ease;
}

.person-card:hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
	transform: translateY(-2px);
	box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.person-card-name {
	font-weight: 500;
	font-size: 14px;
	color: var(--text-normal);
	margin-bottom: 4px;
}

.person-card-details {
	font-size: 12px;
	color: var(--text-muted);
}

/* Map View */
.theographic-map-container {
	height: 500px;
	background: var(--background-secondary);
	border: 2px solid var(--background-modifier-border);
	border-radius: 8px;
	margin: 0 24px 24px 24px;
	display: flex;
	align-items: center;
	justify-content: center;
}

.theographic-map-placeholder {
	font-size: 18px;
	color: var(--text-muted);
}

.theographic-map-sidebar {
	margin: 0 24px;
	padding: 16px;
	background: var(--background-primary-alt);
	border-radius: 8px;
	max-height: 400px;
	overflow-y: auto;
}

.map-sidebar-title {
	margin: 0 0 12px 0;
	font-size: 16px;
	font-weight: 600;
}

.map-places-list {
	margin-top: 16px;
}

.map-type-section {
	margin-bottom: 20px;
}

.map-type-heading {
	margin: 0 0 8px 0;
	font-size: 14px;
	font-weight: 600;
	color: var(--text-accent);
}

.map-place-item {
	padding: 8px 12px;
	margin-bottom: 6px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	transition: all 0.2s ease;
}

.map-place-item:hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
}

.map-place-name {
	font-weight: 500;
	font-size: 13px;
	color: var(--text-normal);
}

.map-place-comment {
	font-size: 12px;
	color: var(--text-muted);
	font-style: italic;
	margin-top: 4px;
}

/* Timeline View */
.timeline-filters {
	display: flex;
	gap: 12px;
	padding: 16px 24px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.timeline-filters input {
	flex: 1;
}

.timeline-period-select {
	padding: 10px 12px;
	font-size: 14px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	color: var(--text-normal);
	cursor: pointer;
}

.timeline-period-select:focus {
	outline: none;
	border-color: var(--interactive-accent);
}

.timeline-content {
	padding: 24px;
	overflow-y: auto;
}

.timeline-event-card {
	padding: 16px;
	margin-bottom: 16px;
	background: var(--background-primary-alt);
	border-left: 4px solid var(--interactive-accent);
	border-radius: 6px;
	transition: all 0.2s ease;
}

.timeline-event-card:hover {
	background: var(--background-modifier-hover);
	transform: translateX(4px);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.timeline-event-date {
	font-size: 12px;
	font-weight: 600;
	color: var(--interactive-accent);
	margin-bottom: 8px;
}

.timeline-event-title {
	font-size: 15px;
	font-weight: 500;
	color: var(--text-normal);
	margin-bottom: 6px;
}

.timeline-event-duration {
	font-size: 12px;
	color: var(--text-muted);
}

/* ========================================
   Theographic Detail Modal Styles
   ======================================== */

.theographic-detail-modal {
	padding: 24px;
	max-width: 700px;
}

.theographic-modal-header {
	margin-bottom: 20px;
	padding-bottom: 16px;
	border-bottom: 2px solid var(--background-modifier-border);
}

.theographic-modal-title {
	font-size: 24px;
	font-weight: 600;
	color: var(--text-normal);
	margin: 0;
}

.theographic-modal-metadata {
	display: flex;
	flex-direction: column;
	gap: 8px;
	margin-bottom: 20px;
	padding: 12px;
	background-color: var(--background-secondary);
	border-radius: 6px;
}

.theographic-modal-meta-item {
	font-size: 14px;
	color: var(--text-muted);
	line-height: 1.5;
}

.theographic-modal-section {
	margin-bottom: 20px;
}

.theographic-modal-section-title {
	font-size: 16px;
	font-weight: 500;
	color: var(--text-normal);
	margin-bottom: 10px;
}

.theographic-modal-bio {
	font-size: 14px;
	color: var(--text-normal);
	line-height: 1.6;
	white-space: pre-wrap;
}

.theographic-modal-attribution {
	font-size: 11px;
	color: var(--text-faint);
	font-style: italic;
	margin-top: 20px;
	padding-top: 12px;
	border-top: 1px solid var(--background-modifier-border);
}

.theographic-modal-close {
	margin-top: 20px;
	padding: 8px 16px;
	background-color: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: 4px;
	font-size: 14px;
	cursor: pointer;
	transition: background-color 0.2s;
}

.theographic-modal-close:hover {
	background-color: var(--interactive-accent-hover);
}

.theographic-modal-verses-list {
	display: flex;
	flex-wrap: wrap;
	gap: 8px;
	margin-top: 10px;
}

.theographic-modal-verse-ref {
	padding: 6px 12px;
	background-color: var(--background-secondary);
	border-radius: 4px;
	font-size: 13px;
	color: var(--text-normal);
	transition: background-color 0.2s, color 0.2s;
}

.theographic-modal-verse-ref:hover {
	background-color: var(--interactive-accent);
	color: var(--text-on-accent);
}

.theographic-modal-verse-more {
	padding: 6px 12px;
	font-size: 13px;
	color: var(--text-faint);
	font-style: italic;
}

/* ========================================
   Settings About Section
   ======================================== */

.settings-about-heading {
	margin-top: 40px;
	padding-top: 20px;
	border-top: 2px solid var(--background-modifier-border);
}

.settings-about-section {
	padding: 20px;
	background-color: var(--background-secondary);
	border-radius: 8px;
	margin-top: 16px;
}

.settings-about-section h3 {
	margin-top: 0;
	margin-bottom: 8px;
	color: var(--text-normal);
}

.settings-about-section h4 {
	margin-top: 20px;
	margin-bottom: 12px;
	color: var(--text-normal);
	font-size: 14px;
}

.settings-about-section p {
	color: var(--text-muted);
	line-height: 1.6;
	margin-bottom: 12px;
}

.settings-license-list {
	list-style: none;
	padding-left: 0;
	margin: 12px 0;
}

.settings-license-list li {
	margin-bottom: 10px;
	padding: 8px 12px;
	background-color: var(--background-primary);
	border-radius: 4px;
	font-size: 13px;
	line-height: 1.5;
}

.settings-license-list strong {
	color: var(--text-normal);
}

.settings-license-list a {
	color: var(--link-color);
	text-decoration: none;
}

.settings-license-list a:hover {
	text-decoration: underline;
}

.settings-attribution-notice {
	padding: 12px;
	background-color: var(--background-primary);
	border-left: 3px solid var(--interactive-accent);
	border-radius: 4px;
	font-size: 13px;
	margin-top: 16px;
}

.settings-feature-list {
	list-style: none;
	padding-left: 0;
	margin: 12px 0;
	display: grid;
	grid-template-columns: repeat(2, 1fr);
	gap: 6px 16px;
}

.settings-feature-list li {
	font-size: 13px;
	padding: 4px 0;
	color: var(--text-normal);
}

.settings-feature-list li::before {
	content: " ";
	color: var(--interactive-accent);
	font-weight: bold;
}

.settings-author {
	font-size: 13px;
	color: var(--text-normal);
	margin-top: 8px;
}

.settings-version {
	font-size: 12px;
	color: var(--text-faint);
	font-style: italic;
	margin-top: 16px;
	text-align: right;
}

/* ===================================
   Browser Views (Notes & Highlights)
   =================================== */

.browser-view-header {
	margin-bottom: 20px;
	padding-bottom: 10px;
	border-bottom: 2px solid var(--background-modifier-border);
}

.browser-view-title {
	margin: 0 0 8px 0;
	color: var(--text-title-h1);
	font-size: 1.5em;
}

.browser-view-description {
	margin: 0;
	color: var(--text-muted);
	font-size: 0.95em;
}

/* Import/Export buttons */
.import-export-buttons {
	display: flex;
	gap: 10px;
	margin-top: 16px;
}

.import-export-btn {
	padding: 8px 16px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--interactive-normal);
	color: var(--text-normal);
	cursor: pointer;
	font-size: 0.9em;
	transition: all 0.2s;
	font-weight: 500;
}

.import-export-btn:hover {
	background: var(--interactive-hover);
	transform: translateY(-1px);
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Import mode dialog */
.import-mode-question {
	font-weight: 600;
	margin-top: 16px;
	margin-bottom: 12px;
}

.import-mode-buttons {
	display: flex;
	flex-direction: column;
	gap: 10px;
	margin-top: 20px;
}

.import-mode-buttons button {
	padding: 10px 16px;
	font-size: 14px;
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.2s;
}

.browser-refresh-btn {
	padding: 6px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--interactive-normal);
	color: var(--text-normal);
	cursor: pointer;
	font-size: 0.9em;
	transition: all 0.2s;
}

.browser-refresh-btn:hover {
	background: var(--interactive-hover);
}

.browser-filters {
	display: flex;
	gap: 10px;
	margin-bottom: 20px;
	flex-wrap: wrap;
}

.browser-search-input {
	flex: 1;
	min-width: 200px;
	padding: 8px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 0.95em;
}

.browser-type-select,
.browser-color-select,
.browser-book-select {
	padding: 8px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	color: var(--text-normal);
	cursor: pointer;
	font-size: 0.95em;
}

/* Clear All Highlights button */
.clear-all-highlights-btn {
	padding: 8px 16px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-modifier-error);
	color: var(--text-error);
	cursor: pointer;
	font-size: 0.9em;
	font-weight: 500;
	transition: all 0.2s;
}

.clear-all-highlights-btn:hover {
	background: var(--text-error);
	color: var(--text-on-accent);
	transform: translateY(-1px);
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Confirmation dialog warnings */
.warning-text {
	color: var(--text-normal);
	font-size: 14px;
	margin-bottom: 8px;
}

.warning-text-strong {
	color: var(--text-error);
	font-weight: 700;
	font-size: 15px;
	margin-bottom: 12px;
}

.warning-hint {
	color: var(--text-muted);
	font-size: 13px;
	font-style: italic;
	margin-bottom: 16px;
}

.confirmation-buttons {
	display: flex;
	gap: 10px;
	justify-content: flex-end;
	margin-top: 20px;
}

.confirmation-buttons button {
	padding: 10px 16px;
	font-size: 14px;
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.2s;
}

.browser-content {
	overflow-y: auto;
	max-height: calc(100vh - 300px);
}

.browser-no-data {
	text-align: center;
	padding: 40px 20px;
	color: var(--text-muted);
	font-style: italic;
}

.browser-book-section {
	margin-bottom: 25px;
}

.browser-book-title {
	margin: 0 0 12px 0;
	padding-bottom: 6px;
	border-bottom: 1px solid var(--background-modifier-border);
	color: var(--text-title-h2);
	font-size: 1.2em;
}

/* Notes Browser Specific */

.browser-notes-list {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.browser-note-item {
	display: flex;
	align-items: center;
	gap: 12px;
	padding: 12px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	transition: all 0.2s;
}

.browser-note-item:hover {
	background: var(--background-modifier-hover);
	transform: translateX(4px);
}

.note-type-icon {
	font-size: 1.3em;
	flex-shrink: 0;
}

.note-reference {
	font-weight: 600;
	color: var(--text-accent);
	flex-shrink: 0;
}

.note-type-label {
	color: var(--text-muted);
	font-size: 0.9em;
	margin-left: auto;
}

/* Highlights Browser Specific */

.browser-highlights-list {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.browser-highlight-item {
	display: flex;
	align-items: center;
	gap: 12px;
	padding: 12px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	transition: all 0.2s;
}

.browser-highlight-item:hover {
	background: var(--background-modifier-hover);
	transform: translateX(4px);
}

.highlight-color-indicator {
	flex-shrink: 0;
}

.highlight-reference {
	font-weight: 600;
	color: var(--text-accent);
	flex-shrink: 0;
}

.highlight-text-preview {
	font-size: 0.9em;
	width: 100%;
}

/* ================================================
   CONCORDANCE STYLES
   ================================================ */

.concordance-header {
	padding: 20px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.concordance-title {
	margin: 0 0 8px 0;
	font-size: 1.5em;
}

.concordance-stats {
	color: var(--text-muted);
	margin: 0;
}

.concordance-error {
	color: var(--text-error);
	padding: 20px;
}

.concordance-search {
	padding: 15px 20px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.concordance-search-input {
	width: 100%;
	padding: 10px 14px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	font-size: 14px;
}

.concordance-search-input:focus {
	outline: none;
	border-color: var(--interactive-accent);
	box-shadow: 0 0 0 2px var(--interactive-accent-hover);
}

.concordance-alphabet {
	display: flex;
	flex-wrap: wrap;
	gap: 4px;
	padding: 12px 20px;
	border-bottom: 1px solid var(--background-modifier-border);
	background: var(--background-secondary);
}

.alphabet-btn {
	width: 32px;
	height: 32px;
	padding: 0;
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	background: var(--background-primary);
	color: var(--text-muted);
	cursor: pointer;
	font-size: 13px;
	font-weight: 500;
	transition: all 0.15s;
}

.alphabet-btn:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.alphabet-btn.active {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
}

.concordance-results {
	display: flex;
	height: calc(100vh - 280px);
	overflow: hidden;
}

.concordance-word-list {
	flex: 1;
	overflow-y: auto;
	padding: 15px 20px;
	border-right: 1px solid var(--background-modifier-border);
}

.concordance-word-count {
	color: var(--text-muted);
	font-size: 0.85em;
	margin-bottom: 12px;
	padding-bottom: 8px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.concordance-word-item {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 8px 12px;
	margin-bottom: 4px;
	border-radius: 4px;
	cursor: pointer;
	transition: all 0.15s;
}

.concordance-word-item:hover {
	background: var(--background-modifier-hover);
}

.concordance-word-item.selected {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
}

.concordance-word {
	font-weight: 500;
}

.concordance-count {
	font-size: 0.85em;
	color: var(--text-muted);
}

.concordance-word-item.selected .concordance-count {
	color: var(--text-on-accent);
	opacity: 0.8;
}

.concordance-no-results {
	color: var(--text-muted);
	text-align: center;
	padding: 40px 20px;
}

.concordance-truncated {
	color: var(--text-muted);
	font-size: 0.85em;
	text-align: center;
	padding: 15px;
	border-top: 1px solid var(--background-modifier-border);
	margin-top: 10px;
}

/* Concordance Build Progress */
.concordance-progress {
	text-align: center;
	padding: 20px;
}

.concordance-progress-text {
	margin: 0 0 15px 0;
	color: var(--text-normal);
	font-size: 0.95em;
}

.concordance-progress-bar-outer {
	width: 100%;
	max-width: 400px;
	height: 12px;
	background: var(--background-modifier-border);
	border-radius: 6px;
	overflow: hidden;
	margin: 0 auto;
}

.concordance-progress-bar-inner {
	height: 100%;
	width: 0%;
	background: linear-gradient(90deg, var(--interactive-accent), var(--interactive-accent-hover));
	border-radius: 6px;
	transition: width 0.3s ease-out;
}

/* ==========================================
   BIBLE EMPTY STATE & DOWNLOAD PROGRESS
   ========================================== */

/* Empty state when no Bibles installed */
.bible-empty-state {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	padding: 60px 40px;
	text-align: center;
	min-height: 400px;
}

.bible-empty-state .empty-state-icon {
	width: 80px;
	height: 80px;
	margin-bottom: 24px;
	color: var(--text-muted);
	opacity: 0.6;
}

.bible-empty-state .empty-state-icon svg {
	width: 100%;
	height: 100%;
}

.bible-empty-state .empty-state-title {
	margin: 0 0 12px 0;
	font-size: 1.5em;
	color: var(--text-normal);
}

.bible-empty-state .empty-state-desc {
	margin: 0 0 24px 0;
	color: var(--text-muted);
	font-size: 1.05em;
	max-width: 400px;
}

.bible-empty-state .empty-state-hint {
	margin-top: 20px;
	color: var(--text-muted);
	font-size: 0.9em;
}

.bible-empty-state .empty-state-hint a {
	color: var(--text-accent);
	cursor: pointer;
}

.bible-empty-state .empty-state-hint a:hover {
	text-decoration: underline;
}

/* Download button in empty state */
.bible-download-btn {
	padding: 12px 24px;
	font-size: 1.1em;
	border-radius: 8px;
	cursor: pointer;
	transition: all 0.2s ease;
}

/* Bible Download Progress (shared styles for empty state and settings) */
.bible-download-progress {
	text-align: center;
	padding: 20px;
	width: 100%;
	max-width: 500px;
}

.bible-download-progress-text {
	margin: 0 0 15px 0;
	color: var(--text-normal);
	font-size: 0.95em;
}

.bible-download-progress-bar-outer {
	width: 100%;
	height: 12px;
	background: var(--background-modifier-border);
	border-radius: 6px;
	overflow: hidden;
}

.bible-download-progress-bar-inner {
	height: 100%;
	width: 0%;
	background: linear-gradient(90deg, var(--interactive-accent), var(--interactive-accent-hover));
	border-radius: 6px;
	transition: width 0.15s ease-out;
}

/* Settings-specific download progress styling */
.settings-download-progress {
	margin: 10px 0;
	padding: 15px;
	background: var(--background-secondary);
	border-radius: 8px;
}

.settings-download-progress .bible-download-progress-text {
	font-size: 0.9em;
	margin-bottom: 10px;
}

.bible-download-section {
	margin-bottom: 20px;
}

.concordance-verses {
	flex: 1.5;
	overflow-y: auto;
	background: var(--background-secondary);
}

.verses-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 15px 20px;
	border-bottom: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
	position: sticky;
	top: 0;
	z-index: 10;
}

.verses-title {
	margin: 0;
	font-size: 1.1em;
}

.verses-close-btn {
	width: 28px;
	height: 28px;
	padding: 0;
	border: none;
	background: var(--background-modifier-hover);
	border-radius: 4px;
	cursor: pointer;
	font-size: 18px;
	line-height: 1;
	color: var(--text-muted);
	transition: all 0.15s;
}

.verses-close-btn:hover {
	background: var(--background-modifier-error);
	color: var(--text-on-accent);
}

.verses-content {
	padding: 15px 20px;
}

.verses-book-section {
	margin-bottom: 20px;
}

.verses-book-header {
	font-weight: 600;
	color: var(--text-accent);
	padding: 8px 0;
	margin-bottom: 8px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.verses-refs {
	display: flex;
	flex-wrap: wrap;
	gap: 8px;
}

.verse-ref-link {
	padding: 4px 10px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	font-size: 0.9em;
	cursor: pointer;
	transition: all 0.15s;
}

.verse-ref-link:hover {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
}

/* ===========================================
   TAGS BROWSER STYLES
   =========================================== */

.tags-browser {
	padding: 20px;
}

.tags-header {
	margin-bottom: 20px;
}

.tags-header h2 {
	margin: 0 0 8px 0;
	font-size: 1.5em;
}

.tags-stats {
	color: var(--text-muted);
	font-size: 0.9em;
	margin: 0;
}

.tags-controls {
	display: flex;
	gap: 12px;
	margin-bottom: 20px;
	align-items: center;
}

.tags-search-input {
	flex: 1;
	padding: 8px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	font-size: 0.95em;
}

.tags-search-input:focus {
	outline: none;
	border-color: var(--interactive-accent);
}

.tags-new-btn {
	padding: 8px 16px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: 6px;
	cursor: pointer;
	font-weight: 500;
}

.tags-new-btn:hover {
	opacity: 0.9;
}

.tags-action-btn {
	padding: 6px 12px;
	background: var(--background-modifier-hover);
	color: var(--text-normal);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	cursor: pointer;
	font-size: 13px;
}

.tags-action-btn:hover {
	background: var(--background-modifier-border);
}

.tags-content-area {
	display: grid;
	grid-template-columns: 250px 1fr;
	gap: 20px;
	min-height: 400px;
}

.tags-list-panel,
.tags-verses-panel {
	background: var(--background-secondary);
	border-radius: 8px;
	padding: 16px;
}

.tags-list-panel h3,
.tags-verses-panel h3 {
	margin: 0 0 16px 0;
	font-size: 1.1em;
	padding-bottom: 12px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.tags-list-container {
	max-height: 500px;
	overflow-y: auto;
}

.tags-empty-message {
	color: var(--text-muted);
	font-style: italic;
	text-align: center;
	padding: 20px;
}

.tag-list-item {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 10px 12px;
	margin-bottom: 4px;
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.15s;
}

.tag-list-item:hover {
	background: var(--background-modifier-hover);
	transform: translateX(4px);
}

.tag-list-item.active {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
}

.tag-list-item .tag-name {
	font-weight: 500;
}

.tag-list-item .tag-count {
	font-size: 0.85em;
	opacity: 0.7;
}

.tags-verses-container {
	max-height: 500px;
	overflow-y: auto;
}

.tag-book-section {
	margin-bottom: 16px;
}

.tag-book-header {
	font-weight: 600;
	color: var(--text-accent);
	padding: 8px 0;
	margin-bottom: 8px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.tag-refs-container {
	display: flex;
	flex-wrap: wrap;
	gap: 8px;
}

.tag-verse-ref {
	padding: 4px 10px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	font-size: 0.9em;
	cursor: pointer;
	transition: all 0.15s;
}

.tag-verse-ref:hover {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
}

/* Tag Browser Verse Items (full verse display) */
.tag-verses-list {
	display: flex;
	flex-direction: column;
	gap: 12px;
	margin-top: 8px;
}

.tag-verse-item {
	padding: 12px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	transition: all 0.15s;
}

.tag-verse-item:hover {
	background: var(--background-secondary);
	border-color: var(--interactive-accent);
}

.tag-verse-reference {
	font-weight: 600;
	color: var(--text-accent);
	display: block;
	margin-bottom: 6px;
}

.tag-verse-text {
	color: var(--text-normal);
	line-height: 1.5;
	font-size: 0.95em;
}

/* Tag Pills on Verses */
.verse-tags-container {
	display: inline-flex;
	gap: 4px;
	margin-left: 8px;
	flex-wrap: wrap;
}

.verse-tag-pill {
	display: inline-block;
	padding: 2px 8px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-radius: 12px;
	font-size: 0.75em;
	font-weight: 500;
	cursor: pointer;
	transition: all 0.15s;
}

.verse-tag-pill:hover {
	opacity: 0.85;
	transform: scale(1.05);
}

/* Context Menu Tag Styles */
.bible-menu-tag-item {
	color: var(--text-accent);
}

.bible-menu-separator-light {
	height: 1px;
	background: var(--background-modifier-border);
	margin: 4px 0;
	opacity: 0.5;
}

.bible-menu-item-expand {
	position: relative;
}

.bible-menu-item-expand::after {
	content: '';
	position: absolute;
	right: 12px;
	opacity: 0.6;
}

.bible-menu-submenu {
	padding-left: 16px;
	border-left: 2px solid var(--interactive-accent);
	margin-left: 12px;
}

/* Tag Dialog Styles */
.tag-input-field {
	padding: 8px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	font-size: 1em;
}

.tag-input-field:focus {
	outline: none;
	border-color: var(--interactive-accent);
}

.tag-suggestions {
	margin-bottom: 16px;
}

.tag-suggestions-label {
	font-size: 0.85em;
	color: var(--text-muted);
	margin-bottom: 8px;
}

.tag-suggestions-container {
	display: flex;
	flex-wrap: wrap;
	gap: 6px;
}

.tag-suggestion-chip {
	padding: 4px 10px;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 12px;
	font-size: 0.85em;
	cursor: pointer;
	transition: all 0.15s;
}

.tag-suggestion-chip:hover {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
}

.delete-warning {
	color: var(--text-error);
	font-weight: 500;
}

/* ===========================================
   NOTE PREVIEW SECTION STYLES
   =========================================== */

.note-preview-section {
	padding: 12px;
	border-bottom: 1px solid var(--background-modifier-border);
	margin-bottom: 12px;
}

.note-preview-header {
	margin-bottom: 8px;
}

.note-preview-title {
	margin: 0;
	font-size: 1em;
	color: var(--text-normal);
}

.note-preview-content {
	font-size: 0.9em;
}

.note-preview-empty {
	color: var(--text-muted);
	font-style: italic;
	margin: 8px 0;
}

.note-preview-reference {
	font-weight: 600;
	color: var(--text-accent);
	margin-bottom: 12px;
	padding-bottom: 8px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.note-preview-card {
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	padding: 10px;
	margin-bottom: 8px;
}

.note-preview-badge {
	display: inline-block;
	padding: 2px 8px;
	border-radius: 10px;
	font-size: 0.75em;
	font-weight: 600;
	text-transform: uppercase;
	margin-bottom: 6px;
}

.note-level-verse {
	background: #10b981;
	color: white;
}

.note-level-passage {
	background: #3b82f6;
	color: white;
}

.note-level-chapter {
	background: #8b5cf6;
	color: white;
}

.note-level-book {
	background: #f59e0b;
	color: white;
}

.note-preview-text {
	color: var(--text-muted);
	font-size: 0.9em;
	line-height: 1.4;
	margin: 8px 0;
	max-height: 80px;
	overflow: hidden;
}

.note-preview-open-btn {
	padding: 4px 12px;
	font-size: 0.8em;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: 4px;
	cursor: pointer;
}

.note-preview-open-btn:hover {
	opacity: 0.9;
}

.note-preview-create-btn {
	width: 100%;
	padding: 8px;
	margin-top: 8px;
	background: var(--background-secondary);
	border: 1px dashed var(--background-modifier-border);
	border-radius: 6px;
	color: var(--text-muted);
	cursor: pointer;
	transition: all 0.15s;
}

.note-preview-create-btn:hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
	color: var(--text-normal);
}

/* ===========================================
   TAG FILTER STYLES
   =========================================== */

.nav-filter {
	display: flex;
	align-items: center;
	gap: 4px;
	margin-left: 8px;
}

.nav-filter-label {
	font-size: 0.85em;
	color: var(--text-muted);
}

.nav-filter-select {
	padding: 2px 6px;
	font-size: 0.85em;
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	background: var(--background-primary);
	max-width: 100px;
}

.verse-tag-filtered {
	background: rgba(16, 185, 129, 0.15) !important;
	border-left: 3px solid #10b981 !important;
}

.verse-tag-dimmed {
	opacity: 0.4;
}

/* ========================================
   NOTES BROWSER - REFLECTIONS HUB
   ======================================== */

.notes-browser {
	display: flex;
	flex-direction: column;
	height: 100%;
	padding: 16px;
	animation: fadeIn 0.2s ease-out;
}

/* Header */
.notes-browser-header {
	margin-bottom: 16px;
}

.notes-header-top {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 8px;
}

.notes-browser-title {
	margin: 0;
	font-size: 1.5em;
	font-weight: 600;
}

.notes-actions {
	display: flex;
	gap: 8px;
}

.notes-action-btn {
	padding: 6px 12px;
	border: 1px solid var(--bp-border);
	border-radius: 6px;
	background: var(--bp-bg-secondary);
	color: var(--bp-text-primary);
	cursor: pointer;
	font-size: 0.9em;
	transition: all 0.15s;
}

.notes-action-btn:hover {
	background: var(--bp-bg-elevated);
	border-color: var(--bp-interactive);
}

.notes-action-btn.active {
	background: var(--bp-interactive);
	color: var(--bp-bg-elevated);
	border-color: var(--bp-interactive);
}

/* Analytics Dashboard */
.notes-analytics-dashboard {
	background: var(--bp-bg-secondary);
	border: 1px solid var(--bp-border);
	border-radius: 8px;
	padding: 16px;
	margin-bottom: 16px;
}

.analytics-loading {
	text-align: center;
	color: var(--bp-text-muted);
	padding: 20px;
}

/* Enhanced Analytics Stats Row */
.analytics-stats-row {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
	gap: 12px;
	margin-bottom: 20px;
}

/* Enhanced Stat Cards */
.analytics-stat-card {
	background: linear-gradient(135deg,
	            var(--bp-bg-elevated) 0%,
	            var(--bp-bg-secondary) 100%);
	border: 1px solid var(--bp-border);
	border-radius: 10px;
	padding: 14px 12px;
	text-align: center;
	position: relative;
	overflow: hidden;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	box-shadow: var(--bp-shadow);
}

.analytics-stat-card:hover {
	transform: translateY(-2px);
	box-shadow: var(--bp-shadow-lg);
	border-color: var(--bp-accent);
}

/* Accent line on hover */
.analytics-stat-card::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	height: 3px;
	background: linear-gradient(90deg,
	            var(--interactive-accent),
	            var(--interactive-accent-hover, var(--interactive-accent)));
	opacity: 0;
	transition: opacity 0.3s ease;
}

.analytics-stat-card:hover::before {
	opacity: 1;
}

.stat-icon {
	font-size: 1.8em;
	margin-bottom: 6px;
	filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
	transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.analytics-stat-card:hover .stat-icon {
	transform: scale(1.1);
}

.stat-value {
	font-size: 1.6em;
	font-weight: 700;
	color: var(--text-normal);
	margin: 2px 0;
	transition: all 0.3s ease;
}

.analytics-stat-card:hover .stat-value {
	color: var(--interactive-accent);
}

.stat-label {
	font-size: 0.75em;
	color: var(--text-muted);
	margin-top: 4px;
	font-weight: 500;
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

/* Charts Row Layout */
.analytics-charts-row {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
	gap: 16px;
	margin-top: 16px;
}

/* Chart Section Cards */
.analytics-chart-section {
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 10px;
	padding: 16px;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.analytics-chart-section:hover {
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
	border-color: var(--background-modifier-border-hover, var(--background-modifier-border));
}

.analytics-chart-section h4 {
	margin: 0 0 14px 0;
	font-size: 0.85em;
	font-weight: 600;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
	padding-bottom: 8px;
	border-bottom: 1px solid var(--background-modifier-border);
}

/* Enhanced Bar Chart */
.analytics-bar-chart {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.bar-row {
	display: flex;
	align-items: center;
	gap: 10px;
	padding: 4px 0;
	border-radius: 6px;
	transition: all 0.2s ease;
}

.bar-row:hover {
	background: var(--background-modifier-hover);
	padding: 4px 8px;
	margin: 0 -8px;
}

.bar-label {
	width: 90px;
	font-size: 0.85em;
	color: var(--text-normal);
	font-weight: 500;
	text-overflow: ellipsis;
	overflow: hidden;
	white-space: nowrap;
	transition: color 0.2s ease;
}

.bar-row:hover .bar-label {
	color: var(--interactive-accent);
}

.bar-container {
	flex: 1;
	height: 18px;
	background: var(--background-modifier-border);
	border-radius: 9px;
	overflow: hidden;
	position: relative;
	box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Animated gradient fill with shimmer */
.bar-fill {
	height: 100%;
	background: linear-gradient(90deg,
	            var(--interactive-accent) 0%,
	            var(--interactive-accent-hover, var(--interactive-accent)) 50%,
	            var(--interactive-accent) 100%);
	background-size: 200% 100%;
	border-radius: 9px;
	transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
	position: relative;
	animation: shimmer 3s ease-in-out infinite;
}

@keyframes shimmer {
	0% { background-position: 200% 0; }
	100% { background-position: -200% 0; }
}

.bar-row:hover .bar-fill {
	animation: none;
	background: linear-gradient(90deg,
	            var(--interactive-accent-hover, var(--interactive-accent)),
	            var(--interactive-accent));
}

/* Glossy overlay effect */
.bar-fill::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	right: 0;
	height: 50%;
	background: linear-gradient(180deg,
	            rgba(255, 255, 255, 0.15) 0%,
	            rgba(255, 255, 255, 0) 100%);
	border-radius: 9px 9px 0 0;
}

.bar-value {
	min-width: 35px;
	text-align: right;
	font-size: 0.85em;
	font-weight: 600;
	color: var(--text-muted);
	transition: color 0.2s ease;
}

.bar-row:hover .bar-value {
	color: var(--text-normal);
}

/* Fade-in animation for analytics content */
@keyframes fadeInUp {
	from {
		opacity: 0;
		transform: translateY(10px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* Staggered animations for cards */
.analytics-stats-row {
	animation: fadeInUp 0.4s ease-out;
}

.analytics-stat-card {
	animation: fadeInUp 0.4s ease-out backwards;
}

.analytics-stat-card:nth-child(1) { animation-delay: 0.05s; }
.analytics-stat-card:nth-child(2) { animation-delay: 0.1s; }
.analytics-stat-card:nth-child(3) { animation-delay: 0.15s; }
.analytics-stat-card:nth-child(4) { animation-delay: 0.2s; }

.analytics-chart-section {
	animation: fadeInUp 0.4s ease-out backwards;
}

.analytics-chart-section:nth-child(1) { animation-delay: 0.25s; }
.analytics-chart-section:nth-child(2) { animation-delay: 0.3s; }

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
	.analytics-chevron,
	.analytics-content,
	.bar-fill,
	.analytics-stat-card,
	.analytics-chart-section,
	.stat-icon {
		transition: none !important;
		animation: none !important;
	}

	.bar-fill {
		background: var(--interactive-accent) !important;
	}
}

/* Top List */
.analytics-top-list {
	display: flex;
	flex-direction: column;
	gap: 6px;
	margin-bottom: 16px;
}

.top-list-item {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 8px 10px;
	background: var(--background-secondary);
	border-radius: 6px;
	transition: all 0.2s ease;
	cursor: pointer;
}

.top-list-item:hover {
	background: var(--background-modifier-hover);
	transform: translateX(4px);
}

.top-rank {
	width: 22px;
	font-weight: 700;
	color: var(--interactive-accent);
	font-size: 0.9em;
}

.top-name {
	flex: 1;
	font-size: 0.9em;
	font-weight: 500;
}

.top-count {
	font-size: 0.8em;
	color: var(--text-muted);
	background: var(--background-primary);
	padding: 2px 8px;
	border-radius: 10px;
}

/* Activity Chart */
.activity-header {
	margin-top: 12px !important;
}

.analytics-activity-chart {
	display: flex;
	justify-content: space-between;
	align-items: flex-end;
	height: 60px;
	gap: 4px;
}

.activity-day {
	flex: 1;
	display: flex;
	flex-direction: column;
	align-items: center;
	height: 100%;
}

.activity-bar {
	width: 100%;
	background: var(--background-modifier-border);
	border-radius: 3px 3px 0 0;
	margin-top: auto;
	transition: height 0.3s ease;
}

.activity-bar.has-activity {
	background: var(--interactive-accent);
}

.activity-label {
	font-size: 0.7em;
	color: var(--text-muted);
	margin-top: 4px;
}

.no-data {
	color: var(--text-muted);
	font-size: 0.9em;
	text-align: center;
	padding: 10px;
}

/* Controls Bar */
.notes-controls-bar {
	display: flex;
	gap: 10px;
	margin-bottom: 16px;
	flex-wrap: wrap;
}

.notes-search-input {
	flex: 1;
	min-width: 200px;
	padding: 8px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	font-size: 0.95em;
}

.notes-search-input:focus {
	outline: none;
	border-color: var(--interactive-accent);
}

.notes-filter-select {
	padding: 8px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	font-size: 0.9em;
	cursor: pointer;
}

/* Main Area (Two-Column Layout) */
.notes-main-area {
	display: flex;
	flex: 1;
	gap: 16px;
	min-height: 0;
	overflow: hidden;
}

.notes-list-panel {
	flex: 1;
	min-width: 300px;
	display: flex;
	flex-direction: column;
	overflow: hidden;
}

.notes-list-container {
	flex: 1;
	overflow-y: auto;
	padding-right: 8px;
}

.notes-preview-panel {
	flex: 1;
	min-width: 350px;
	max-width: 50%;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	overflow: hidden;
	display: flex;
	flex-direction: column;
}

.notes-preview-placeholder {
	display: flex;
	align-items: center;
	justify-content: center;
	height: 100%;
	color: var(--text-muted);
	font-style: italic;
}

.notes-preview-error {
	padding: 20px;
	text-align: center;
	color: var(--text-error);
}

/* Notes List Items */
.notes-count-header {
	font-size: 0.85em;
	color: var(--text-muted);
	margin-bottom: 12px;
	padding-bottom: 8px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.notes-list-item {
	position: relative;
	padding: 12px;
	margin-bottom: 8px;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-left: 4px solid #666;
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.15s;
}

.notes-list-item:hover {
	background: var(--background-modifier-hover);
	transform: translateX(2px);
}

.notes-list-item.selected {
	background: var(--background-modifier-active-hover);
	border-color: var(--interactive-accent);
}

.note-item-content {
	display: flex;
	align-items: center;
	gap: 10px;
}

.note-icon {
	font-size: 1.1em;
}

.note-ref {
	font-weight: 600;
	color: var(--text-normal);
}

.note-type {
	font-size: 0.85em;
	color: var(--text-muted);
	margin-left: auto;
}

/* Pin button */
.note-pin-btn {
	background: none;
	border: none;
	padding: 4px;
	cursor: pointer;
	opacity: 0.3;
	transition: all 0.15s;
	border-radius: 4px;
	display: flex;
	align-items: center;
	justify-content: center;
}

.note-pin-btn:hover {
	opacity: 0.7;
	background: var(--background-modifier-hover);
}

.note-pin-btn.pinned {
	opacity: 1;
	color: var(--interactive-accent);
}

.note-pin-btn.pinned .pin-icon svg {
	transform: rotate(-45deg);
}

.pin-icon {
	display: flex;
	align-items: center;
	justify-content: center;
}

.pin-icon svg {
	width: 14px;
	height: 14px;
	transition: transform 0.2s;
}

/* Pinned note styling */
.notes-list-item.pinned {
	background: var(--background-primary-alt);
	border-left-color: var(--interactive-accent) !important;
}

.notes-list-item.pinned::before {
	content: '';
	position: absolute;
	top: 0;
	right: 0;
	width: 0;
	height: 0;
	border-style: solid;
	border-width: 0 16px 16px 0;
	border-color: transparent var(--interactive-accent) transparent transparent;
	border-radius: 0 6px 0 0;
}

.notes-card-item.pinned {
	border-top-color: var(--interactive-accent) !important;
	box-shadow: 0 0 0 1px var(--interactive-accent);
}

/* Bulk mode styles */
.notes-bulk-actions {
	display: flex;
	gap: 6px;
	align-items: center;
}

.notes-bulk-actions.hidden {
	display: none;
}

.bulk-toggle-btn.active {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
}

.bulk-delete-btn {
	color: var(--text-muted);
}

.bulk-delete-btn:hover {
	color: var(--text-normal);
	background: var(--background-modifier-hover);
}

.bulk-delete-btn.disabled {
	opacity: 0.5;
	pointer-events: none;
}

.bulk-checkbox {
	width: 16px;
	height: 16px;
	cursor: pointer;
	accent-color: var(--interactive-accent);
	flex-shrink: 0;
}

.notes-list-item.bulk-mode {
	cursor: pointer;
}

.notes-list-item.bulk-selected {
	background: color-mix(in srgb, var(--interactive-accent) 15%, var(--background-secondary));
	border-color: var(--interactive-accent);
}

.notes-list-item.bulk-selected:hover {
	background: color-mix(in srgb, var(--interactive-accent) 20%, var(--background-secondary));
}

.notes-empty-state {
	text-align: center;
	color: var(--text-muted);
	padding: 40px 20px;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
}

/* Generic Empty State Styles (used across all browsers) */
.empty-state-icon {
	font-size: 3em;
	margin-bottom: 12px;
	opacity: 0.6;
}

.empty-state-title {
	font-size: 1.2em;
	font-weight: 600;
	margin-bottom: 8px;
	color: var(--text-normal);
}

.empty-state-text {
	font-size: 0.95em;
	color: var(--text-muted);
	max-width: 280px;
}

/* Preview Panel */
.notes-preview-header {
	padding: 16px;
	border-bottom: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
}

.preview-title {
	margin: 0 0 8px 0;
	font-size: 1.2em;
	font-weight: 600;
}

.preview-metadata {
	display: flex;
	gap: 16px;
	margin-bottom: 12px;
	flex-wrap: wrap;
}

.preview-metadata span {
	font-size: 0.85em;
	color: var(--text-muted);
}

.preview-type {
	font-weight: 500;
}

.preview-actions {
	display: flex;
	gap: 8px;
	flex-wrap: wrap;
}

.preview-action-btn {
	padding: 6px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	background: var(--background-secondary);
	color: var(--text-normal);
	font-size: 0.85em;
	cursor: pointer;
	transition: all 0.15s;
}

.preview-action-btn:hover {
	background: var(--background-modifier-hover);
}

.preview-action-btn.danger {
	color: var(--text-muted);
}

.preview-action-btn.danger:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.notes-preview-content {
	flex: 1;
	padding: 16px;
	overflow-y: auto;
	line-height: 1.6;
}

.notes-preview-content h1,
.notes-preview-content h2,
.notes-preview-content h3 {
	margin-top: 0;
}

.notes-preview-content p:first-child {
	margin-top: 0;
}

/* Search Wrapper with Content Toggle */
.notes-search-wrapper {
	display: flex;
	align-items: center;
	gap: 12px;
	flex: 1;
	min-width: 250px;
}

.notes-search-wrapper .notes-search-input {
	flex: 1;
}

.content-search-label {
	display: flex;
	align-items: center;
	gap: 4px;
	font-size: 0.85em;
	color: var(--text-muted);
	cursor: pointer;
	white-space: nowrap;
}

.content-search-checkbox {
	cursor: pointer;
}

.notes-searching {
	text-align: center;
	color: var(--text-muted);
	padding: 20px;
	font-style: italic;
}

/* Related Notes Section */
.notes-related-section {
	padding: 16px;
	border-top: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
}

.related-title {
	margin: 0 0 12px 0;
	font-size: 0.95em;
	font-weight: 600;
	color: var(--text-muted);
}

.related-list {
	display: flex;
	flex-wrap: wrap;
	gap: 8px;
}

.related-item {
	padding: 6px 12px;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 16px;
	font-size: 0.85em;
	color: var(--text-accent);
	cursor: pointer;
	transition: all 0.15s;
}

.related-item:hover {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
}

/* ========================================
   PHASE 5: VISUAL VIEWS
   ======================================== */

/* View Toggle Buttons */
.notes-view-toggle {
	display: flex;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	overflow: hidden;
}

.view-toggle-btn {
	padding: 6px 12px;
	border: none;
	background: var(--background-primary);
	color: var(--text-muted);
	cursor: pointer;
	font-size: 1em;
	transition: all 0.15s;
	border-right: 1px solid var(--background-modifier-border);
}

.view-toggle-btn:last-child {
	border-right: none;
}

.view-toggle-btn:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.view-toggle-btn.active {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
}

/* ===== CARD VIEW ===== */
.notes-cards-grid {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
	gap: 16px;
	padding: 8px 0;
}

.notes-card-item {
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-top: 4px solid #666;
	border-radius: 8px;
	padding: 16px;
	cursor: pointer;
	transition: all 0.15s;
	display: flex;
	flex-direction: column;
	min-height: 140px;
}

.notes-card-item:hover {
	transform: translateY(-2px);
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.notes-card-item.selected {
	border-color: var(--interactive-accent);
	box-shadow: 0 0 0 2px var(--interactive-accent);
}

.card-header {
	display: flex;
	align-items: center;
	gap: 8px;
	margin-bottom: 12px;
}

.card-icon {
	font-size: 1.2em;
}

.card-ref {
	font-weight: 600;
	color: var(--text-normal);
	font-size: 0.95em;
}

.card-content-preview {
	flex: 1;
	font-size: 0.85em;
	color: var(--text-muted);
	line-height: 1.5;
	overflow: hidden;
	display: -webkit-box;
	-webkit-line-clamp: 4;
	-webkit-box-orient: vertical;
}

.card-footer {
	margin-top: 12px;
	padding-top: 8px;
	border-top: 1px solid var(--background-modifier-border);
}

.card-type {
	font-size: 0.8em;
	color: var(--text-muted);
}

/* ===== TIMELINE VIEW ===== */
.notes-timeline {
	padding: 8px 0;
}

.timeline-date-group {
	margin-bottom: 20px;
	position: relative;
	padding-left: 20px;
}

.timeline-date-group::before {
	content: '';
	position: absolute;
	left: 6px;
	top: 24px;
	bottom: 0;
	width: 2px;
	background: var(--background-modifier-border);
}

.timeline-date-label {
	font-weight: 600;
	font-size: 0.95em;
	color: var(--text-accent);
	margin-bottom: 12px;
	position: relative;
}

.timeline-date-label::before {
	content: '';
	position: absolute;
	left: -17px;
	top: 50%;
	transform: translateY(-50%);
	width: 10px;
	height: 10px;
	background: var(--interactive-accent);
	border-radius: 50%;
}

.timeline-notes {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.timeline-note-item {
	display: flex;
	align-items: center;
	gap: 10px;
	padding: 10px 14px;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.15s;
}

.timeline-note-item:hover {
	background: var(--background-modifier-hover);
	transform: translateX(4px);
}

.timeline-note-item.selected {
	background: var(--background-modifier-active-hover);
	border-color: var(--interactive-accent);
}

.timeline-icon {
	font-size: 1em;
}

.timeline-ref {
	font-weight: 500;
	color: var(--text-normal);
}

/* ===== HEATMAP VIEW ===== */
.notes-heatmap {
	padding: 16px 0;
}

.heatmap-title {
	font-size: 0.9em;
	color: var(--text-muted);
	margin-bottom: 16px;
	text-align: center;
}

.heatmap-section {
	margin-bottom: 24px;
}

.heatmap-section-label {
	font-weight: 600;
	font-size: 0.85em;
	color: var(--text-muted);
	margin-bottom: 10px;
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.heatmap-grid {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(40px, 1fr));
	gap: 4px;
}

.heatmap-cell {
	aspect-ratio: 1;
	display: flex;
	align-items: center;
	justify-content: center;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	font-size: 0.7em;
	font-weight: 500;
	color: var(--text-muted);
	cursor: pointer;
	transition: all 0.15s;
}

.heatmap-cell:hover {
	transform: scale(1.1);
	z-index: 1;
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

/* ========================================
   HIGHLIGHTS BROWSER (Enhanced)
   ======================================== */

.highlights-browser {
	display: flex;
	flex-direction: column;
	height: 100%;
	padding: 16px;
	animation: fadeIn 0.2s ease-out;
}

/* Analytics Dashboard */
.highlights-analytics-dashboard {
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	padding: 16px;
	margin-bottom: 16px;
}

.analytics-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 16px;
}

/* Analytics Toggle Button - Animated Chevron */
.analytics-toggle-btn {
	padding: 8px;
	border: none;
	border-radius: 6px;
	background: transparent;
	color: var(--text-muted);
	cursor: pointer;
	transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
	display: flex;
	align-items: center;
	justify-content: center;
}

.analytics-toggle-btn:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.analytics-toggle-btn:active {
	transform: scale(0.95);
}

/* Chevron SVG Animation */
.analytics-chevron {
	transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	transform-origin: center;
}

.analytics-toggle-btn.collapsed .analytics-chevron {
	transform: rotate(-90deg);
}

/* Smooth Content Collapse */
.analytics-content {
	margin-top: 12px;
	transition: max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1),
	            opacity 0.2s ease-out,
	            margin-top 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	overflow: hidden;
	opacity: 1;
}

.analytics-content.collapsed {
	max-height: 0 !important;
	margin-top: 0;
	opacity: 0;
}

.analytics-section {
	margin-bottom: 20px;
}

.analytics-section h4 {
	margin: 0 0 12px 0;
	font-size: 0.95em;
	font-weight: 600;
	color: var(--text-normal);
}

/* Hot Spots List */
.hot-spots-list {
	display: flex;
	flex-direction: column;
	gap: 6px;
	max-width: 280px;
}

.hot-spot-item {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 8px 12px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.15s;
}

.hot-spot-item:hover {
	background: var(--background-modifier-hover);
	transform: translateX(4px);
}

.hot-spot-chapter {
	font-size: 0.9em;
	color: var(--text-normal);
	font-weight: 500;
}

.hot-spot-count {
	font-size: 0.85em;
	color: var(--text-muted);
	font-weight: 600;
}

/* Color Distribution Cards */
.color-distribution-cards {
	display: flex;
	flex-wrap: wrap;
	gap: 10px;
}

.color-card {
	background: linear-gradient(135deg,
	            var(--background-primary) 0%,
	            var(--background-secondary) 100%);
	border: 1px solid var(--background-modifier-border);
	border-radius: 10px;
	padding: 10px 12px;
	display: flex;
	align-items: center;
	gap: 10px;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	cursor: pointer;
	position: relative;
	overflow: hidden;
	flex: 0 0 auto;
	animation: fadeIn 0.4s ease-out backwards;
}

.color-card:nth-child(1) { animation-delay: 0.1s; }
.color-card:nth-child(2) { animation-delay: 0.15s; }
.color-card:nth-child(3) { animation-delay: 0.2s; }
.color-card:nth-child(4) { animation-delay: 0.25s; }
.color-card:nth-child(5) { animation-delay: 0.3s; }
.color-card:nth-child(6) { animation-delay: 0.35s; }

.color-card::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	width: 4px;
	height: 100%;
	background: var(--card-color, var(--interactive-accent));
	opacity: 0.7;
	transition: all 0.3s ease;
}

.color-card:hover {
	transform: translateY(-2px);
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
	border-color: var(--card-color, var(--interactive-accent));
}

.color-card:hover::before {
	width: 6px;
	opacity: 1;
}

.color-card-swatch {
	width: 28px;
	height: 28px;
	border-radius: 6px;
	flex-shrink: 0;
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2),
	            inset 0 1px 0 rgba(255, 255, 255, 0.2);
	transition: transform 0.3s ease;
}

.color-card:hover .color-card-swatch {
	transform: scale(1.1);
}

.color-card-info {
	flex: 1;
	min-width: 0;
}

.color-card-name {
	font-weight: 600;
	font-size: 0.9em;
	color: var(--text-normal);
	margin-bottom: 2px;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.color-card-count {
	font-size: 0.8em;
	color: var(--text-muted);
}

/* Layer Distribution Cards */
.layer-distribution-cards {
	display: flex;
	flex-wrap: wrap;
	gap: 10px;
}

.layer-card {
	background: linear-gradient(135deg,
	            var(--background-primary) 0%,
	            var(--background-secondary) 100%);
	border: 1px solid var(--background-modifier-border);
	border-radius: 10px;
	padding: 10px 12px;
	display: flex;
	align-items: center;
	gap: 10px;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	cursor: pointer;
	position: relative;
	overflow: hidden;
	flex: 0 0 auto;
	animation: fadeIn 0.4s ease-out backwards;
}

.layer-card:nth-child(1) { animation-delay: 0.1s; }
.layer-card:nth-child(2) { animation-delay: 0.15s; }
.layer-card:nth-child(3) { animation-delay: 0.2s; }
.layer-card:nth-child(4) { animation-delay: 0.25s; }

.layer-card::before {
	content: '';
	position: absolute;
	top: 0;
	left: 0;
	width: 4px;
	height: 100%;
	background: var(--layer-color, var(--interactive-accent));
	opacity: 0.7;
	transition: all 0.3s ease;
}

.layer-card:hover {
	transform: translateY(-2px);
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
	border-color: var(--layer-color, var(--interactive-accent));
}

.layer-card:hover::before {
	width: 6px;
	opacity: 1;
}

.layer-card-badge {
	width: 28px;
	height: 28px;
	border-radius: 50%;
	flex-shrink: 0;
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2),
	            inset 0 1px 0 rgba(255, 255, 255, 0.2);
	transition: transform 0.3s ease;
}

.layer-card:hover .layer-card-badge {
	transform: scale(1.1);
}

.layer-card-info {
	flex: 1;
	min-width: 0;
}

.layer-card-name {
	font-weight: 600;
	font-size: 0.9em;
	color: var(--text-normal);
	margin-bottom: 2px;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.layer-card-count {
	font-size: 0.8em;
	color: var(--text-muted);
}

/* Active state for cards when filtered */
.color-card.active,
.layer-card.active {
	border-color: var(--interactive-accent);
	box-shadow: 0 0 0 2px var(--interactive-accent-hover),
	            0 4px 12px rgba(0, 0, 0, 0.15);
	transform: translateY(-2px);
	animation: fadeIn 0.3s ease-out, pulse 2s ease-in-out infinite;
}

.color-card.active::before,
.layer-card.active::before {
	width: 6px;
	opacity: 1;
	background: var(--interactive-accent);
}

/* Analytics Section Headers */
.analytics-section-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-bottom: 12px;
}

.analytics-section-header h4 {
	margin: 0;
	font-size: 1em;
	font-weight: 600;
	color: var(--text-normal);
}

.analytics-section-hint {
	font-size: 0.75em;
	color: var(--text-muted);
	font-style: italic;
	padding: 2px 8px;
	background: var(--background-modifier-form-field);
	border-radius: 12px;
	transition: all 0.2s ease;
}

.analytics-section-hint:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

/* Layer Section (Group by Layer view) */
.layer-section {
	margin-bottom: 24px;
}

.layer-section-header {
	display: flex;
	align-items: center;
	gap: 12px;
	padding: 12px 16px;
	background: var(--background-primary);
	border-radius: 8px;
	margin-bottom: 12px;
	position: relative;
}

.layer-section-badge {
	width: 32px;
	height: 32px;
	border-radius: 50%;
	flex-shrink: 0;
	box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2),
	            inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.layer-section-info {
	flex: 1;
}

.layer-section-title {
	margin: 0;
	font-size: 1.1em;
	font-weight: 600;
	color: var(--text-normal);
}

.layer-section-count {
	margin-top: 2px;
	font-size: 0.85em;
	color: var(--text-muted);
	font-weight: 500;
}

.layer-highlights-list {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

/* ===== MICRO-INTERACTIONS & ANIMATIONS ===== */

@keyframes fadeIn {
	from {
		opacity: 0;
		transform: translateY(8px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes slideInRight {
	from {
		opacity: 0;
		transform: translateX(-12px);
	}
	to {
		opacity: 1;
		transform: translateX(0);
	}
}

@keyframes pulse {
	0%, 100% {
		opacity: 1;
	}
	50% {
		opacity: 0.7;
	}
}

@keyframes ripple {
	0% {
		transform: scale(0);
		opacity: 0.6;
	}
	100% {
		transform: scale(2);
		opacity: 0;
	}
}

/* Staggered list animations */
.highlight-item,
.highlight-list-item,
.notes-card {
	animation: fadeIn 0.3s ease-out backwards;
}

.highlight-item:nth-child(1),
.highlight-list-item:nth-child(1) { animation-delay: 0.05s; }
.highlight-item:nth-child(2),
.highlight-list-item:nth-child(2) { animation-delay: 0.1s; }
.highlight-item:nth-child(3),
.highlight-list-item:nth-child(3) { animation-delay: 0.15s; }
.highlight-item:nth-child(4),
.highlight-list-item:nth-child(4) { animation-delay: 0.2s; }
.highlight-item:nth-child(5),
.highlight-list-item:nth-child(5) { animation-delay: 0.25s; }

/* ===== TWO-TIER CONTROLS SYSTEM ===== */

/* Primary Controls Bar */
.highlights-primary-controls {
	display: flex;
	gap: 12px;
	margin-bottom: 12px;
	align-items: center;
	flex-wrap: wrap;
	animation: slideIn 0.3s ease-out;
}

/* Active Filters Bar */
.highlights-active-filters {
	display: flex;
	gap: 8px;
	margin-bottom: 12px;
	flex-wrap: wrap;
	align-items: center;
	padding: 8px 12px;
	background: var(--background-modifier-form-field);
	border-radius: 8px;
	animation: slideIn 0.2s ease-out;
}

@keyframes slideIn {
	from {
		opacity: 0;
		transform: translateY(-4px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* Filter Chips */
.filter-chip {
	display: inline-flex;
	align-items: center;
	gap: 6px;
	padding: 4px 8px 4px 10px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-radius: 16px;
	font-size: 0.85em;
	font-weight: 500;
	transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
	cursor: default;
	animation: slideIn 0.3s ease-out;
}

.filter-chip:hover {
	transform: translateY(-1px);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.filter-chip-color-dot {
	width: 12px;
	height: 12px;
	border-radius: 50%;
	flex-shrink: 0;
	border: 1.5px solid rgba(255, 255, 255, 0.5);
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.filter-chip-label {
	flex: 1;
	white-space: nowrap;
}

.filter-chip-dismiss {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 16px;
	height: 16px;
	border-radius: 50%;
	background: rgba(255, 255, 255, 0.2);
	cursor: pointer;
	transition: all 0.15s ease;
	font-size: 0.9em;
	line-height: 1;
}

.filter-chip-dismiss:hover {
	background: rgba(255, 255, 255, 0.4);
	transform: scale(1.1);
}

.filter-chip-clear-all {
	padding: 4px 12px;
	background: var(--background-modifier-error);
	color: var(--text-on-accent);
	border: none;
	border-radius: 16px;
	font-size: 0.85em;
	font-weight: 600;
	cursor: pointer;
	transition: all 0.15s ease;
}

.filter-chip-clear-all:hover {
	background: var(--text-error);
	transform: translateY(-1px);
}

/* Secondary Controls Bar */
.highlights-secondary-controls {
	display: flex;
	gap: 8px;
	margin-bottom: 16px;
	flex-wrap: wrap;
	align-items: center;
}

.highlights-search-input {
	flex: 1;
	min-width: 200px;
	padding: 8px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 0.9em;
}

.highlights-search-input::placeholder {
	color: var(--text-muted);
}

.highlights-color-select,
.highlights-book-select {
	padding: 8px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 0.9em;
	cursor: pointer;
}

.highlights-view-toggle {
	display: flex;
	gap: 4px;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: var(--bp-radius-md);
	padding: 6px;
	box-shadow: var(--bp-shadow-sm);
}

.highlights-view-toggle button {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	gap: 6px;
	padding: 14px 20px;
	min-height: 70px;
	border: 1px solid transparent;
	border-radius: var(--bp-radius-md);
	background: var(--background-primary);
	color: var(--text-muted);
	cursor: pointer;
	font-family: inherit;
	transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
	position: relative;
}

.view-toggle-icon {
	font-size: 1.5em;
	line-height: 1;
}

.view-toggle-label {
	font-size: 0.75em;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.highlights-view-toggle button.active {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	box-shadow: var(--bp-shadow-md);
	border-color: var(--interactive-accent);
}

.highlights-view-toggle button.active::after {
	content: '';
	position: absolute;
	bottom: 4px;
	left: 50%;
	transform: translateX(-50%);
	width: 20px;
	height: 3px;
	background: var(--text-on-accent);
	border-radius: 2px;
	opacity: 0.7;
}

.highlights-view-toggle button:hover:not(.active) {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
	transform: translateY(-2px);
}

.highlights-random-btn {
	padding: 8px 16px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-secondary);
	color: var(--text-normal);
	cursor: pointer;
	font-size: 0.9em;
	transition: all 0.15s;
}

.highlights-random-btn:hover {
	background: var(--background-modifier-hover);
}

/* Actions */
.highlights-actions {
	display: flex;
	gap: 8px;
}

.highlights-action-btn {
	padding: 6px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-secondary);
	color: var(--text-normal);
	cursor: pointer;
	font-size: 0.9em;
	transition: all 0.15s;
}

.highlights-action-btn:hover {
	background: var(--background-modifier-hover);
}

.highlights-action-btn.danger {
	background: var(--background-secondary);
	color: var(--text-muted);
	border-color: var(--background-modifier-border);
}

.highlights-action-btn.danger:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

/* Main Area - Two Column Layout */
.highlights-main-area {
	display: flex;
	gap: 16px;
	flex: 1;
	min-height: 0;
}

.highlights-list-panel {
	flex: 0 0 60%;
	overflow-y: auto;
	padding-right: 8px;
}

.highlights-preview-panel {
	flex: 0 0 40%;
	position: sticky;
	top: 0;
	align-self: flex-start;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	padding: 16px;
	max-height: calc(100vh - 300px);
	overflow-y: auto;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	animation: slideInRight 0.4s ease-out;
}

.highlights-preview-panel:hover {
	box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
}

/* No Data State */
.highlights-no-data {
	text-align: center;
	padding: 60px 20px;
	color: var(--text-muted);
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	animation: fadeIn 0.5s ease-out;
}

.empty-state-icon {
	animation: pulse 2s ease-in-out infinite;
}

.highlights-no-data-icon {
	font-size: 3em;
	margin-bottom: 16px;
	opacity: 0.5;
}

.highlights-no-data-text {
	font-size: 1.1em;
}

/* List View */
.highlights-book-section {
	margin-bottom: 24px;
}

.highlights-book-title {
	font-size: 1.1em;
	font-weight: 600;
	color: var(--text-normal);
	margin-bottom: 12px;
	padding-bottom: 8px;
	border-bottom: 2px solid var(--background-modifier-border);
}

.highlights-list {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.highlight-list-item {
	padding: 12px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-left: 4px solid;
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.15s;
}

.highlight-list-item:hover {
	background: var(--background-modifier-hover);
	transform: translateX(4px);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.highlight-list-item.selected {
	background: var(--background-modifier-hover);
	border-right: 3px solid var(--interactive-accent);
}

.highlight-ref {
	font-weight: 600;
	color: var(--text-accent);
	margin-bottom: 6px;
	font-size: 0.9em;
}

.highlight-text-snippet {
	color: var(--text-normal);
	font-size: 0.95em;
	line-height: 1.5;
}

/* Cards Grid View */
.highlights-cards-grid {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
	gap: 16px;
}

.highlight-card {
	padding: 16px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-top: 4px solid;
	border-radius: 8px;
	cursor: pointer;
	transition: all 0.2s;
}

.highlight-card:hover {
	transform: translateY(-4px);
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.highlight-card.selected {
	background: var(--background-modifier-hover);
	box-shadow: 0 0 0 2px var(--interactive-accent);
}

.highlight-card-ref {
	font-weight: 600;
	color: var(--text-accent);
	margin-bottom: 8px;
	font-size: 0.95em;
}

.highlight-card-text {
	color: var(--text-normal);
	font-size: 0.95em;
	line-height: 1.6;
}

/* Heatmap View */
.highlights-heatmap-container {
	padding: 16px;
}

.highlights-heatmap-grid {
	display: grid;
	grid-template-columns: repeat(11, 1fr);
	gap: 4px;
	margin-top: 16px;
}

/* Preview Panel */
.preview-placeholder {
	text-align: center;
	color: var(--text-muted);
	padding: 40px 20px;
}

.preview-placeholder-icon {
	font-size: 2.5em;
	margin-bottom: 12px;
	opacity: 0.4;
}

.preview-placeholder-text {
	font-size: 0.95em;
}

.preview-header {
	display: flex;
	align-items: center;
	gap: 12px;
	margin-bottom: 16px;
	padding-bottom: 12px;
	border-bottom: 1px solid var(--background-modifier-border);
}

/* Inline Color Picker */
.preview-color-picker {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 6px 12px;
	background: var(--background-modifier-form-field);
	border-radius: 20px;
	cursor: pointer;
	transition: all 0.2s ease;
	margin-left: auto;
}

.preview-color-picker:hover {
	background: var(--background-modifier-hover);
	transform: translateY(-1px);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.preview-color-indicator {
	width: 18px;
	height: 18px;
	border-radius: 50%;
	flex-shrink: 0;
	box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2),
	            inset 0 1px 0 rgba(255, 255, 255, 0.3);
	transition: transform 0.2s ease;
}

.preview-color-picker:hover .preview-color-indicator {
	transform: scale(1.15);
}

.preview-color-label {
	font-size: 0.85em;
	font-weight: 600;
	color: var(--text-normal);
	text-transform: capitalize;
}

.preview-header h3 {
	margin: 0;
	font-size: 1.1em;
	color: var(--text-normal);
}

.preview-highlighted-text {
	background: var(--background-secondary);
	border-radius: 6px;
	padding: 16px;
	margin-bottom: 16px;
	font-size: 1.05em;
	line-height: 1.8;
	color: var(--text-normal);
}

.preview-context {
	margin-top: 16px;
}

.preview-context h4 {
	margin: 0 0 8px 0;
	font-size: 0.85em;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.preview-verse-text {
	color: var(--text-muted);
	font-size: 0.9em;
	line-height: 1.6;
	font-style: italic;
}

.preview-actions {
	display: flex;
	gap: 8px;
	margin-top: 16px;
	padding-top: 16px;
	border-top: 1px solid var(--background-modifier-border);
}

.preview-action-btn {
	flex: 1;
	padding: 8px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	color: var(--text-normal);
	cursor: pointer;
	font-size: 0.85em;
	transition: all 0.15s;
}

.preview-action-btn:hover {
	background: var(--background-modifier-hover);
}

.preview-action-btn.primary {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
	font-weight: 600;
}

.preview-action-btn.primary:hover {
	background: var(--interactive-accent-hover);
	border-color: var(--interactive-accent-hover);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

/* Related Highlights Section */
.preview-related-section {
	margin-top: 20px;
	padding-top: 16px;
	border-top: 1px solid var(--background-modifier-border);
}

.preview-related-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-bottom: 12px;
}

.preview-related-header h4 {
	margin: 0;
	font-size: 0.85em;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
	font-weight: 600;
}

.preview-related-count {
	font-size: 0.75em;
	color: var(--text-muted);
	font-style: italic;
	padding: 2px 8px;
	background: var(--background-modifier-form-field);
	border-radius: 10px;
}

.preview-related-list {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.preview-related-item {
	display: flex;
	align-items: flex-start;
	gap: 10px;
	padding: 10px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	animation: fadeIn 0.3s ease-out backwards;
}

.preview-related-item:nth-child(1) { animation-delay: 0.05s; }
.preview-related-item:nth-child(2) { animation-delay: 0.1s; }
.preview-related-item:nth-child(3) { animation-delay: 0.15s; }
.preview-related-item:nth-child(4) { animation-delay: 0.2s; }
.preview-related-item:nth-child(5) { animation-delay: 0.25s; }

.preview-related-item:hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
	transform: translateX(4px);
}

.preview-related-dot {
	width: 10px;
	height: 10px;
	border-radius: 50%;
	flex-shrink: 0;
	margin-top: 4px;
	box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.preview-related-ref {
	font-size: 0.85em;
	font-weight: 600;
	color: var(--text-normal);
	flex-shrink: 0;
	min-width: 100px;
}

.preview-related-text {
	font-size: 0.8em;
	color: var(--text-muted);
	line-height: 1.4;
	flex: 1;
}

.preview-related-more {
	text-align: center;
	font-size: 0.8em;
	color: var(--text-muted);
	font-style: italic;
	padding: 8px;
}

/* Keyboard Hints */
.preview-keyboard-hints {
	display: flex;
	gap: 12px;
	margin-top: 16px;
	padding-top: 12px;
	border-top: 1px dashed var(--background-modifier-border);
	justify-content: center;
	flex-wrap: wrap;
}

.keyboard-hint {
	display: inline-flex;
	align-items: center;
	gap: 6px;
	font-size: 0.75em;
	color: var(--text-muted);
}

.keyboard-hint kbd {
	display: inline-block;
	padding: 2px 6px;
	background: var(--background-modifier-form-field);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	font-family: var(--font-monospace);
	font-size: 0.9em;
	font-weight: 600;
	color: var(--text-normal);
	box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* ========================================
   BOOKMARKS BROWSER (Enhanced)
   ======================================== */

.bookmarks-browser {
	display: flex;
	flex-direction: column;
	height: 100%;
	padding: 16px;
	animation: fadeIn 0.2s ease-out;
}

/* Analytics Dashboard */
.bookmarks-analytics-dashboard {
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	padding: 16px;
	margin-bottom: 16px;
}

/* Controls Bar */
.bookmarks-controls-bar {
	display: flex;
	gap: 8px;
	margin-bottom: 16px;
	flex-wrap: wrap;
	align-items: center;
}

.bookmarks-search-input {
	flex: 1;
	min-width: 200px;
	padding: 8px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 0.9em;
}

.bookmarks-search-input::placeholder {
	color: var(--text-muted);
}

.bookmarks-level-select,
.bookmarks-book-select {
	padding: 8px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 0.9em;
	cursor: pointer;
}

.bookmarks-view-toggle {
	display: flex;
	gap: 4px;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	padding: 2px;
}

.bookmarks-view-toggle button {
	padding: 6px 12px;
	border: none;
	border-radius: 4px;
	background: transparent;
	color: var(--text-muted);
	cursor: pointer;
	font-size: 0.85em;
	transition: all 0.15s;
}

.bookmarks-view-toggle button.active {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
}

.bookmarks-view-toggle button:hover:not(.active) {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.bookmarks-random-btn {
	padding: 8px 16px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-secondary);
	color: var(--text-normal);
	cursor: pointer;
	font-size: 0.9em;
	transition: all 0.15s;
}

.bookmarks-random-btn:hover {
	background: var(--background-modifier-hover);
}

/* Actions */
.bookmarks-actions {
	display: flex;
	gap: 8px;
}

.bookmarks-action-btn {
	padding: 6px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-secondary);
	color: var(--text-normal);
	cursor: pointer;
	font-size: 0.9em;
	transition: all 0.15s;
}

.bookmarks-action-btn:hover {
	background: var(--background-modifier-hover);
}

.bookmarks-action-btn.danger {
	background: var(--background-secondary);
	color: var(--text-muted);
	border-color: var(--background-modifier-border);
}

.bookmarks-action-btn.danger:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

/* Main Area - Two Column Layout */
.bookmarks-main-area {
	display: flex;
	gap: 16px;
	flex: 1;
	min-height: 0;
}

.bookmarks-list-panel {
	flex: 0 0 60%;
	overflow-y: auto;
	padding-right: 8px;
}

.bookmarks-preview-panel {
	flex: 0 0 40%;
	position: sticky;
	top: 0;
	align-self: flex-start;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	padding: 16px;
	max-height: calc(100vh - 300px);
	overflow-y: auto;
	transition: all 0.2s ease-out;
}

/* No Data State */
.bookmarks-no-data {
	text-align: center;
	padding: 60px 20px;
	color: var(--text-muted);
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
}

.bookmarks-no-data-icon {
	font-size: 3em;
	margin-bottom: 16px;
	opacity: 0.5;
}

.bookmarks-no-data-text {
	font-size: 1.1em;
}

/* Level Section */
.bookmarks-level-section {
	margin-bottom: 24px;
}

.bookmarks-level-title {
	font-size: 1.1em;
	font-weight: 600;
	color: var(--text-normal);
	margin-bottom: 12px;
	padding-bottom: 8px;
	border-bottom: 2px solid var(--background-modifier-border);
	display: flex;
	align-items: center;
	gap: 8px;
}

.bookmarks-list {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.bookmark-list-item {
	padding: 12px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.15s;
	display: flex;
	align-items: flex-start;
	gap: 12px;
}

.bookmark-list-item:hover {
	background: var(--background-modifier-hover);
	transform: translateX(4px);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.bookmark-list-item.selected {
	background: var(--background-modifier-hover);
	border-right: 3px solid var(--interactive-accent);
}

.bookmark-icon {
	font-size: 1.2em;
	color: var(--text-accent);
	flex-shrink: 0;
}

.bookmark-content {
	flex: 1;
}

.bookmark-ref {
	font-weight: 600;
	color: var(--text-accent);
	margin-bottom: 4px;
	font-size: 0.9em;
}

.bookmark-note-snippet {
	color: var(--text-muted);
	font-size: 0.85em;
	line-height: 1.4;
	font-style: italic;
}

/* Bookmark Name Display */
.bookmark-display {
	display: flex;
	flex-direction: column;
	gap: 2px;
	flex: 1;
}

.bookmark-name {
	font-weight: 600;
	color: var(--text-normal);
	font-size: 0.95em;
}

.bookmark-ref-small {
	font-size: 0.8em;
	color: var(--text-muted);
}

/* Bookmark Name Modal */
.bookmark-name-modal .modal-content {
	padding: 20px;
}

.bookmark-name-modal .modal-title {
	margin-bottom: 16px;
}

.bookmark-name-input {
	width: 100%;
	padding: 10px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 1em;
	margin-bottom: 16px;
}

.bookmark-name-input:focus {
	outline: none;
	border-color: var(--interactive-accent);
	box-shadow: 0 0 0 2px var(--interactive-accent-hover);
}

.bookmark-modal-hint {
	font-size: 0.85em;
	color: var(--text-muted);
	margin-bottom: 16px;
}

.bookmark-modal-buttons {
	display: flex;
	gap: 12px;
	justify-content: flex-end;
}

.bookmark-modal-btn {
	padding: 8px 16px;
	border-radius: 6px;
	cursor: pointer;
	font-size: 0.9em;
	transition: all 0.15s;
}

.bookmark-modal-btn.cancel {
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	color: var(--text-muted);
}

.bookmark-modal-btn.cancel:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.bookmark-modal-btn.save {
	background: var(--interactive-accent);
	border: 1px solid var(--interactive-accent);
	color: white;
}

.bookmark-modal-btn.save:hover {
	background: var(--interactive-accent-hover);
}

/* Preview Panel Reference */
.preview-reference {
	font-size: 0.9em;
	color: var(--text-muted);
	margin-top: 4px;
}

/* Bookmark Context Menu */
.bookmark-context-menu {
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
	min-width: 150px;
	padding: 6px;
	z-index: 1000;
}

.context-menu-item {
	padding: 8px 12px;
	border-radius: 4px;
	cursor: pointer;
	font-size: 0.9em;
	color: var(--text-normal);
	transition: all 0.1s;
}

.context-menu-item:hover {
	background: var(--background-modifier-hover);
}

.context-menu-item.danger {
	color: var(--text-normal);
}

.context-menu-item.danger:hover {
	background: var(--background-modifier-hover);
}

/* Timeline View */
.bookmarks-timeline {
	padding: 16px;
}

.timeline-date-group {
	margin-bottom: 24px;
}

.timeline-date {
	font-size: 1em;
	font-weight: 600;
	color: var(--text-normal);
	margin-bottom: 12px;
	padding-bottom: 8px;
	border-bottom: 2px solid var(--background-modifier-border);
}

.timeline-item {
	display: flex;
	gap: 16px;
	padding: 12px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	margin-bottom: 8px;
	cursor: pointer;
	transition: all 0.15s;
}

.timeline-item:hover {
	background: var(--background-modifier-hover);
	transform: translateX(4px);
}

.timeline-item.selected {
	background: var(--background-modifier-hover);
	border-left: 3px solid var(--interactive-accent);
}

.timeline-time {
	font-size: 0.8em;
	color: var(--text-muted);
	width: 60px;
	flex-shrink: 0;
}

/* Heatmap View */
.bookmarks-heatmap-container {
	padding: 16px;
}

.bookmarks-heatmap-grid {
	display: grid;
	grid-template-columns: repeat(11, 1fr);
	gap: 4px;
	margin-top: 16px;
}

/* Preview Panel */
.preview-level-badge {
	display: inline-block;
	padding: 4px 10px;
	border-radius: 12px;
	font-size: 0.75em;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	background: var(--background-modifier-border);
	color: var(--text-muted);
}

.preview-note {
	margin: 16px 0;
	padding: 12px;
	background: var(--background-primary);
	border-radius: 6px;
	border-left: 3px solid var(--text-accent);
}

.preview-note h4 {
	margin: 0 0 8px 0;
	font-size: 0.85em;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.preview-note-text {
	color: var(--text-normal);
	font-size: 0.9em;
	line-height: 1.6;
	font-style: italic;
}

.preview-verse {
	margin-top: 16px;
	padding: 12px;
	background: var(--background-secondary);
	border-radius: 6px;
}

.preview-verse h4 {
	margin: 0 0 8px 0;
	font-size: 0.85em;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.preview-meta {
	display: flex;
	flex-wrap: wrap;
	gap: 16px;
	margin-top: 16px;
	padding-top: 16px;
	border-top: 1px solid var(--background-modifier-border);
}

.preview-meta-item {
	display: flex;
	flex-direction: column;
	gap: 4px;
}

.preview-meta-item label {
	font-size: 0.75em;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.preview-meta-item span {
	font-size: 0.9em;
	color: var(--text-normal);
	font-weight: 500;
}

/* Continue Reading */
.continue-reading {
	margin-top: 16px;
	padding-top: 16px;
	border-top: 1px solid var(--background-modifier-border);
}

.continue-reading h4 {
	margin: 0 0 8px 0;
	font-size: 0.85em;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.continue-reading-btn {
	width: 100%;
	padding: 10px 16px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	cursor: pointer;
	font-size: 0.9em;
	font-weight: 500;
	transition: all 0.15s;
}

.continue-reading-btn:hover {
	background: var(--interactive-accent-hover);
	transform: translateY(-2px);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

/* Level Distribution Bar */
.level-distribution-bar {
	margin-bottom: 16px;
}

.level-bar-item {
	display: flex;
	align-items: center;
	gap: 8px;
	margin-bottom: 8px;
}

.level-bar {
	flex: 1;
	height: 20px;
	border-radius: 4px;
	background: var(--interactive-accent);
	transition: all 0.2s;
}

.level-bar-label {
	width: 60px;
	text-align: right;
	font-size: 0.85em;
	color: var(--text-muted);
	font-weight: 600;
}

/* ========================================
   TAGS BROWSER (Enhanced)
   ======================================== */

.tags-browser {
	display: flex;
	flex-direction: column;
	height: 100%;
	padding: 16px;
	animation: fadeIn 0.2s ease-out;
}

/* Analytics Dashboard */
.tags-analytics-dashboard {
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	padding: 16px;
	margin-bottom: 16px;
}

/* Controls Bar */
.tags-controls-bar {
	display: flex;
	gap: 8px;
	margin-bottom: 16px;
	flex-wrap: wrap;
	align-items: center;
}

.tags-search-input {
	flex: 1;
	min-width: 200px;
	padding: 8px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: 0.9em;
}

.tags-search-input::placeholder {
	color: var(--text-muted);
}

.tags-view-toggle {
	display: flex;
	gap: 4px;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	padding: 2px;
}

.tags-view-toggle button {
	padding: 6px 12px;
	border: none;
	border-radius: 4px;
	background: transparent;
	color: var(--text-muted);
	cursor: pointer;
	font-size: 0.85em;
	transition: all 0.15s;
}

.tags-view-toggle button.active {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
}

.tags-view-toggle button:hover:not(.active) {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.tags-random-btn {
	padding: 8px 16px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-secondary);
	color: var(--text-normal);
	cursor: pointer;
	font-size: 0.9em;
	transition: all 0.15s;
}

.tags-random-btn:hover {
	background: var(--background-modifier-hover);
}

/* Actions */
.tags-actions {
	display: flex;
	gap: 8px;
}

.tags-action-btn {
	padding: 6px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-secondary);
	color: var(--text-normal);
	cursor: pointer;
	font-size: 0.9em;
	transition: all 0.15s;
}

.tags-action-btn:hover {
	background: var(--background-modifier-hover);
}

/* Main Area - Two Column Layout */
.tags-main-area {
	display: flex;
	gap: 16px;
	flex: 1;
	min-height: 0;
}

.tags-list-panel {
	flex: 0 0 60%;
	overflow-y: auto;
	padding-right: 8px;
}

.tags-preview-panel {
	flex: 0 0 40%;
	position: sticky;
	top: 0;
	align-self: flex-start;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	padding: 16px;
	max-height: calc(100vh - 300px);
	overflow-y: auto;
	transition: all 0.2s ease-out;
}

/* Tags Preview Verse Items - Clickable with visual indication */
.preview-verse-item {
	padding: 8px 12px;
	margin-bottom: 4px;
	background: var(--background-primary);
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.15s ease;
	border-left: 3px solid transparent;
}

.preview-verse-item:hover {
	background: var(--background-modifier-hover);
	border-left-color: var(--interactive-accent);
	transform: translateX(4px);
}

.preview-verse-reference {
	color: var(--interactive-accent);
	font-weight: 600;
	display: block;
	margin-bottom: 4px;
	text-decoration: underline;
	text-decoration-style: dotted;
	text-decoration-color: var(--text-muted);
}

.preview-verse-item:hover .preview-verse-reference {
	text-decoration-style: solid;
	text-decoration-color: var(--interactive-accent);
}

.preview-verse-text {
	color: var(--text-muted);
	font-size: var(--bp-text-sm);
	line-height: 1.4;
	display: -webkit-box;
	-webkit-line-clamp: 2;
	-webkit-box-orient: vertical;
	overflow: hidden;
}

.preview-book-section {
	margin-bottom: 12px;
}

.preview-book-header {
	font-weight: 600;
	color: var(--text-normal);
	margin-bottom: 8px;
	padding-bottom: 4px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.preview-verses-list {
	padding-left: 8px;
}

/* No Data State */
.tags-no-data {
	text-align: center;
	padding: 60px 20px;
	color: var(--text-muted);
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
}

.tags-no-data-icon {
	font-size: 3em;
	margin-bottom: 16px;
	opacity: 0.5;
}

.tags-no-data-text {
	font-size: 1.1em;
}

/* Tags List */
.tags-list {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.tag-list-item-enhanced {
	padding: 12px 16px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.15s;
	display: flex;
	justify-content: space-between;
	align-items: center;
}

.tag-list-item-enhanced:hover {
	background: var(--background-modifier-hover);
	transform: translateX(4px);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.tag-list-item-enhanced.selected {
	background: var(--background-modifier-hover);
	border-left: 3px solid var(--interactive-accent);
}

.tag-name-text {
	font-size: 1em;
	font-weight: 500;
	color: var(--text-normal);
}

.tag-count-badge {
	display: inline-block;
	padding: 4px 10px;
	border-radius: 12px;
	font-size: 0.75em;
	font-weight: 600;
	background: var(--background-modifier-border);
	color: var(--text-muted);
}

/* Tags Cloud View */
.tags-cloud-container {
	padding: 16px;
}

.tags-cloud-grid {
	display: flex;
	flex-wrap: wrap;
	gap: 12px;
	justify-content: center;
	align-items: center;
}

.tag-cloud-item {
	padding: 8px 16px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 20px;
	cursor: pointer;
	transition: all 0.2s;
	font-weight: 500;
	color: var(--text-normal);
}

.tag-cloud-item:hover {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	transform: scale(1.1);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

.tag-cloud-item.selected {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
}

/* Tags Heatmap View */
.tags-heatmap-container {
	padding: 16px;
}

.tags-heatmap-grid {
	display: grid;
	grid-template-columns: repeat(11, 1fr);
	gap: 4px;
	margin-top: 16px;
}

/* Related Tags Section */
.related-tags-section {
	margin-top: 16px;
	padding-top: 16px;
	border-top: 1px solid var(--background-modifier-border);
}

.related-tags-section h4 {
	margin: 0 0 12px 0;
	font-size: 0.85em;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.related-tag-chip {
	display: inline-block;
	padding: 6px 12px;
	margin: 4px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 16px;
	font-size: 0.85em;
	color: var(--text-normal);
	cursor: pointer;
	transition: all 0.15s;
}

.related-tag-chip:hover {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	transform: translateY(-2px);
}

/* ========================================
   STATUS BAR
   ======================================== */

.bible-portal-status-bar {
	color: var(--text-muted);
	font-size: 0.85em;
	padding: 0 8px;
	display: flex;
	align-items: center;
	gap: 4px;
}

/* ========================================
   ONBOARDING HINTS
   ======================================== */

.onboarding-hints-bar {
	display: flex;
	align-items: center;
	justify-content: space-between;
	background: linear-gradient(135deg, var(--background-secondary) 0%, var(--background-primary) 100%);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	padding: 12px 16px;
	margin-bottom: 16px;
	animation: fadeIn 0.3s ease-out;
}

.onboarding-hints {
	display: flex;
	flex-wrap: wrap;
	gap: 16px;
	align-items: center;
}

.onboarding-hint {
	display: flex;
	align-items: center;
	gap: 6px;
	font-size: 0.85em;
	color: var(--text-muted);
}

.onboarding-hint-icon {
	display: flex;
	align-items: center;
	justify-content: center;
	color: var(--interactive-accent);
}

.onboarding-hint-icon svg {
	width: 14px;
	height: 14px;
}

.onboarding-hint-text {
	white-space: nowrap;
}

.onboarding-dismiss-btn {
	background: none;
	border: none;
	color: var(--text-muted);
	cursor: pointer;
	padding: 4px;
	border-radius: 4px;
	transition: all 0.2s ease;
	display: flex;
	align-items: center;
	justify-content: center;
}

.onboarding-dismiss-btn:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.onboarding-dismiss-btn svg {
	width: 16px;
	height: 16px;
}

/* Responsive: stack hints on narrow screens */
@media (max-width: 800px) {
	.onboarding-hints {
		flex-direction: column;
		align-items: flex-start;
		gap: 8px;
	}
}

/* ========================================
   MICRO-ANIMATIONS
   ======================================== */

/* Bookmark added animation */
@keyframes bookmarkAdded {
	0% {
		transform: scale(0.5) rotate(-10deg);
		opacity: 0;
	}
	50% {
		transform: scale(1.2) rotate(5deg);
	}
	70% {
		transform: scale(0.9) rotate(-3deg);
	}
	100% {
		transform: scale(1) rotate(0deg);
		opacity: 1;
	}
}

.bookmark-added-animation {
	animation: bookmarkAdded 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Note created animation */
@keyframes noteCreated {
	0% {
		transform: translateY(0);
		opacity: 1;
	}
	50% {
		transform: translateY(-10px);
		opacity: 0.8;
	}
	100% {
		transform: translateY(0);
		opacity: 1;
	}
}

.note-created-animation {
	animation: noteCreated 0.4s ease-out;
}

/* Success checkmark animation */
@keyframes successPulse {
	0% {
		transform: scale(0);
		opacity: 0;
	}
	50% {
		transform: scale(1.3);
	}
	100% {
		transform: scale(1);
		opacity: 1;
	}
}

.success-pulse-animation {
	animation: successPulse 0.3s ease-out;
}

/* Button press feedback */
@keyframes buttonPress {
	0% {
		transform: scale(1);
	}
	50% {
		transform: scale(0.95);
	}
	100% {
		transform: scale(1);
	}
}

.bible-nav-btn:active,
.bible-history-btn:active {
	animation: buttonPress 0.15s ease-out;
}

/* ========================================
   MICRO-ANIMATIONS FOR USER FEEDBACK
   ======================================== */

/* Bookmark added animation - pop and rotate */
@keyframes bookmarkPop {
	0% {
		transform: scale(1);
	}
	50% {
		transform: scale(1.3) rotate(10deg);
	}
	100% {
		transform: scale(1) rotate(0deg);
	}
}

.bookmark-icon.just-added {
	animation: bookmarkPop 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Highlight sweep animation - color sweep effect using pseudo-element overlay */
@keyframes highlightSweep {
	0% {
		left: -100%;
	}
	100% {
		left: 100%;
	}
}

/* Target the verse element itself (not just verse-text) */
.bible-verse.just-highlighted {
	position: relative;
	overflow: hidden;
}

.bible-verse.just-highlighted::after {
	content: '';
	position: absolute;
	top: 0;
	left: -100%;
	width: 100%;
	height: 100%;
	background: linear-gradient(
		90deg,
		transparent 0%,
		rgba(255, 215, 0, 0.5) 40%,
		rgba(255, 255, 255, 0.8) 50%,
		rgba(255, 215, 0, 0.5) 60%,
		transparent 100%
	);
	animation: highlightSweep 0.6s ease-out forwards;
	pointer-events: none;
	z-index: 10;
	border-radius: 4px;
}

/* Note created animation - float up and fade in */
@keyframes noteFloat {
	0% {
		opacity: 0;
		transform: translateY(10px) scale(0.9);
	}
	50% {
		opacity: 1;
		transform: translateY(-5px) scale(1.05);
	}
	100% {
		opacity: 1;
		transform: translateY(0) scale(1);
	}
}

.note-indicator.just-created {
	animation: noteFloat 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Verse flash animation - for "Go to" navigation */
@keyframes verseFlash {
	0% {
		background-color: rgba(59, 130, 246, 0.3);
		box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.5);
	}
	50% {
		background-color: rgba(59, 130, 246, 0.15);
		box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3);
	}
	100% {
		background-color: transparent;
		box-shadow: none;
	}
}

.bible-verse.verse-flash {
	animation: verseFlash 1.5s ease-out forwards;
	border-radius: 4px;
}

/* Button press feedback - enhanced */
.bible-portal-btn {
	transition: transform 0.1s ease, box-shadow 0.1s ease;
}

.bible-portal-btn:active {
	transform: scale(0.95);
}

/* Nav item hover slide */
.bible-portal-sidebar .nav-item {
	transition: transform var(--bp-transition-fast, 0.15s) ease, background var(--bp-transition-fast, 0.15s) ease;
}

.bible-portal-sidebar .nav-item:hover {
	transform: translateX(4px);
}

/* Toast notification slide */
@keyframes toastSlide {
	0% {
		opacity: 0;
		transform: translateY(-20px);
	}
	10% {
		opacity: 1;
		transform: translateY(0);
	}
	90% {
		opacity: 1;
		transform: translateY(0);
	}
	100% {
		opacity: 0;
		transform: translateY(-20px);
	}
}

.bible-portal-toast {
	animation: toastSlide 3s ease forwards;
}

/* Cross-reference popup entrance */
@keyframes popupFade {
	from {
		opacity: 0;
		transform: scale(0.95) translateY(-5px);
	}
	to {
		opacity: 1;
		transform: scale(1) translateY(0);
	}
}

.cross-ref-popup {
	animation: popupFade 0.15s ease-out;
}

/* Verse hover lift effect - subtle feedback */
.verse {
	transition: transform var(--bp-transition-fast, 0.15s) ease, box-shadow var(--bp-transition-fast, 0.15s) ease;
}

.verse:hover {
	transform: translateX(2px);
	box-shadow: -2px 0 0 rgba(var(--interactive-accent-rgb), 0.3);
}

/* Pulse animation for newly created elements */
@keyframes elementPulse {
	0% {
		box-shadow: 0 0 0 0 rgba(var(--interactive-accent-rgb), 0.7);
	}
	50% {
		box-shadow: 0 0 0 8px rgba(var(--interactive-accent-rgb), 0);
	}
	100% {
		box-shadow: 0 0 0 0 rgba(var(--interactive-accent-rgb), 0);
	}
}

.just-created {
	animation: elementPulse 0.6s ease-out;
}

/* Reduced motion support - respect user preferences */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}

	/* Disable specific animations that might cause discomfort */
	.bookmark-icon.just-added,
	.bible-verse.just-highlighted,
	.bible-verse.just-highlighted::after,
	.note-indicator.just-created,
	.just-created {
		animation: none !important;
	}

	/* Disable hover effects */
	.verse:hover {
		transform: none !important;
	}

	.bible-portal-sidebar .nav-item:hover {
		transform: none !important;
	}
}

/* ========================================
   STUDY JOURNAL
   ======================================== */

/* Journal header */
.journal-header {
	display: flex;
	align-items: center;
	margin-bottom: 20px;
	padding-bottom: 12px;
	border-bottom: 2px solid var(--background-modifier-border);
}

.journal-header h2 {
	margin: 0;
	font-size: 1.8em;
	display: flex;
	align-items: center;
	gap: 12px;
}

/* Manual entry section */
.journal-entry-section {
	background: var(--background-secondary);
	padding: 20px;
	border-radius: 8px;
	margin-bottom: 30px;
}

.journal-entry-section h3 {
	margin: 0 0 12px 0;
	font-size: 1.2em;
	color: var(--text-normal);
}

.journal-textarea {
	width: 100%;
	min-height: 120px;
	padding: 12px;
	font-family: var(--font-text);
	font-size: 1em;
	line-height: 1.6;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	color: var(--text-normal);
	resize: vertical;
	margin-bottom: 12px;
}

.journal-textarea:focus {
	outline: none;
	border-color: var(--interactive-accent);
	box-shadow: 0 0 0 2px var(--interactive-accent-hover);
}

.journal-save-btn {
	padding: 10px 20px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: 6px;
	font-size: 1em;
	font-weight: 500;
	cursor: pointer;
	transition: all 0.2s ease;
}

.journal-save-btn:hover {
	background: var(--interactive-accent-hover);
	transform: translateY(-1px);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

/* Timeline section */
.journal-timeline-section {
	margin-top: 30px;
}

.journal-timeline-section h3 {
	margin: 0 0 16px 0;
	font-size: 1.4em;
}

.journal-empty-state {
	text-align: center;
	color: var(--text-muted);
	padding: 40px 20px;
	font-style: italic;
}

.journal-timeline {
	display: flex;
	flex-direction: column;
	gap: 16px;
}

/* Journal entry card */
.journal-entry {
	position: relative;
	background: var(--background-secondary);
	border-radius: 8px;
	padding: 16px;
	border-left: 4px solid var(--background-modifier-border);
	transition: all 0.2s ease;
}

.journal-entry:hover {
	transform: translateX(4px);
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.journal-entry.session-entry {
	border-left-color: var(--interactive-accent);
}

.journal-entry.manual-entry {
	border-left-color: #10b981; /* Green for manual entries */
}

/* Entry header */
.journal-entry-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-bottom: 12px;
}

.journal-entry-date {
	font-size: 0.9em;
	color: var(--text-muted);
	font-weight: 500;
}

.journal-entry-type {
	padding: 4px 12px;
	border-radius: 12px;
	font-size: 0.85em;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.journal-entry-type.session {
	background: var(--interactive-accent-hover);
	color: var(--text-on-accent);
}

.journal-entry-type.manual {
	background: #10b981;
	color: white;
}

/* Entry content */
.journal-entry-content {
	margin-bottom: 12px;
}

/* Session stats grid */
.journal-session-stats {
	display: flex;
	flex-wrap: wrap;
	gap: 12px;
	margin-bottom: 12px;
}

.journal-session-stats .stat-item {
	display: flex;
	align-items: center;
	gap: 6px;
	padding: 6px 12px;
	background: var(--background-primary);
	border-radius: 6px;
	font-size: 0.9em;
}

.journal-session-stats .stat-icon {
	color: var(--interactive-accent);
	display: flex;
	align-items: center;
}

.journal-session-stats .stat-icon svg {
	width: 16px;
	height: 16px;
}

.journal-session-stats .stat-value {
	font-weight: 500;
	color: var(--text-normal);
}

/* Chapters visited */
.journal-chapters-visited h4 {
	margin: 8px 0 6px 0;
	font-size: 0.9em;
	color: var(--text-muted);
	font-weight: 600;
}

.chapters-list {
	display: flex;
	flex-wrap: wrap;
	gap: 6px;
}

.chapter-tag {
	padding: 4px 10px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	font-size: 0.85em;
	color: var(--text-normal);
	font-weight: 500;
}

/* Manual entry content */
.journal-manual-content {
	margin: 0;
	line-height: 1.6;
	color: var(--text-normal);
	white-space: pre-wrap;
	word-wrap: break-word;
}

/* Delete button */
.journal-delete-btn {
	position: absolute;
	top: 12px;
	right: 12px;
	width: 32px;
	height: 32px;
	padding: 0;
	background: transparent;
	border: none;
	color: var(--text-muted);
	cursor: pointer;
	border-radius: 4px;
	transition: all 0.2s ease;
	display: flex;
	align-items: center;
	justify-content: center;
}

.journal-delete-btn:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.journal-delete-btn svg {
	width: 16px;
	height: 16px;
}

/* Export section */
.journal-export-section {
	margin-top: 24px;
	padding-top: 16px;
	border-top: 1px solid var(--background-modifier-border);
	text-align: center;
}

.journal-export-btn {
	padding: 10px 24px;
	background: var(--background-secondary);
	color: var(--text-normal);
	border: 2px solid var(--background-modifier-border);
	border-radius: 6px;
	font-size: 1em;
	font-weight: 500;
	cursor: pointer;
	transition: all 0.2s ease;
}

.journal-export-btn:hover {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-color: var(--interactive-accent);
	transform: translateY(-2px);
	box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* Responsive */
@media (max-width: 600px) {
	.journal-session-stats {
		flex-direction: column;
	}

	.journal-entry {
		padding: 12px;
	}

	.journal-delete-btn {
		top: 8px;
		right: 8px;
	}
}

/* ========================================
   COLLECTIONS MODE (Phase 15B)
   ======================================== */

.collections-header {
	margin-bottom: var(--bp-space-6);
}

.collections-header h2 {
	display: flex;
	align-items: center;
	gap: var(--bp-space-2);
	font-size: var(--bp-text-2xl);
	color: var(--text-normal);
}

.collections-layout {
	display: grid;
	grid-template-columns: 300px 1fr;
	gap: var(--bp-space-6);
	min-height: 500px;
}

.collections-list-panel {
	background: var(--background-secondary);
	border-radius: 8px;
	padding: var(--bp-space-4);
	overflow-y: auto;
	position: relative;
	z-index: 10;
}

.collections-detail-panel {
	background: var(--background-primary);
	border-radius: 8px;
	padding: var(--bp-space-6);
	border: 1px solid var(--background-modifier-border);
}

.collections-new-btn {
	width: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	gap: var(--bp-space-2);
	padding: var(--bp-space-3) var(--bp-space-4);
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: 6px;
	font-weight: 600;
	cursor: pointer;
	margin-bottom: var(--bp-space-4);
	transition: transform 0.2s ease;
	position: relative;
	z-index: 20;
}

.collections-new-btn:hover {
	transform: translateY(-2px);
}

.collections-templates {
	margin-bottom: var(--bp-space-4);
	padding-bottom: var(--bp-space-4);
	border-bottom: 1px solid var(--background-modifier-border);
}

.collections-templates h4 {
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
	margin-bottom: var(--bp-space-2);
}

.template-btn {
	display: block;
	width: 100%;
	padding: var(--bp-space-2) var(--bp-space-3);
	margin-bottom: var(--bp-space-1);
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	font-size: var(--bp-text-sm);
	color: var(--text-normal);
	cursor: pointer;
	text-align: left;
	transition: background 0.2s ease;
	position: relative;
	z-index: 20;
}

.template-btn:hover {
	background: var(--background-modifier-hover);
}

.collections-list {
	display: flex;
	flex-direction: column;
	gap: var(--bp-space-2);
}

.collection-item {
	padding: var(--bp-space-3);
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.2s ease;
}

.collection-item:hover {
	border-color: var(--interactive-accent);
	transform: translateX(4px);
}

.collection-item.selected {
	border-color: var(--interactive-accent);
	background: var(--background-secondary-alt);
	box-shadow: 0 0 0 2px var(--interactive-accent-hover);
}

.collection-item strong {
	display: block;
	margin-bottom: var(--bp-space-1);
}

.collection-meta {
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
}

.collection-progress-bar {
	height: 4px;
	background: var(--background-modifier-border);
	border-radius: 2px;
	margin-top: var(--bp-space-2);
	overflow: hidden;
}

.collection-progress-bar.large {
	height: 8px;
	margin-top: var(--bp-space-3);
}

.collection-progress-fill {
	height: 100%;
	background: var(--interactive-accent);
	border-radius: 2px;
	transition: width 0.3s ease;
}

.collection-detail-header {
	display: flex;
	align-items: center;
	gap: var(--bp-space-3);
	margin-bottom: var(--bp-space-4);
}

/* Collection name wrapper with edit hint */
.collection-name-wrapper {
	display: flex;
	align-items: center;
	gap: var(--bp-space-2);
	flex: 1;
	position: relative;
}

.collection-name-input {
	flex: 1;
	font-size: var(--bp-text-xl);
	font-weight: 600;
	padding: var(--bp-space-2) var(--bp-space-3);
	background: var(--background-secondary);
	border: 1px dashed var(--background-modifier-border);
	border-radius: 6px;
	color: var(--text-normal);
	transition: all 0.2s ease;
}

.collection-name-input::placeholder {
	color: var(--text-muted);
	font-style: italic;
}

.collection-name-input:hover {
	border-style: solid;
	border-color: var(--interactive-accent);
}

.collection-name-input:focus {
	border-style: solid;
	border-color: var(--interactive-accent);
	background: var(--background-primary);
	outline: none;
	box-shadow: 0 0 0 2px rgba(var(--interactive-accent-rgb), 0.2);
}

.collection-name-edit-hint {
	position: absolute;
	right: 10px;
	color: var(--text-muted);
	opacity: 0.5;
	pointer-events: none;
	transition: opacity 0.2s ease;
}

.collection-name-wrapper:hover .collection-name-edit-hint,
.collection-name-input:focus ~ .collection-name-edit-hint {
	opacity: 0;
}

.collection-delete-btn {
	padding: var(--bp-space-2);
	background: transparent;
	border: none;
	border-radius: 4px;
	cursor: pointer;
	color: var(--text-muted);
	transition: all 0.2s ease;
}

.collection-delete-btn:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.collection-desc-input {
	width: 100%;
	padding: var(--bp-space-2);
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	font-size: var(--bp-text-sm);
	resize: vertical;
	margin-bottom: var(--bp-space-4);
}

.collection-progress-summary {
	margin-bottom: var(--bp-space-4);
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
}

.collection-add-section {
	display: flex;
	flex-direction: column;
	gap: var(--bp-space-2);
	margin-bottom: var(--bp-space-4);
	padding: var(--bp-space-3);
	background: var(--background-secondary);
	border-radius: var(--bp-radius-md);
	border: 1px dashed var(--background-modifier-border);
}

.collection-add-label {
	font-size: 0.9em;
	font-weight: 500;
	color: var(--text-muted);
}

.collection-add-row {
	display: flex;
	gap: var(--bp-space-2);
}

.collection-add-input {
	flex: 1;
	padding: var(--bp-space-2) var(--bp-space-3);
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	font-size: 0.95em;
}

.collection-add-btn {
	display: flex;
	align-items: center;
	gap: var(--bp-space-1);
	padding: var(--bp-space-2) var(--bp-space-3);
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: 4px;
	cursor: pointer;
	font-weight: 500;
	transition: all 0.2s ease;
}

.collection-add-btn:hover {
	filter: brightness(1.1);
}

.collection-add-btn .btn-icon {
	width: 16px;
	height: 16px;
}

.collection-verses-list {
	display: flex;
	flex-direction: column;
	gap: var(--bp-space-2);
	max-height: 400px;
	overflow-y: auto;
}

/* Collection verse cards */
.collection-verse-card {
	display: flex;
	flex-direction: column;
	gap: var(--bp-space-2);
	padding: var(--bp-space-3);
	background: var(--background-secondary);
	border-radius: var(--bp-radius-md);
	border: 1px solid var(--background-modifier-border);
	transition: box-shadow 0.2s ease;
}

.collection-verse-card:hover {
	box-shadow: var(--bp-shadow-sm);
}

.collection-card-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: var(--bp-space-2);
}

.collection-verse-ref {
	font-weight: 600;
	cursor: pointer;
	color: var(--text-accent);
}

.collection-verse-ref:hover {
	text-decoration: underline;
}

.collection-verse-remove {
	padding: var(--bp-space-1);
	background: transparent;
	border: none;
	cursor: pointer;
	color: var(--text-muted);
	opacity: 0;
	transition: opacity 0.2s ease;
}

.collection-verse-card:hover .collection-verse-remove {
	opacity: 1;
}

.collection-verse-remove:hover {
	color: #e53935;
}

.collection-card-title {
	font-size: var(--bp-text-sm);
	font-weight: 500;
	padding: var(--bp-space-1) var(--bp-space-2);
	background: transparent;
	border: 1px dashed transparent;
	border-radius: 4px;
	color: var(--text-normal);
}

.collection-card-title:hover,
.collection-card-title:focus {
	background: var(--background-primary);
	border-color: var(--background-modifier-border);
}

.collection-card-title::placeholder {
	color: var(--text-faint);
	font-style: italic;
}

.collection-verse-text {
	padding: var(--bp-space-2) var(--bp-space-3);
	background: var(--background-primary);
	border-radius: 4px;
	font-size: var(--bp-text-sm);
	line-height: 1.5;
	color: var(--text-muted);
}

.collection-verse-text .verse-text-content {
	margin: 0;
}

.collection-verse-text .verse-text-line {
	margin: 0 0 4px 0;
}

.collection-verse-text .verse-text-line:last-child {
	margin-bottom: 0;
}

.collection-verse-text .verse-text-error {
	color: var(--text-faint);
}

.collection-card-desc {
	font-size: var(--bp-text-sm);
	padding: var(--bp-space-2);
	background: transparent;
	border: 1px dashed transparent;
	border-radius: 4px;
	resize: vertical;
	min-height: 40px;
	color: var(--text-normal);
}

.collection-card-desc:hover,
.collection-card-desc:focus {
	background: var(--background-primary);
	border-color: var(--background-modifier-border);
}

.collection-card-desc::placeholder {
	color: var(--text-muted);
	font-style: italic;
	opacity: 0.7;
}

/* Count summary */
.collection-count-summary {
	margin-bottom: var(--bp-space-4);
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
}

/* Export/Import section */
.collection-export-section {
	margin-top: var(--bp-space-6);
	padding-top: var(--bp-space-4);
	border-top: 1px solid var(--background-modifier-border);
	display: flex;
	gap: var(--bp-space-2);
}

.collection-action-btn {
	display: flex;
	align-items: center;
	gap: var(--bp-space-2);
	padding: var(--bp-space-2) var(--bp-space-3);
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	cursor: pointer;
	font-size: var(--bp-text-sm);
	color: var(--text-normal);
	transition: background 0.2s ease;
}

.collection-action-btn:hover {
	background: var(--background-modifier-hover);
}

.collection-action-btn .btn-icon {
	width: 16px;
	height: 16px;
	display: flex;
	align-items: center;
	justify-content: center;
}

.collection-action-btn .btn-icon svg {
	width: 14px;
	height: 14px;
}

/* ========================================
   STUDY INSIGHTS MODE (Phase 15A)
   ======================================== */

.insights-header {
	margin-bottom: var(--bp-space-6);
}

.insights-header h2 {
	display: flex;
	align-items: center;
	gap: var(--bp-space-2);
	font-size: var(--bp-text-2xl);
	color: var(--text-normal);
}

.insights-stats-grid {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
	gap: var(--bp-space-4);
	margin-bottom: var(--bp-space-6);
}

.stat-card {
	background: var(--background-secondary);
	border-radius: 8px;
	padding: var(--bp-space-4);
	text-align: center;
	border: 1px solid var(--background-modifier-border);
}

.stat-card .stat-icon {
	display: block;
	margin-bottom: var(--bp-space-2);
	color: var(--interactive-accent);
}

.stat-card .stat-icon svg {
	width: 24px;
	height: 24px;
}

.stat-card .stat-value {
	font-size: var(--bp-text-2xl);
	font-weight: 700;
	color: var(--text-normal);
}

.stat-card .stat-label {
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
	margin-top: var(--bp-space-1);
}

.insights-section {
	margin-bottom: var(--bp-space-6);
	padding: var(--bp-space-4);
	background: var(--background-secondary);
	border-radius: 8px;
}

.insights-section h3 {
	margin-bottom: var(--bp-space-3);
}

.insights-section p {
	margin-bottom: var(--bp-space-2);
	font-size: var(--bp-text-base);
}

.insights-heatmap-section {
	margin-bottom: var(--bp-space-6);
}

.insights-heatmap-section h3 {
	margin-bottom: var(--bp-space-2);
}

.heatmap-hint {
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
	margin-bottom: var(--bp-space-3);
}

.heatmap-grid {
	display: grid;
	grid-template-columns: repeat(11, 1fr);
	gap: 4px;
}

.heatmap-cell {
	aspect-ratio: 1;
	border-radius: 4px;
	display: flex;
	align-items: center;
	justify-content: center;
	cursor: pointer;
	transition: transform 0.2s ease;
	min-height: 40px;
}

.heatmap-cell:hover {
	transform: scale(1.1);
	z-index: 1;
}

.heatmap-cell-label {
	font-size: 9px;
	font-weight: 600;
	color: rgba(255, 255, 255, 0.9);
	text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

.insights-export-section {
	text-align: center;
}

.insights-export-btn {
	padding: var(--bp-space-3) var(--bp-space-6);
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: 6px;
	font-weight: 600;
	cursor: pointer;
	transition: transform 0.2s ease;
}

.insights-export-btn:hover {
	transform: translateY(-2px);
}

/* ========================================
   COMPARISON MATRIX MODE (Phase 15F)
   ======================================== */

.comparison-header {
	margin-bottom: var(--bp-space-6);
}

.comparison-header h2 {
	display: flex;
	align-items: center;
	gap: var(--bp-space-2);
	font-size: var(--bp-text-2xl);
	color: var(--text-normal);
}

.comparison-selector {
	margin-bottom: var(--bp-space-4);
	padding: var(--bp-space-4);
	background: var(--background-secondary);
	border-radius: 8px;
}

.comparison-selector h4 {
	margin-bottom: var(--bp-space-3);
	font-size: var(--bp-text-base);
}

.versions-checkbox-grid {
	display: flex;
	flex-wrap: wrap;
	gap: var(--bp-space-4);
}

.version-checkbox-label {
	display: flex;
	align-items: center;
	gap: var(--bp-space-2);
	cursor: pointer;
	padding: var(--bp-space-2) var(--bp-space-3);
	background: var(--background-primary);
	border-radius: 4px;
	border: 1px solid var(--background-modifier-border);
	transition: border-color 0.2s ease;
}

.version-checkbox-label:hover {
	border-color: var(--interactive-accent);
}

.version-checkbox-label input {
	accent-color: var(--interactive-accent);
}

.comparison-input-section {
	display: flex;
	gap: var(--bp-space-3);
	margin-bottom: var(--bp-space-6);
}

.comparison-passage-input {
	flex: 1;
	padding: var(--bp-space-3) var(--bp-space-4);
	font-size: var(--bp-text-base);
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
}

.comparison-btn {
	padding: var(--bp-space-3) var(--bp-space-6);
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: 6px;
	font-weight: 600;
	cursor: pointer;
}

.comparison-results {
	background: var(--background-secondary);
	border-radius: 8px;
	padding: var(--bp-space-4);
	overflow-x: auto;
}

.comparison-table {
	width: 100%;
	border-collapse: collapse;
	font-size: var(--bp-text-sm);
}

.comparison-table th,
.comparison-table td {
	padding: var(--bp-space-3);
	border: 1px solid var(--background-modifier-border);
	text-align: left;
	vertical-align: top;
}

.comparison-table th {
	background: var(--background-primary);
	font-weight: 600;
	position: sticky;
	top: 0;
}

.comparison-table tr:nth-child(even) {
	background: var(--background-primary-alt);
}

.verse-ref-cell {
	font-weight: 600;
	white-space: nowrap;
	color: var(--text-accent);
}

.verse-text-cell {
	line-height: 1.6;
	min-width: 200px;
}

.comparison-export-btn {
	margin-top: var(--bp-space-4);
	padding: var(--bp-space-2) var(--bp-space-4);
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	cursor: pointer;
}

.comparison-export-btn:hover {
	background: var(--background-modifier-hover);
}

.loading-text,
.error-text {
	padding: var(--bp-space-4);
	text-align: center;
	color: var(--text-muted);
}

.error-text {
	color: #e53935;
}

/* Responsive adjustments */
@media (max-width: 768px) {
	.collections-layout {
		grid-template-columns: 1fr;
	}

	.comparison-input-section {
		flex-direction: column;
	}

	.heatmap-grid {
		grid-template-columns: repeat(6, 1fr);
	}
}

/* ========================================
   STUDY MODE BUTTON
   ======================================== */

.bible-study-mode-btn {
	display: flex;
	align-items: center;
	gap: 4px;
	padding: 6px 12px;
	background: var(--background-secondary);
	border: 2px solid var(--background-modifier-border);
	border-radius: 20px;
	cursor: pointer;
	transition: all 0.2s ease;
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
}

.bible-study-mode-btn:hover {
	border-color: var(--interactive-accent);
	color: var(--text-normal);
}

.bible-study-mode-btn.active {
	background: rgba(34, 197, 94, 0.15);
	border-color: #22c55e;
	color: #22c55e;
	animation: study-pulse 2s infinite;
}

.bible-study-mode-btn.active:hover {
	background: rgba(239, 68, 68, 0.15);
	border-color: #ef4444;
	color: #ef4444;
}

.bible-study-mode-btn .study-timer {
	font-weight: 600;
	font-variant-numeric: tabular-nums;
}

@keyframes study-pulse {
	0%, 100% {
		box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4);
	}
	50% {
		box-shadow: 0 0 0 4px rgba(34, 197, 94, 0);
	}
}

/* Status bar study mode indicator */
.bible-portal-status-bar {
	cursor: pointer;
}

/* ========================================
   CONTEXT SIDEBAR (15C)
   ======================================== */

/* Layout adjustment when context sidebar is visible */
.bible-portal-layout.with-context-sidebar {
	/* Main area should shrink to accommodate context sidebar */
}

.bible-portal-layout.with-context-sidebar .bible-portal-main {
	flex: 1;
	min-width: 0;
}

/* Context Sidebar */
.context-sidebar {
	background: var(--background-secondary);
	border-left: 1px solid var(--background-modifier-border);
	display: flex;
	flex-direction: column;
	flex-shrink: 0;
	overflow: hidden;
}

.context-sidebar-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 12px 16px;
	border-bottom: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
}

.context-sidebar-title {
	display: flex;
	align-items: center;
	gap: 8px;
	font-weight: 600;
	font-size: var(--bp-text-base);
	color: var(--text-normal);
}

.context-sidebar-title .title-icon {
	color: var(--interactive-accent);
}

.context-sidebar-close {
	background: none;
	border: none;
	padding: 4px;
	border-radius: 4px;
	cursor: pointer;
	color: var(--text-muted);
	display: flex;
	align-items: center;
	justify-content: center;
}

.context-sidebar-close:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

/* Tabs */
.context-sidebar-tabs {
	display: flex;
	padding: 8px;
	gap: 4px;
	border-bottom: 1px solid var(--background-modifier-border);
	background: var(--background-primary);
}

.context-tab {
	flex: 1;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	gap: 6px;
	padding: 12px 8px;
	min-height: 64px;
	background: none;
	border: none;
	border-radius: 8px;
	cursor: pointer;
	color: var(--text-muted);
	transition: all 0.2s ease;
	position: relative;
	z-index: 20;
}

.context-tab:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.context-tab.active {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
}

.context-tab .tab-icon {
	font-size: 22px;
	display: flex;
	align-items: center;
	justify-content: center;
}

.context-tab .tab-label {
	font-size: 11px;
	font-weight: 600;
	white-space: nowrap;
	text-align: center;
}

/* Content area */
.context-sidebar-content {
	flex: 1;
	overflow-y: auto;
	overflow-x: hidden;
	padding: 16px;
	min-width: 0; /* Prevent flex item from overflowing */
}

/* Placeholder styling */
.context-placeholder {
	text-align: center;
	padding: 20px;
	color: var(--text-muted);
}

.context-placeholder .placeholder-icon {
	font-size: 48px;
	opacity: 0.3;
	display: block;
	margin-bottom: 16px;
}

.context-placeholder h3 {
	margin: 0 0 12px 0;
	font-size: var(--bp-text-lg);
	color: var(--text-normal);
}

.context-placeholder p {
	margin: 8px 0;
	font-size: var(--bp-text-sm);
	line-height: 1.5;
}

.context-placeholder ul {
	text-align: left;
	margin: 12px 0;
	padding-left: 20px;
}

.context-placeholder li {
	margin: 6px 0;
	font-size: var(--bp-text-sm);
}

.context-placeholder .text-muted {
	color: var(--text-faint);
	font-style: italic;
}

/* Setup instructions styling */
.setup-instructions {
	text-align: left;
	margin-top: 16px;
	padding: 12px;
	background: var(--background-secondary);
	border-radius: 8px;
}

.setup-instructions .instruction-header {
	font-weight: 600;
	margin-bottom: 8px;
	color: var(--text-normal);
}

.setup-instructions .instruction-steps {
	margin: 0;
	padding-left: 20px;
}

.setup-instructions .instruction-steps li {
	margin: 8px 0;
	font-size: var(--bp-text-sm);
}

.setup-instructions code {
	display: block;
	margin: 8px 0;
	padding: 8px;
	background: var(--background-primary);
	border-radius: 4px;
	font-size: var(--bp-text-xs);
	font-family: var(--font-monospace);
	word-break: break-all;
}

/* Commentary display styling */
.commentary-header {
	padding-bottom: 12px;
	border-bottom: 1px solid var(--background-modifier-border);
	margin-bottom: 16px;
}

.commentary-title-row {
	display: flex;
	align-items: center;
	gap: 8px;
}

.commentary-title-row .title-icon {
	color: var(--text-accent);
}

.commentary-title-row h3 {
	margin: 0;
	font-size: var(--bp-text-lg);
	font-weight: 600;
}

.commentary-source {
	margin: 4px 0 0 0;
	font-size: var(--bp-text-xs);
	color: var(--text-muted);
	font-style: italic;
}

.commentary-sections {
	display: flex;
	flex-direction: column;
	gap: 16px;
}

.commentary-section {
	background: var(--background-secondary);
	border-radius: 8px;
	padding: 12px;
	border-left: 3px solid var(--interactive-accent);
	overflow: hidden;
	min-width: 0;
}

.verse-range-header {
	margin-bottom: 8px;
}

.verse-range {
	font-size: var(--bp-text-sm);
	font-weight: 600;
	color: var(--text-accent);
	white-space: nowrap;
}

.commentary-text {
	font-size: var(--bp-text-sm);
	line-height: 1.65;
	color: var(--text-normal);
	word-wrap: break-word;
	overflow-wrap: break-word;
	white-space: normal;
}

.commentary-text p {
	margin: 0 0 10px 0;
}

.commentary-text p:last-child {
	margin-bottom: 0;
}

/* Word Study tab styling */
.word-study-header {
	padding-bottom: 12px;
	border-bottom: 1px solid var(--background-modifier-border);
	margin-bottom: 16px;
}

.word-study-title-row {
	display: flex;
	align-items: center;
	gap: 8px;
}

.word-study-title-row .title-icon {
	color: var(--text-accent);
}

.word-study-title-row h3 {
	margin: 0;
	font-size: var(--bp-text-lg);
}

.word-study-hint {
	margin: 8px 0 0 0;
	font-size: var(--bp-text-xs);
}

.word-study-samples h4 {
	margin: 16px 0 12px 0;
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.word-study-samples h4.hebrew-section {
	margin-top: 24px;
}

.word-study-card {
	background: var(--background-secondary);
	border-radius: 8px;
	padding: 10px 12px;
	margin-bottom: 8px;
	border-left: 3px solid var(--interactive-accent);
}

.word-card-header {
	display: flex;
	align-items: baseline;
	gap: 8px;
	flex-wrap: wrap;
	margin-bottom: 6px;
}

.strongs-number {
	font-family: var(--font-monospace);
	font-size: var(--bp-text-xs);
	color: var(--text-accent);
	background: rgba(59, 130, 246, 0.1);
	padding: 2px 6px;
	border-radius: 4px;
}

.word-lemma {
	font-size: var(--bp-text-base);
	font-weight: 600;
}

.word-translit {
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
	font-style: italic;
}

.word-definition {
	margin: 0;
	font-size: var(--bp-text-sm);
	line-height: 1.5;
	color: var(--text-normal);
}

.word-definition.compact {
	font-size: var(--bp-text-xs);
}

/* Selected Word Section */
.selected-word-section {
	background: var(--background-secondary);
	border-radius: 8px;
	padding: 12px;
	margin-bottom: 16px;
	border: 2px solid var(--interactive-accent);
}

.selected-word-section .section-header {
	display: flex;
	align-items: center;
	gap: 8px;
	margin-bottom: 10px;
	position: relative;
}

.selected-word-section .section-icon {
	color: var(--interactive-accent);
}

.clear-selection-btn {
	position: absolute;
	right: 0;
	top: 0;
	background: none;
	border: none;
	color: var(--text-muted);
	cursor: pointer;
	padding: 4px;
	font-size: 12px;
	opacity: 0.6;
}

.clear-selection-btn:hover {
	opacity: 1;
	color: var(--text-normal);
}

.selected-word-card {
	background: var(--background-primary);
	border-left: 4px solid var(--interactive-accent);
}

.strongs-number-badge {
	font-family: var(--font-monospace);
	font-size: var(--bp-text-sm);
	padding: 4px 10px;
	border-radius: 6px;
	font-weight: 600;
}

.strongs-number-badge.greek {
	background: rgba(59, 130, 246, 0.15);
	color: #3b82f6;
}

.strongs-number-badge.hebrew {
	background: rgba(168, 85, 247, 0.15);
	color: #a855f7;
}

.word-lemma.large {
	font-size: var(--bp-text-xl);
}

.word-derivation,
.word-kjv-def {
	margin-top: 8px;
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
	line-height: 1.4;
}

.word-derivation strong,
.word-kjv-def strong {
	color: var(--text-normal);
}

/* Chapter Key Words */
.word-study-samples .section-header {
	display: flex;
	align-items: center;
	gap: 8px;
	margin-bottom: 12px;
	padding-bottom: 8px;
	border-bottom: 1px solid var(--background-modifier-border);
	color: var(--text-muted);
	font-size: var(--bp-text-sm);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.word-study-samples .section-icon {
	color: var(--interactive-accent);
}

.word-study-card.compact {
	padding: 8px 10px;
	margin-bottom: 6px;
	transition: all 0.2s ease;
}

.word-study-card.compact:hover {
	background: var(--background-modifier-hover);
	border-left-color: var(--interactive-accent-hover);
}

.strongs-number.hebrew {
	background: rgba(168, 85, 247, 0.1);
	color: #a855f7;
}

.strongs-number.greek {
	background: rgba(59, 130, 246, 0.1);
	color: #3b82f6;
}

.word-count-badge {
	font-size: var(--bp-text-xs);
	color: var(--text-muted);
	background: var(--background-modifier-border);
	padding: 1px 6px;
	border-radius: 10px;
}

/* View in Strong's Lookup button */
.view-in-lookup-btn {
	margin-top: 12px;
	padding: 8px 16px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	border-radius: 6px;
	cursor: pointer;
	font-size: var(--bp-text-sm);
	font-weight: 500;
	transition: all 0.2s ease;
	display: flex;
	align-items: center;
	gap: 6px;
}

.view-in-lookup-btn:hover {
	background: var(--interactive-accent-hover);
	transform: translateX(2px);
}

/* Context (Theographic) tab styling */
.context-header {
	padding-bottom: 12px;
	border-bottom: 1px solid var(--background-modifier-border);
	margin-bottom: 16px;
}

.context-title-row {
	display: flex;
	align-items: center;
	gap: 8px;
}

.context-title-row .title-icon {
	color: var(--text-accent);
}

.context-title-row h3 {
	margin: 0;
	font-size: var(--bp-text-lg);
}

.context-section {
	margin-bottom: 16px;
}

.context-section .section-header {
	display: flex;
	align-items: center;
	gap: 8px;
	margin-bottom: 10px;
	font-weight: 600;
	color: var(--text-normal);
}

.context-section .section-icon {
	color: var(--text-muted);
}

.context-tags {
	display: flex;
	flex-wrap: wrap;
	gap: 6px;
}

.context-tag {
	font-size: var(--bp-text-xs);
	padding: 4px 10px;
	border-radius: 12px;
	background: var(--background-secondary);
}

.context-tag.person-tag {
	background: rgba(147, 51, 234, 0.15);
	color: #9333ea;
}

.context-tag.place-tag {
	background: rgba(34, 197, 94, 0.15);
	color: #22c55e;
}

/* Dark mode tag colors */
.theme-dark .context-tag.person-tag {
	background: rgba(147, 51, 234, 0.25);
	color: #a855f7;
}

.theme-dark .context-tag.place-tag {
	background: rgba(34, 197, 94, 0.25);
	color: #4ade80;
}

/* Clickable theographic items */
.context-tag.clickable,
.context-event-item.clickable {
	cursor: pointer;
	transition: all 0.15s ease;
}

.context-tag.clickable:hover {
	transform: scale(1.05);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
}

/* Events section styling */
.context-events {
	display: flex;
	flex-direction: column;
	gap: 10px;
}

.context-event-item {
	padding: 12px;
	background: var(--background-secondary);
	border-radius: var(--bp-radius-md);
	border-left: 3px solid var(--interactive-accent);
}

.context-event-item.clickable:hover {
	background: var(--background-modifier-hover);
	transform: translateX(4px);
}

.context-event-item .event-title {
	font-weight: 600;
	color: var(--text-normal);
	margin-bottom: 4px;
}

.context-event-item .event-date {
	font-size: 0.85em;
	color: var(--text-muted);
}

.context-event-item .event-duration {
	font-size: 0.8em;
	color: var(--text-faint);
	font-style: italic;
}

/* Parallels tab styling */
.parallels-header {
	padding-bottom: 12px;
	border-bottom: 1px solid var(--background-modifier-border);
	margin-bottom: 16px;
}

.parallels-title-row {
	display: flex;
	align-items: center;
	gap: 8px;
}

.parallels-title-row .title-icon {
	color: var(--text-accent);
}

.parallels-title-row h3 {
	margin: 0;
	font-size: var(--bp-text-lg);
}

.parallels-summary {
	margin-bottom: 16px;
}

.parallels-count {
	margin: 0;
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
}

.parallels-list {
	display: flex;
	flex-direction: column;
	gap: 12px;
}

.parallel-verse-section {
	background: var(--background-secondary);
	border-radius: 8px;
	padding: 10px 12px;
}

.parallel-verse-num {
	font-size: var(--bp-text-sm);
	font-weight: 600;
	color: var(--text-accent);
	margin-bottom: 8px;
}

.parallel-refs {
	display: flex;
	flex-wrap: wrap;
	gap: 6px;
}

.parallel-ref-link {
	font-size: var(--bp-text-xs);
	padding: 4px 8px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 4px;
	cursor: pointer;
	transition: all 0.2s ease;
	color: var(--text-normal);
}

.parallel-ref-link:hover {
	background: var(--interactive-accent);
	color: white;
	border-color: var(--interactive-accent);
}

/* Notes Tab styles */
.notes-tab-header {
	margin-bottom: 16px;
}

.notes-title-row {
	display: flex;
	align-items: center;
	gap: 8px;
}

.notes-title-row .title-icon {
	color: var(--text-accent);
}

.notes-title-row h3 {
	margin: 0;
	font-size: var(--bp-text-lg);
}

.notes-tab-summary {
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-bottom: 16px;
	padding-bottom: 12px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.notes-count {
	margin: 0;
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
}

.notes-tab-create-btn {
	display: flex;
	align-items: center;
	gap: 4px;
	padding: 6px 12px;
	background: var(--interactive-accent);
	color: white;
	border: none;
	border-radius: 6px;
	cursor: pointer;
	font-size: var(--bp-text-sm);
	transition: all 0.2s ease;
}

.notes-tab-create-btn:hover {
	filter: brightness(1.1);
}

.notes-tab-create-btn .btn-icon {
	display: flex;
	align-items: center;
	justify-content: center;
}

.notes-tab-list {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.notes-tab-item {
	background: var(--background-secondary);
	border-radius: 8px;
	padding: 12px;
	cursor: pointer;
	transition: all 0.2s ease;
	border: 1px solid transparent;
}

.notes-tab-item:hover {
	background: var(--background-modifier-hover);
	border-color: var(--interactive-accent);
}

.notes-tab-item.selected {
	background: var(--background-secondary-alt);
	border-color: var(--interactive-accent);
	box-shadow: 0 0 0 2px var(--interactive-accent-hover);
}

/* Notes tab preview panel */
.notes-tab-preview {
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	margin-bottom: 12px;
	min-height: 120px;
	max-height: 300px;
	overflow-y: auto;
}

.notes-tab-preview .preview-placeholder {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	padding: 24px;
	text-align: center;
	color: var(--text-muted);
}

.notes-tab-preview .preview-placeholder .placeholder-icon {
	font-size: 2em;
	margin-bottom: 8px;
	opacity: 0.5;
}

.notes-tab-preview .preview-placeholder p {
	margin: 0;
	margin-bottom: 4px;
	font-size: var(--bp-text-sm);
}

.notes-tab-preview .preview-header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 10px 12px;
	background: var(--background-secondary);
	border-bottom: 1px solid var(--background-modifier-border);
}

.notes-tab-preview .preview-header h4 {
	margin: 0;
	font-size: var(--bp-text-sm);
	color: var(--text-accent);
}

.notes-tab-preview .preview-actions {
	display: flex;
	gap: 4px;
}

.notes-tab-preview .preview-action-btn {
	padding: 4px 6px;
	background: transparent;
	border: none;
	border-radius: 4px;
	cursor: pointer;
	color: var(--text-muted);
}

.notes-tab-preview .preview-action-btn:hover {
	background: var(--background-modifier-hover);
	color: var(--interactive-accent);
}

.notes-tab-preview .preview-content {
	padding: 12px;
	font-size: var(--bp-text-sm);
	line-height: 1.6;
}

.notes-tab-preview .preview-content p {
	margin: 0 0 8px 0;
}

.notes-tab-preview .preview-content p:last-child {
	margin-bottom: 0;
}

.note-ref {
	display: flex;
	align-items: center;
	gap: 6px;
	font-weight: 600;
	font-size: var(--bp-text-sm);
	color: var(--text-accent);
	margin-bottom: 4px;
}

.note-ref .note-icon {
	display: flex;
	align-items: center;
	color: var(--text-muted);
}

.note-preview {
	font-size: var(--bp-text-xs);
	color: var(--text-muted);
	line-height: 1.4;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.hint-text {
	font-style: italic;
	font-size: var(--bp-text-xs);
	margin-top: 4px;
}

/* Context toggle button in nav */
.bible-context-btn {
	display: flex;
	align-items: center;
	padding: 6px 10px;
	background: var(--background-secondary);
	border: 2px solid var(--background-modifier-border);
	border-radius: 6px;
	cursor: pointer;
	transition: all 0.2s ease;
	color: var(--text-muted);
}

.bible-context-btn:hover {
	border-color: var(--interactive-accent);
	color: var(--text-normal);
}

.bible-context-btn.active {
	background: rgba(59, 130, 246, 0.15);
	border-color: #3b82f6;
	color: #3b82f6;
}

/* ========== MEMORIZATION MODE (15H) ========== */
.memorization-header {
	margin-bottom: 24px;
}

.memorization-header h2 {
	display: flex;
	align-items: center;
	gap: 10px;
	font-size: var(--bp-text-2xl);
	margin: 0;
}

.memorization-stats {
	margin-bottom: 24px;
}

.memorization-stats-grid {
	display: grid;
	grid-template-columns: repeat(5, 1fr);
	gap: 12px;
}

.memorization-stat-card {
	background: var(--background-secondary);
	border-radius: 12px;
	padding: 16px;
	text-align: center;
	border: 1px solid var(--background-modifier-border);
	transition: all 0.2s ease;
}

.memorization-stat-card:hover {
	transform: translateY(-2px);
	box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.memorization-stat-card .stat-icon {
	width: 32px;
	height: 32px;
	margin: 0 auto 8px;
	border-radius: 50%;
	display: flex;
	align-items: center;
	justify-content: center;
}

.memorization-stat-card.stat-new .stat-icon { background: rgba(59, 130, 246, 0.15); color: #3b82f6; }
.memorization-stat-card.stat-learning .stat-icon { background: rgba(245, 158, 11, 0.15); color: #f59e0b; }
.memorization-stat-card.stat-reviewing .stat-icon { background: rgba(139, 92, 246, 0.15); color: #8b5cf6; }
.memorization-stat-card.stat-mastered .stat-icon { background: rgba(34, 197, 94, 0.15); color: #22c55e; }
.memorization-stat-card.stat-due .stat-icon { background: rgba(239, 68, 68, 0.15); color: #ef4444; }

.memorization-stat-card .stat-value {
	font-size: var(--bp-text-2xl);
	font-weight: 700;
	color: var(--text-normal);
}

.memorization-stat-card .stat-label {
	font-size: var(--bp-text-xs);
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.memorization-actions {
	display: flex;
	gap: 12px;
	margin-bottom: 24px;
}

.memorization-practice-btn,
.memorization-add-btn {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 12px 20px;
	border-radius: 8px;
	font-weight: 500;
	cursor: pointer;
	transition: all 0.2s ease;
	border: none;
}

.memorization-practice-btn.primary {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
}

.memorization-practice-btn.primary:hover {
	filter: brightness(1.1);
}

.memorization-add-btn {
	background: var(--background-secondary);
	color: var(--text-normal);
	border: 1px solid var(--background-modifier-border);
}

.memorization-add-btn:hover {
	background: var(--background-modifier-hover);
}

.memorization-verses-section h3 {
	font-size: var(--bp-text-lg);
	margin-bottom: 16px;
}

.memorization-empty {
	text-align: center;
	padding: 48px;
	color: var(--text-muted);
}

.memorization-empty .empty-icon {
	width: 64px;
	height: 64px;
	margin: 0 auto 16px;
	opacity: 0.5;
}

.memorization-group {
	margin-bottom: 24px;
}

.memorization-group h4 {
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
	margin-bottom: 12px;
	padding-bottom: 8px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.memorization-group.new h4 { color: #3b82f6; border-color: rgba(59, 130, 246, 0.3); }
.memorization-group.learning h4 { color: #f59e0b; border-color: rgba(245, 158, 11, 0.3); }
.memorization-group.reviewing h4 { color: #8b5cf6; border-color: rgba(139, 92, 246, 0.3); }
.memorization-group.mastered h4 { color: #22c55e; border-color: rgba(34, 197, 94, 0.3); }

.memorization-verses-list {
	display: flex;
	flex-direction: column;
	gap: 8px;
}

.memorization-verse-card {
	background: var(--background-secondary);
	border-radius: 8px;
	padding: 12px 16px;
	border: 1px solid var(--background-modifier-border);
	position: relative;
	transition: all 0.2s ease;
}

.memorization-verse-card:hover {
	background: var(--background-modifier-hover);
}

.memorization-verse-card .verse-card-header {
	display: flex;
	align-items: center;
	gap: 8px;
	margin-bottom: 8px;
}

.memorization-verse-card .verse-reference {
	font-weight: 600;
	color: var(--text-normal);
}

.memorization-verse-card .verse-version-badge {
	font-size: var(--bp-text-xs);
	background: var(--background-modifier-border);
	padding: 2px 6px;
	border-radius: 4px;
	color: var(--text-muted);
}

.memorization-verse-card .verse-text-preview {
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
	line-height: 1.5;
	margin-bottom: 8px;
}

.memorization-verse-card .verse-card-footer {
	display: flex;
	align-items: center;
	gap: 12px;
	font-size: var(--bp-text-xs);
	color: var(--text-muted);
}

.memorization-verse-card .next-review.overdue {
	color: #ef4444;
	font-weight: 500;
}

.memorization-verse-card .verse-delete-btn {
	position: absolute;
	top: 8px;
	right: 8px;
	background: none;
	border: none;
	color: var(--text-muted);
	cursor: pointer;
	opacity: 0;
	transition: opacity 0.2s ease;
	padding: 4px;
}

.memorization-verse-card:hover .verse-delete-btn {
	opacity: 1;
}

.memorization-verse-card .verse-delete-btn:hover {
	color: var(--text-normal);
	background: var(--background-modifier-hover);
	border-radius: 4px;
}

/* Flashcard Modal */
.flashcard-modal-overlay {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: rgba(0, 0, 0, 0.8);
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: 1000;
}

.flashcard-modal {
	background: var(--background-primary);
	border-radius: 16px;
	width: 90%;
	max-width: 600px;
	padding: 24px;
	position: relative;
	animation: flashcard-appear 0.3s ease;
}

@keyframes flashcard-appear {
	from {
		opacity: 0;
		transform: scale(0.95) translateY(10px);
	}
	to {
		opacity: 1;
		transform: scale(1) translateY(0);
	}
}

.flashcard-progress {
	background: var(--background-modifier-border);
	border-radius: 8px;
	height: 8px;
	margin-bottom: 24px;
	position: relative;
	overflow: hidden;
}

.flashcard-progress-bar {
	background: var(--interactive-accent);
	height: 100%;
	border-radius: 8px;
	transition: width 0.3s ease;
}

.flashcard-progress-text {
	position: absolute;
	right: 0;
	top: -20px;
	font-size: var(--bp-text-xs);
	color: var(--text-muted);
}

.flashcard-container {
	min-height: 300px;
}

.flashcard-front,
.flashcard-back {
	text-align: center;
	padding: 24px;
}

.flashcard-front.hidden,
.flashcard-back.hidden {
	display: none;
}

.flashcard-reference {
	font-size: var(--bp-text-2xl);
	font-weight: 700;
	color: var(--interactive-accent);
	margin-bottom: 24px;
}

.flashcard-instruction {
	color: var(--text-muted);
	margin-bottom: 32px;
}

.flashcard-reveal-btn {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	padding: 12px 32px;
	border: none;
	border-radius: 8px;
	font-size: var(--bp-text-base);
	font-weight: 500;
	cursor: pointer;
	transition: all 0.2s ease;
}

.flashcard-reveal-btn:hover {
	filter: brightness(1.1);
}

.flashcard-hint {
	font-family: monospace;
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
	background: var(--background-secondary);
	padding: 12px;
	border-radius: 8px;
	margin-bottom: 16px;
	letter-spacing: 1px;
}

.flashcard-verse-text {
	font-size: var(--bp-text-lg);
	line-height: 1.8;
	color: var(--text-normal);
	margin-bottom: 16px;
}

.flashcard-version {
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
	margin-bottom: 24px;
}

.flashcard-rating {
	border-top: 1px solid var(--background-modifier-border);
	padding-top: 24px;
}

.flashcard-rating .rating-label {
	display: block;
	color: var(--text-muted);
	margin-bottom: 16px;
}

.flashcard-rating .rating-buttons {
	display: flex;
	gap: 12px;
	justify-content: center;
}

.flashcard-rating .rating-btn {
	padding: 12px 20px;
	border: none;
	border-radius: 8px;
	font-weight: 500;
	cursor: pointer;
	transition: all 0.2s ease;
}

.flashcard-rating .rating-btn.forgot {
	background: rgba(239, 68, 68, 0.15);
	color: #ef4444;
}

.flashcard-rating .rating-btn.hard {
	background: rgba(245, 158, 11, 0.15);
	color: #f59e0b;
}

.flashcard-rating .rating-btn.good {
	background: rgba(59, 130, 246, 0.15);
	color: #3b82f6;
}

.flashcard-rating .rating-btn.easy {
	background: rgba(34, 197, 94, 0.15);
	color: #22c55e;
}

.flashcard-rating .rating-btn:hover {
	filter: brightness(1.2);
	transform: translateY(-2px);
}

.flashcard-close-btn {
	position: absolute;
	top: 16px;
	right: 16px;
	background: none;
	border: none;
	font-size: 24px;
	color: var(--text-muted);
	cursor: pointer;
}

.flashcard-close-btn:hover {
	color: var(--text-normal);
}

/* Add Memorization Modal */
.add-memorization-modal-overlay {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: rgba(0, 0, 0, 0.7);
	display: flex;
	align-items: center;
	justify-content: center;
	z-index: 1000;
}

.add-memorization-modal {
	background: var(--background-primary);
	border-radius: 12px;
	width: 90%;
	max-width: 500px;
	padding: 24px;
	position: relative;
	pointer-events: auto;
}

.add-memorization-modal h3 {
	margin: 0 0 20px 0;
	font-size: var(--bp-text-xl);
}

.add-verse-form .form-group {
	margin-bottom: 16px;
}

.add-verse-form .form-group label {
	display: block;
	font-size: var(--bp-text-sm);
	color: var(--text-muted);
	margin-bottom: 6px;
}

.add-verse-form .form-group input,
.add-verse-form .form-group select,
.add-verse-form .form-group textarea {
	width: 100%;
	padding: 10px 12px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	background: var(--background-secondary);
	color: var(--text-normal);
	font-size: var(--bp-text-base);
	pointer-events: auto !important;
	-webkit-user-select: text !important;
	user-select: text !important;
	cursor: text;
}

.add-verse-form .form-group input:focus,
.add-verse-form .form-group textarea:focus {
	outline: 2px solid var(--interactive-accent);
	outline-offset: -1px;
}

.add-verse-form .form-group textarea {
	resize: vertical;
	font-family: inherit;
}

.add-verse-form .form-actions {
	display: flex;
	gap: 12px;
	justify-content: flex-end;
	margin-top: 20px;
}

.add-verse-form .form-actions button {
	padding: 10px 20px;
	border-radius: 6px;
	font-weight: 500;
	cursor: pointer;
	transition: all 0.2s ease;
}

.add-verse-form .cancel-btn {
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	color: var(--text-muted);
}

.add-verse-form .lookup-btn {
	background: var(--background-secondary);
	border: 1px solid var(--interactive-accent);
	color: var(--interactive-accent);
}

.add-verse-form .add-btn.primary {
	background: var(--interactive-accent);
	border: none;
	color: var(--text-on-accent);
}

.add-memorization-modal .modal-close-btn {
	position: absolute;
	top: 12px;
	right: 12px;
	background: none;
	border: none;
	font-size: 20px;
	color: var(--text-muted);
	cursor: pointer;
}

/* Responsive for memorization */
@media (max-width: 768px) {
	.memorization-stats-grid {
		grid-template-columns: repeat(3, 1fr);
	}
	
	.flashcard-rating .rating-buttons {
		flex-wrap: wrap;
	}
	
	.flashcard-rating .rating-btn {
		flex: 1 1 45%;
	}
}

/* ========== ADAPTIVE READING PLAN (15E) ========== */
.reading-plan-adaptive-section {
	margin: 24px 0;
	padding: 20px;
	background: var(--background-secondary);
	border-radius: 12px;
	border: 1px solid var(--background-modifier-border);
}

.reading-plan-adaptive-section h3 {
	margin: 0 0 16px 0;
	font-size: var(--bp-text-base);
}

.adaptive-mode-selector {
	display: grid;
	grid-template-columns: repeat(3, 1fr);
	gap: 12px;
}

.adaptive-mode-card {
	background: var(--background-primary);
	border: 2px solid var(--background-modifier-border);
	border-radius: 10px;
	padding: 16px;
	text-align: center;
	cursor: pointer;
	transition: all 0.2s ease;
}

.adaptive-mode-card:hover {
	border-color: var(--interactive-accent);
	background: var(--background-modifier-hover);
}

.adaptive-mode-card.active {
	border-color: var(--interactive-accent);
	background: rgba(59, 130, 246, 0.1);
}

.adaptive-mode-card .mode-icon {
	width: 32px;
	height: 32px;
	margin: 0 auto 8px;
	color: var(--text-muted);
}

.adaptive-mode-card.active .mode-icon {
	color: var(--interactive-accent);
}

.adaptive-mode-card .mode-label {
	font-weight: 600;
	font-size: var(--bp-text-sm);
	margin-bottom: 4px;
}

.adaptive-mode-card .mode-desc {
	font-size: var(--bp-text-xs);
	color: var(--text-muted);
	line-height: 1.4;
}

.behind-schedule-warning {
	margin-top: 16px;
	padding: 12px 16px;
	background: rgba(245, 158, 11, 0.1);
	border: 1px solid rgba(245, 158, 11, 0.3);
	border-radius: 8px;
	display: flex;
	align-items: center;
	gap: 8px;
	font-size: var(--bp-text-sm);
}

.behind-schedule-warning .warning-icon {
	color: #f59e0b;
	flex-shrink: 0;
}

/* ========== ANNOTATION LAYERS (15G) ========== */
.annotation-layers-section {
	margin-top: 24px;
	padding: 20px;
	background: var(--background-secondary);
	border-radius: 12px;
	border: 1px solid var(--background-modifier-border);
}

.annotation-layers-section h3 {
	margin: 0 0 16px 0;
	font-size: var(--bp-text-lg);
	display: flex;
	align-items: center;
	gap: 8px;
}

.layers-list {
	display: flex;
	flex-direction: column;
	gap: 8px;
	margin-bottom: 16px;
}

.layer-item {
	display: flex;
	align-items: center;
	gap: 12px;
	padding: 12px 16px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	transition: all 0.2s ease;
}

.layer-item:hover {
	background: var(--background-modifier-hover);
}

.layer-item.active {
	border-color: var(--interactive-accent);
	background: rgba(59, 130, 246, 0.05);
}

.layer-color-dot {
	width: 16px;
	height: 16px;
	border-radius: 50%;
	flex-shrink: 0;
}

.layer-visibility-toggle {
	background: none;
	border: none;
	padding: 4px;
	cursor: pointer;
	color: var(--text-muted);
	transition: color 0.2s ease;
}

.layer-visibility-toggle.visible {
	color: var(--interactive-accent);
}

.layer-visibility-toggle:hover {
	color: var(--text-normal);
}

.layer-name {
	flex: 1;
	font-weight: 500;
}

.layer-name-input {
	flex: 1;
	padding: 4px 8px;
	border: 1px solid var(--interactive-accent);
	border-radius: 4px;
	background: var(--background-primary);
	color: var(--text-normal);
	font-size: var(--bp-text-sm);
}

.layer-active-badge {
	font-size: var(--bp-text-xs);
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	padding: 2px 8px;
	border-radius: 10px;
}

.layer-default-badge {
	font-size: var(--bp-text-xs);
	background: var(--background-modifier-border);
	color: var(--text-muted);
	padding: 2px 8px;
	border-radius: 10px;
}

.layer-actions {
	display: flex;
	gap: 4px;
}

.layer-actions button {
	background: none;
	border: none;
	padding: 4px;
	cursor: pointer;
	color: var(--text-muted);
	border-radius: 4px;
	transition: all 0.2s ease;
}

.layer-actions button:hover {
	background: var(--background-modifier-hover);
	color: var(--text-normal);
}

.layer-actions button.delete:hover {
	color: #ef4444;
}

.add-layer-btn {
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 8px;
	width: 100%;
	padding: 12px;
	background: var(--background-primary);
	border: 2px dashed var(--background-modifier-border);
	border-radius: 8px;
	color: var(--text-muted);
	cursor: pointer;
	transition: all 0.2s ease;
}

.add-layer-btn:hover {
	border-color: var(--interactive-accent);
	color: var(--interactive-accent);
}

/* Layer selector in highlight toolbar */
.layer-selector-dropdown {
	position: relative;
}

.layer-selector-btn {
	display: flex;
	align-items: center;
	gap: 6px;
	padding: 6px 12px;
	background: var(--background-secondary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 6px;
	cursor: pointer;
	font-size: var(--bp-text-sm);
}

.layer-selector-btn:hover {
	background: var(--background-modifier-hover);
}

.layer-selector-menu {
	position: absolute;
	top: 100%;
	left: 0;
	margin-top: 4px;
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 8px;
	box-shadow: 0 4px 12px rgba(0,0,0,0.15);
	z-index: 100;
	min-width: 180px;
}

.layer-selector-option {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 10px 12px;
	cursor: pointer;
	transition: background 0.2s ease;
}

.layer-selector-option:hover {
	background: var(--background-modifier-hover);
}

.layer-selector-option.selected {
	background: rgba(59, 130, 246, 0.1);
}

/* Layer indicator on highlights */
.highlight-layer-indicator {
	position: absolute;
	top: -6px;
	right: -6px;
	width: 12px;
	height: 12px;
	border-radius: 50%;
	border: 2px solid var(--background-primary);
}

/* ================================================
   EPIC SETTINGS PAGE OVERHAUL
   Card-based, organized, and informative
   ================================================ */

/* Settings container */
.bp-settings-container {
	max-width: 800px;
	margin: 0 auto;
	padding: 0 16px;
}

.bp-settings-header {
	text-align: center;
	margin-bottom: 32px;
	padding-bottom: 24px;
	border-bottom: 1px solid var(--background-modifier-border);
}

.bp-settings-header h2 {
	font-size: 28px;
	font-weight: 600;
	margin: 0 0 8px 0;
	color: var(--text-normal);
}

.bp-settings-header .settings-subtitle {
	color: var(--text-muted);
	font-size: 14px;
	margin: 0;
}

/* Search bar */
.bp-settings-search {
	position: relative;
	margin-bottom: 24px;
}

.bp-settings-search input {
	width: 100%;
	padding: 12px 16px 12px 44px;
	border: 1px solid var(--background-modifier-border);
	border-radius: 12px;
	background: var(--background-primary);
	font-size: 14px;
	transition: all 0.2s ease;
}

.bp-settings-search input:focus {
	outline: none;
	border-color: var(--interactive-accent);
	box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.bp-settings-search .search-icon {
	position: absolute;
	left: 14px;
	top: 50%;
	transform: translateY(-50%);
	color: var(--text-muted);
}

/* Section card */
.bp-settings-section {
	background: var(--background-primary);
	border: 1px solid var(--background-modifier-border);
	border-radius: 12px;
	margin-bottom: 16px;
	overflow: hidden;
	transition: all 0.2s ease;
}

.bp-settings-section:hover {
	border-color: var(--background-modifier-border-hover);
}

.bp-settings-section.collapsed .bp-settings-section-content {
	display: none;
}

.bp-settings-section.collapsed .bp-settings-section-header .section-chevron {
	transform: rotate(-90deg);
}

/* Section header */
.bp-settings-section-header {
	display: flex;
	align-items: center;
	gap: 12px;
	padding: 16px 20px;
	cursor: pointer;
	user-select: none;
	background: var(--background-secondary);
	transition: background 0.2s ease;
}

.bp-settings-section-header:hover {
	background: var(--background-modifier-hover);
}

.bp-settings-section-header .section-icon {
	width: 40px;
	height: 40px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: var(--background-primary);
	border-radius: 10px;
	color: var(--interactive-accent);
	flex-shrink: 0;
}

.bp-settings-section-header .section-icon svg {
	width: 20px;
	height: 20px;
}

.bp-settings-section-header .section-title-group {
	flex: 1;
	min-width: 0;
}

.bp-settings-section-header .section-title {
	font-size: 16px;
	font-weight: 600;
	color: var(--text-normal);
	margin: 0;
}

.bp-settings-section-header .section-badge {
	font-size: 11px;
	padding: 2px 8px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-radius: 10px;
	margin-left: 8px;
}

.bp-settings-section-header .section-chevron {
	color: var(--text-muted);
	transition: transform 0.2s ease;
	flex-shrink: 0;
}

/* Section content */
.bp-settings-section-content {
	padding: 0 20px 20px;
}

/* Purpose statement */
.bp-settings-purpose {
	background: var(--background-secondary);
	border-left: 3px solid var(--interactive-accent);
	padding: 12px 16px;
	margin: 16px 0;
	border-radius: 0 8px 8px 0;
	font-size: 13px;
	color: var(--text-muted);
	line-height: 1.5;
}

/* Settings group within section */
.bp-settings-group {
	margin-top: 16px;
}

.bp-settings-group-title {
	font-size: 12px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	color: var(--text-muted);
	margin: 0 0 12px 0;
	padding-bottom: 8px;
	border-bottom: 1px solid var(--background-modifier-border);
}

/* Individual setting item override */
.bp-settings-section .setting-item {
	border: none;
	padding: 12px 0;
	margin: 0;
}

.bp-settings-section .setting-item:not(:last-child) {
	border-bottom: 1px solid var(--background-modifier-border);
}

.bp-settings-section .setting-item-info {
	flex: 1;
	min-width: 0;
}

.bp-settings-section .setting-item-name {
	font-weight: 500;
	color: var(--text-normal);
}

.bp-settings-section .setting-item-description {
	font-size: 12px;
	color: var(--text-muted);
	line-height: 1.4;
}

/* Visual preview boxes */
.bp-settings-preview-row {
	display: flex;
	gap: 12px;
	margin: 16px 0;
	flex-wrap: wrap;
}

.bp-settings-preview-item {
	flex: 1;
	min-width: 100px;
	max-width: 140px;
	padding: 12px;
	background: var(--background-secondary);
	border: 2px solid transparent;
	border-radius: 8px;
	cursor: pointer;
	text-align: center;
	transition: all 0.2s ease;
}

.bp-settings-preview-item:hover {
	background: var(--background-modifier-hover);
}

.bp-settings-preview-item.selected {
	border-color: var(--interactive-accent);
	background: rgba(59, 130, 246, 0.1);
}

.bp-settings-preview-item .preview-swatch {
	width: 100%;
	height: 48px;
	border-radius: 6px;
	margin-bottom: 8px;
}

.bp-settings-preview-item .preview-label {
	font-size: 12px;
	color: var(--text-muted);
}

.bp-settings-preview-item.selected .preview-label {
	color: var(--interactive-accent);
	font-weight: 500;
}

/* Theme swatches with gradients */
.theme-preview-parchment { background: linear-gradient(135deg, #d4a574 0%, #c49565 100%); }
.theme-preview-holy-light { background: linear-gradient(135deg, #fef3c7 0%, #fcd34d 100%); }
.theme-preview-royal { background: linear-gradient(135deg, #7c3aed 0%, #5b21b6 100%); }
.theme-preview-sacrifice { background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%); }
.theme-preview-ocean { background: linear-gradient(135deg, #0ea5e9 0%, #0284c7 100%); }
.theme-preview-custom { background: linear-gradient(135deg, var(--background-modifier-border) 0%, var(--background-secondary) 100%); position: relative; }
.theme-preview-custom::after {
	content: "";
	position: absolute;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	font-size: 18px;
}

/* Font preview */
.font-preview-sample {
	padding: 16px;
	background: var(--background-secondary);
	border-radius: 8px;
	margin: 12px 0;
	text-align: center;
}

.font-preview-sample .sample-verse {
	font-size: 18px;
	line-height: 1.6;
	color: var(--text-normal);
}

.font-preview-sample .sample-ref {
	font-size: 12px;
	color: var(--text-muted);
	margin-top: 8px;
}

/* Stats cards */
.bp-settings-stats {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
	gap: 12px;
	margin: 16px 0;
}

.bp-settings-stat-card {
	background: var(--background-secondary);
	padding: 16px;
	border-radius: 8px;
	text-align: center;
}

.bp-settings-stat-card .stat-value {
	font-size: 24px;
	font-weight: 600;
	color: var(--interactive-accent);
}

.bp-settings-stat-card .stat-label {
	font-size: 11px;
	color: var(--text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
	margin-top: 4px;
}

/* Progress bar */
.bp-settings-progress {
	background: var(--background-modifier-border);
	height: 8px;
	border-radius: 4px;
	overflow: hidden;
	margin: 8px 0;
}

.bp-settings-progress-bar {
	height: 100%;
	background: var(--interactive-accent);
	border-radius: 4px;
	transition: width 0.3s ease;
}

/* Color palette display */
.bp-settings-color-palette {
	display: flex;
	gap: 8px;
	flex-wrap: wrap;
	margin: 12px 0;
}

.bp-settings-color-chip {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 8px 12px;
	background: var(--background-secondary);
	border-radius: 8px;
	cursor: pointer;
	transition: all 0.2s ease;
}

.bp-settings-color-chip:hover {
	background: var(--background-modifier-hover);
}

.bp-settings-color-chip .color-dot {
	width: 20px;
	height: 20px;
	border-radius: 50%;
	border: 2px solid rgba(0,0,0,0.1);
}

.bp-settings-color-chip .color-name {
	font-size: 13px;
	color: var(--text-normal);
}

.bp-settings-color-chip .color-count {
	font-size: 11px;
	color: var(--text-muted);
	margin-left: auto;
}

/* Action buttons row */
.bp-settings-actions {
	display: flex;
	gap: 8px;
	flex-wrap: wrap;
	margin: 16px 0;
}

.bp-settings-actions button {
	padding: 8px 16px;
	border-radius: 8px;
	font-size: 13px;
	cursor: pointer;
	transition: all 0.2s ease;
}

.bp-settings-actions .action-primary {
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
}

.bp-settings-actions .action-primary:hover {
	filter: brightness(1.1);
}

.bp-settings-actions .action-secondary {
	background: var(--background-secondary);
	color: var(--text-normal);
	border: 1px solid var(--background-modifier-border);
}

.bp-settings-actions .action-secondary:hover {
	background: var(--background-modifier-hover);
}

.bp-settings-actions .action-danger {
	background: transparent;
	color: #ef4444;
	border: 1px solid #ef4444;
}

.bp-settings-actions .action-danger:hover {
	background: rgba(239, 68, 68, 0.1);
}

/* Status indicator */
.bp-settings-status {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 12px 16px;
	background: var(--background-secondary);
	border-radius: 8px;
	margin: 12px 0;
}

.bp-settings-status .status-icon {
	width: 8px;
	height: 8px;
	border-radius: 50%;
}

.bp-settings-status .status-icon.success { background: #10b981; }
.bp-settings-status .status-icon.warning { background: #f59e0b; }
.bp-settings-status .status-icon.error { background: #ef4444; }

.bp-settings-status .status-text {
	font-size: 13px;
	color: var(--text-muted);
	flex: 1;
}

/* Inline action button in status row */
.bp-settings-status .action-inline {
	margin-left: auto;
	padding: 4px 12px;
	font-size: 12px;
	border-radius: 4px;
	cursor: pointer;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border: none;
	transition: opacity 0.2s ease;
}

.bp-settings-status .action-inline:hover {
	opacity: 0.9;
}

.bp-settings-status .action-inline:disabled {
	opacity: 0.5;
	cursor: not-allowed;
}

/* Download Progress Modal */
.download-progress-modal {
	padding: 24px;
	min-width: 350px;
}

.download-progress-modal h2 {
	margin: 0 0 20px 0;
	font-size: 18px;
	font-weight: 600;
}

.download-progress-bar {
	height: 8px;
	background: var(--background-modifier-border);
	border-radius: 4px;
	overflow: hidden;
	margin-bottom: 16px;
}

.download-progress-fill {
	height: 100%;
	background: var(--interactive-accent);
	border-radius: 4px;
	transition: width 0.3s ease;
}

.download-progress-fill.complete {
	background: #10b981;
}

.download-progress-fill.error {
	background: #ef4444;
}

.download-status {
	margin: 0 0 16px 0;
	color: var(--text-muted);
	font-size: 14px;
	text-align: center;
}

.download-status.error {
	color: #ef4444;
}

.download-close-btn {
	display: block;
	width: 100%;
	padding: 10px;
	border: none;
	border-radius: 6px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	cursor: pointer;
	font-size: 14px;
	font-weight: 500;
}

.download-close-btn:hover {
	opacity: 0.9;
}

/* Sidebar download button */
.sidebar-download-btn {
	margin-top: 16px;
	padding: 10px 20px;
	border: none;
	border-radius: 8px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	cursor: pointer;
	font-size: 14px;
	font-weight: 500;
	transition: opacity 0.2s ease, transform 0.2s ease;
}

.sidebar-download-btn:hover {
	opacity: 0.9;
	transform: translateY(-1px);
}

.sidebar-download-btn:disabled {
	opacity: 0.6;
	cursor: not-allowed;
	transform: none;
}

/* About section special styling */
.bp-settings-about {
	text-align: center;
	padding: 32px 20px;
}

.bp-settings-about .about-logo {
	font-size: 48px;
	margin-bottom: 16px;
}

.bp-settings-about .about-title {
	font-size: 24px;
	font-weight: 600;
	margin: 0 0 4px 0;
}

.bp-settings-about .about-version {
	font-size: 13px;
	color: var(--text-muted);
	margin: 0 0 16px 0;
}

.bp-settings-about .about-description {
	font-size: 14px;
	color: var(--text-muted);
	line-height: 1.6;
	max-width: 500px;
	margin: 0 auto 24px;
}

.bp-settings-features-grid {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
	gap: 12px;
	margin: 24px 0;
	text-align: left;
}

.bp-settings-feature-item {
	display: flex;
	align-items: center;
	gap: 8px;
	font-size: 13px;
	color: var(--text-muted);
}

.bp-settings-feature-item svg {
	color: var(--interactive-accent);
	flex-shrink: 0;
}

/* Layer list in settings */
.bp-settings-layer-list {
	display: flex;
	flex-direction: column;
	gap: 8px;
	margin: 16px 0;
}

.bp-settings-layer-item {
	display: flex;
	align-items: center;
	gap: 12px;
	padding: 12px 16px;
	background: var(--background-secondary);
	border-radius: 8px;
	transition: all 0.2s ease;
}

.bp-settings-layer-item:hover {
	background: var(--background-modifier-hover);
}

.bp-settings-layer-item .layer-color {
	width: 24px;
	height: 24px;
	border-radius: 6px;
	flex-shrink: 0;
	cursor: pointer;
	border: 2px solid rgba(0,0,0,0.1);
}

.bp-settings-layer-item .layer-name {
	flex: 1;
	font-size: 14px;
}

.bp-settings-layer-item .layer-visibility {
	padding: 4px;
	background: none;
	border: none;
	cursor: pointer;
	color: var(--text-muted);
	border-radius: 4px;
	transition: all 0.2s ease;
}

.bp-settings-layer-item .layer-visibility:hover {
	background: var(--background-primary);
	color: var(--interactive-accent);
}

.bp-settings-layer-item .layer-visibility.visible {
	color: var(--interactive-accent);
}

.bp-settings-layer-item .layer-badge {
	font-size: 10px;
	padding: 2px 8px;
	background: var(--interactive-accent);
	color: var(--text-on-accent);
	border-radius: 10px;
}

.bp-settings-layer-item .layer-delete {
	padding: 4px;
	background: none;
	border: none;
	cursor: pointer;
	color: var(--text-muted);
	border-radius: 4px;
	opacity: 0;
	transition: all 0.2s ease;
}

.bp-settings-layer-item:hover .layer-delete {
	opacity: 1;
}

.bp-settings-layer-item .layer-delete:hover {
	background: rgba(239, 68, 68, 0.1);
	color: #ef4444;
}

/* Reading plan cards in settings */
.bp-settings-plan-card {
	display: flex;
	align-items: center;
	gap: 16px;
	padding: 16px;
	background: var(--background-secondary);
	border-radius: 8px;
	margin-bottom: 12px;
	transition: all 0.2s ease;
}

.bp-settings-plan-card:hover {
	background: var(--background-modifier-hover);
}

.bp-settings-plan-card.active {
	border-left: 3px solid var(--interactive-accent);
}

.bp-settings-plan-card .plan-info {
	flex: 1;
}

.bp-settings-plan-card .plan-name {
	font-weight: 500;
	color: var(--text-normal);
	margin-bottom: 4px;
}

.bp-settings-plan-card .plan-desc {
	font-size: 12px;
	color: var(--text-muted);
}

.bp-settings-plan-card .plan-progress {
	text-align: right;
}

.bp-settings-plan-card .plan-progress-value {
	font-size: 18px;
	font-weight: 600;
	color: var(--interactive-accent);
}

.bp-settings-plan-card .plan-progress-label {
	font-size: 11px;
	color: var(--text-muted);
}

/* Empty state */
.bp-settings-empty {
	text-align: center;
	padding: 32px;
	color: var(--text-muted);
}

.bp-settings-empty .empty-icon {
	font-size: 32px;
	margin-bottom: 12px;
	opacity: 0.5;
}

.bp-settings-empty .empty-text {
	font-size: 14px;
}

/* Error state */
.bp-settings-error {
	background: rgba(239, 68, 68, 0.1);
	border: 1px solid rgba(239, 68, 68, 0.3);
	border-radius: 8px;
	padding: 16px;
	margin-top: 16px;
	font-family: monospace;
	font-size: 12px;
	color: #ef4444;
	white-space: pre-wrap;
	word-break: break-word;
}

/* Inline toggle with label */
.bp-settings-inline-toggle {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 12px 0;
}

.bp-settings-inline-toggle:not(:last-child) {
	border-bottom: 1px solid var(--background-modifier-border);
}

.bp-settings-inline-toggle .toggle-info {
	flex: 1;
}

.bp-settings-inline-toggle .toggle-label {
	font-weight: 500;
	color: var(--text-normal);
}

.bp-settings-inline-toggle .toggle-desc {
	font-size: 12px;
	color: var(--text-muted);
	margin-top: 2px;
}

/* Data management download progress */
.bp-settings-download-progress {
	margin: 16px 0;
	padding: 16px;
	background: var(--background-secondary);
	border-radius: 8px;
}

.bp-settings-download-progress .progress-text {
	font-size: 13px;
	color: var(--text-muted);
	margin-bottom: 8px;
}

.bp-settings-download-progress .progress-bar-outer {
	background: var(--background-modifier-border);
	height: 8px;
	border-radius: 4px;
	overflow: hidden;
}

.bp-settings-download-progress .progress-bar-inner {
	height: 100%;
	background: var(--interactive-accent);
	transition: width 0.3s ease;
}

/* ==========================================================================
   Bible Reference Insert (@reference syntax) - Suggestion Dropdown
   ========================================================================== */

/* Suggestion item container */
.bible-reference-suggestion {
	display: flex;
	align-items: center;
	gap: 10px;
	padding: 8px 12px;
	cursor: pointer;
}

.bible-reference-suggestion:hover {
	background: var(--background-modifier-hover);
}

/* Suggestion type icon */
.bible-reference-suggestion .suggestion-icon {
	flex-shrink: 0;
	width: 20px;
	height: 20px;
	display: flex;
	align-items: center;
	justify-content: center;
	color: var(--text-muted);
}

.bible-reference-suggestion .suggestion-icon svg {
	width: 16px;
	height: 16px;
}

/* Recent references get a subtle highlight */
.bible-reference-suggestion[data-type="recent"] .suggestion-icon {
	color: var(--interactive-accent);
}

/* Suggestion text content */
.bible-reference-suggestion .suggestion-content {
	flex: 1;
	min-width: 0;
	overflow: hidden;
}

.bible-reference-suggestion .suggestion-text {
	font-weight: 500;
	color: var(--text-normal);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.bible-reference-suggestion .suggestion-description {
	font-size: 12px;
	color: var(--text-muted);
	margin-top: 2px;
}

/* Suggestion preview (verse text preview) */
.bible-reference-suggestion .suggestion-preview {
	font-size: 12px;
	color: var(--text-faint);
	margin-top: 4px;
	font-style: italic;
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
	max-width: 400px;
}

/* ==========================================================================
   Bible Callout Styling
   ========================================================================== */

/* Base Bible callout styling */
.callout[data-callout="bible"],
.callout[data-callout="bible-manuscript"] {
	--callout-color: 139, 69, 19;
	--callout-icon: lucide-book-open;
	border-left: 4px solid var(--bp-earth, #8B4513);
	background: rgba(139, 69, 19, 0.05);
}

.theme-dark .callout[data-callout="bible"],
.theme-dark .callout[data-callout="bible-manuscript"] {
	background: rgba(139, 69, 19, 0.1);
}

/* Bible callout title */
.callout[data-callout="bible"] .callout-title,
.callout[data-callout="bible-manuscript"] .callout-title {
	color: var(--bp-earth, #8B4513);
}

.theme-dark .callout[data-callout="bible"] .callout-title,
.theme-dark .callout[data-callout="bible-manuscript"] .callout-title {
	color: #CD853F;
}

/* Manuscript mode: flowing prose style */
.callout[data-callout="bible-manuscript"] .callout-content {
	font-style: italic;
	line-height: 1.7;
}

/* Verse numbers in callout (superscript bold) */
.callout[data-callout="bible"] .callout-content strong,
.callout[data-callout="bible-manuscript"] .callout-content strong {
	font-weight: 700;
	color: var(--text-accent);
	font-size: 0.85em;
	vertical-align: super;
}

/* Version attribution at end */
.callout[data-callout="bible"] .callout-content em,
.callout[data-callout="bible-manuscript"] .callout-content em {
	font-size: 0.9em;
	color: var(--text-muted);
}

/* ==========================================================================
   Clickable Bible Callout
   ========================================================================== */

.bible-callout-clickable {
	cursor: pointer;
	transition: transform 0.15s ease, box-shadow 0.15s ease;
}

.bible-callout-clickable:hover {
	transform: translateY(-1px);
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.theme-dark .bible-callout-clickable:hover {
	box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

/* Click indicator icon */
.bible-callout-indicator {
	display: inline-flex;
	align-items: center;
	margin-left: 8px;
	opacity: 0;
	transition: opacity 0.2s ease;
}

.bible-callout-indicator svg {
	width: 14px;
	height: 14px;
	color: var(--text-muted);
}

.bible-callout-clickable:hover .bible-callout-indicator {
	opacity: 1;
}

/* Hint text for double-click on content */
.bible-callout-clickable .callout-content {
	position: relative;
}

.bible-callout-clickable .callout-content::after {
	content: "Double-click to open in Bible Portal";
	position: absolute;
	bottom: -20px;
	left: 0;
	font-size: 10px;
	color: var(--text-faint);
	opacity: 0;
	transition: opacity 0.2s ease;
	pointer-events: none;
}

.bible-callout-clickable:hover .callout-content::after {
	opacity: 0.6;
}
